(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const Wn=!1;var ps=Array.isArray,xi=Array.prototype.indexOf,yi=Array.from,vi=Object.defineProperty,ut=Object.getOwnPropertyDescriptor,Ya=Object.getOwnPropertyDescriptors,wi=Object.prototype,_i=Array.prototype,fs=Object.getPrototypeOf;function zt(e){return typeof e=="function"}const je=()=>{};function ki(e){return typeof(e==null?void 0:e.then)=="function"}function Ai(e){return e()}function Hr(e){for(var t=0;t<e.length;t++)e[t]()}const He=2,Ka=4,yr=8,ln=16,Ze=32,vr=64,Hn=128,Pt=256,Zr=512,Ee=1024,bt=2048,wr=4096,Vt=8192,Xt=16384,Qa=32768,_r=65536,Si=1<<17,Ni=1<<19,Ja=1<<20,Ct=Symbol("$state"),eo=Symbol("legacy props"),Ti=Symbol("");function to(e){return e===this.v}function ms(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function qi(e,t){return e!==t}function gs(e){return!ms(e,this.v)}function Mi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ci(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ii(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Oi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function $i(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ei(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Li(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Bi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Yt=!1,Di=!1;function zi(){Yt=!0}const ji=1,Ri=2,ro=4,Fi=8,Gi=16,Ui=1,Vi=2,Wi=4,Hi=1,Zi=2,Se=Symbol();function De(e,t){var r={f:0,v:e,reactions:null,equals:to,rv:0,wv:0};return r}function ir(e,t=!1){var n;const r=De(e);return t||(r.equals=gs),Yt&&te!==null&&te.l!==null&&((n=te.l).s??(n.s=[])).push(r),r}function pt(e,t=!1){return Xi(ir(e,t))}function Xi(e){return ce!==null&&ce.f&He&&(tt===null?ol([e]):tt.push(e)),e}function xe(e,t){return ce!==null&&kr()&&ce.f&(He|ln)&&(tt===null||!tt.includes(e))&&Bi(),Fr(e,t)}function Fr(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=vo(),no(e,bt),kr()&&ee!==null&&ee.f&Ee&&!(ee.f&Ze)&&(Ne!==null&&Ne.includes(e)?(Xe(ee,bt),hn(ee)):gt===null?il([e]):gt.push(e))),t}function no(e,t){var r=e.reactions;if(r!==null)for(var n=kr(),s=r.length,a=0;a<s;a++){var l=r[a],u=l.f;u&bt||!n&&l===ee||(Xe(l,t),u&(Ee|Pt)&&(u&He?no(l,wr):hn(l)))}}function jt(e,t=null,r){if(typeof e!="object"||e===null||Ct in e)return e;const n=fs(e);if(n!==wi&&n!==_i)return e;var s=new Map,a=ps(e),l=De(0);a&&s.set("length",De(e.length));var u;return new Proxy(e,{defineProperty(c,d,p){(!("value"in p)||p.configurable===!1||p.enumerable===!1||p.writable===!1)&&$i();var x=s.get(d);return x===void 0?(x=De(p.value),s.set(d,x)):xe(x,jt(p.value,u)),!0},deleteProperty(c,d){var p=s.get(d);if(p===void 0)d in c&&s.set(d,De(Se));else{if(a&&typeof d=="string"){var x=s.get("length"),f=Number(d);Number.isInteger(f)&&f<x.v&&xe(x,f)}xe(p,Se),js(l)}return!0},get(c,d,p){var M;if(d===Ct)return e;var x=s.get(d),f=d in c;if(x===void 0&&(!f||(M=ut(c,d))!=null&&M.writable)&&(x=De(jt(f?c[d]:Se,u)),s.set(d,x)),x!==void 0){var v=H(x);return v===Se?void 0:v}return Reflect.get(c,d,p)},getOwnPropertyDescriptor(c,d){var p=Reflect.getOwnPropertyDescriptor(c,d);if(p&&"value"in p){var x=s.get(d);x&&(p.value=H(x))}else if(p===void 0){var f=s.get(d),v=f==null?void 0:f.v;if(f!==void 0&&v!==Se)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return p},has(c,d){var v;if(d===Ct)return!0;var p=s.get(d),x=p!==void 0&&p.v!==Se||Reflect.has(c,d);if(p!==void 0||ee!==null&&(!x||(v=ut(c,d))!=null&&v.writable)){p===void 0&&(p=De(x?jt(c[d],u):Se),s.set(d,p));var f=H(p);if(f===Se)return!1}return x},set(c,d,p,x){var P;var f=s.get(d),v=d in c;if(a&&d==="length")for(var M=p;M<f.v;M+=1){var I=s.get(M+"");I!==void 0?xe(I,Se):M in c&&(I=De(Se),s.set(M+"",I))}f===void 0?(!v||(P=ut(c,d))!=null&&P.writable)&&(f=De(void 0),xe(f,jt(p,u)),s.set(d,f)):(v=f.v!==Se,xe(f,jt(p,u)));var L=Reflect.getOwnPropertyDescriptor(c,d);if(L!=null&&L.set&&L.set.call(x,p),!v){if(a&&typeof d=="string"){var w=s.get("length"),k=Number(d);Number.isInteger(k)&&k>=w.v&&xe(w,k+1)}js(l)}return!0},ownKeys(c){H(l);var d=Reflect.ownKeys(c).filter(f=>{var v=s.get(f);return v===void 0||v.v!==Se});for(var[p,x]of s)x.v!==Se&&!(p in c)&&d.push(p);return d},setPrototypeOf(){Ei()}})}function js(e,t=1){xe(e,e.v+t)}var Rs,so,ao;function Yi(){if(Rs===void 0){Rs=window;var e=Element.prototype,t=Node.prototype;so=ut(t,"firstChild").get,ao=ut(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function bs(e=""){return document.createTextNode(e)}function lr(e){return so.call(e)}function xs(e){return ao.call(e)}function ve(e,t){return lr(e)}function $e(e,t){{var r=lr(e);return r instanceof Comment&&r.data===""?xs(r):r}}function ie(e,t=1,r=!1){let n=e;for(;t--;)n=xs(n);return n}function Xr(e){var t=He|bt;ee===null?t|=Pt:ee.f|=Ja;var r=ce!==null&&ce.f&He?ce:null;const n={children:null,ctx:te,deps:null,equals:to,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??ee};return r!==null&&(r.children??(r.children=[])).push(n),n}function Ki(e){const t=Xr(e);return t.equals=gs,t}function oo(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var n=t[r];n.f&He?ys(n):xt(n)}}}function Qi(e){for(var t=e.parent;t!==null;){if(!(t.f&He))return t;t=t.parent}return null}function io(e){var t,r=ee;Le(Qi(e));try{oo(e),t=wo(e)}finally{Le(r)}return t}function lo(e){var t=io(e),r=(Tt||e.f&Pt)&&e.deps!==null?wr:Ee;Xe(e,r),e.equals(t)||(e.v=t,e.wv=vo())}function ys(e){oo(e),hr(e,0),Xe(e,Xt),e.v=e.children=e.deps=e.ctx=e.reactions=null}function uo(e){ee===null&&ce===null&&Ii(),ce!==null&&ce.f&Pt&&Ci(),As&&Mi()}function Ji(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Kt(e,t,r,n=!0){var s=(e&vr)!==0,a=ee,l={ctx:te,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|bt,first:null,fn:t,last:null,next:null,parent:s?null:a,prev:null,teardown:null,transitions:null,wv:0};if(r){var u=Rt;try{Fs(!0),Ar(l),l.f|=Qa}catch(p){throw xt(l),p}finally{Fs(u)}}else t!==null&&hn(l);var c=r&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&Ja)===0;if(!c&&!s&&n&&(a!==null&&Ji(l,a),ce!==null&&ce.f&He)){var d=ce;(d.children??(d.children=[])).push(l)}return l}function vs(e){const t=Kt(yr,null,!1);return Xe(t,Ee),t.teardown=e,t}function Zn(e){uo();var t=ee!==null&&(ee.f&Ze)!==0&&te!==null&&!te.m;if(t){var r=te;(r.e??(r.e=[])).push({fn:e,effect:ee,reaction:ce})}else{var n=ws(e);return n}}function el(e){return uo(),ks(e)}function tl(e){const t=Kt(vr,e,!0);return(r={})=>new Promise(n=>{r.outro?mt(t,()=>{xt(t),n(void 0)}):(xt(t),n(void 0))})}function ws(e){return Kt(Ka,e,!1)}function ft(e,t){var r=te,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=ks(()=>{e(),!n.ran&&(n.ran=!0,xe(r.l.r2,!0),yt(t))})}function _s(){var e=te;ks(()=>{if(H(e.l.r2)){for(var t of e.l.r1){var r=t.effect;r.f&Ee&&Xe(r,wr),Jt(r)&&Ar(r),t.ran=!1}e.l.r2.v=!1}})}function ks(e){return Kt(yr,e,!0)}function ur(e){return Qt(e)}function Qt(e,t=0){return Kt(yr|ln|t,e,!0)}function It(e,t=!0){return Kt(yr|Ze,e,!0,t)}function co(e){var t=e.teardown;if(t!==null){const r=As,n=ce;Gs(!0),Ve(null);try{t.call(null)}finally{Gs(r),Ve(n)}}}function ho(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)ys(t[r])}}function po(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;xt(r,t),r=n}}function rl(e){for(var t=e.first;t!==null;){var r=t.next;t.f&Ze||xt(t),t=r}}function xt(e,t=!0){var r=!1;if((t||e.f&Ni)&&e.nodes_start!==null){for(var n=e.nodes_start,s=e.nodes_end;n!==null;){var a=n===s?null:xs(n);n.remove(),n=a}r=!0}po(e,t&&!r),ho(e),hr(e,0),Xe(e,Xt);var l=e.transitions;if(l!==null)for(const c of l)c.stop();co(e);var u=e.parent;u!==null&&u.first!==null&&fo(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function fo(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function mt(e,t){var r=[];mo(e,r,!0),nl(r,()=>{xt(e),t&&t()})}function nl(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var s of e)s.out(n)}else t()}function mo(e,t,r){if(!(e.f&Vt)){if(e.f^=Vt,e.transitions!==null)for(const l of e.transitions)(l.is_global||r)&&t.push(l);for(var n=e.first;n!==null;){var s=n.next,a=(n.f&_r)!==0||(n.f&Ze)!==0;mo(n,t,a?r:!1),n=s}}}function Xn(e){go(e,!0)}function go(e,t){if(e.f&Vt){Jt(e)&&Ar(e),e.f^=Vt;for(var r=e.first;r!==null;){var n=r.next,s=(r.f&_r)!==0||(r.f&Ze)!==0;go(r,s?t:!1),r=n}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let Yr=!1,Yn=[];function bo(){Yr=!1;const e=Yn.slice();Yn=[],Hr(e)}function un(e){Yr||(Yr=!0,queueMicrotask(bo)),Yn.push(e)}function sl(){Yr&&bo()}function cn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}const xo=0,al=1;let Gr=!1,Ur=xo,cr=!1,dr=null,Rt=!1,As=!1;function Fs(e){Rt=e}function Gs(e){As=e}let Nt=[],Ft=0;let ce=null;function Ve(e){ce=e}let ee=null;function Le(e){ee=e}let tt=null;function ol(e){tt=e}let Ne=null,Be=0,gt=null;function il(e){gt=e}let yo=1,Kr=0,Tt=!1,te=null;function Us(e){te=e}function vo(){return++yo}function kr(){return!Yt||te!==null&&te.l===null}function Jt(e){var d;var t=e.f;if(t&bt)return!0;if(t&wr){var r=e.deps,n=(t&Pt)!==0;if(r!==null){var s,a,l=(t&Zr)!==0,u=n&&ee!==null&&!Tt,c=r.length;if(l||u){for(s=0;s<c;s++)a=r[s],(l||!((d=a==null?void 0:a.reactions)!=null&&d.includes(e)))&&(a.reactions??(a.reactions=[])).push(e);l&&(e.f^=Zr)}for(s=0;s<c;s++)if(a=r[s],Jt(a)&&lo(a),a.wv>e.wv)return!0}(!n||ee!==null&&!Tt)&&Xe(e,Ee)}return!1}function ll(e,t){for(var r=t;r!==null;){if(r.f&Hn)try{r.fn(e);return}catch{r.f^=Hn}r=r.parent}throw Gr=!1,e}function ul(e){return(e.f&Xt)===0&&(e.parent===null||(e.parent.f&Hn)===0)}function dn(e,t,r,n){if(Gr){if(r===null&&(Gr=!1),ul(t))throw e;return}r!==null&&(Gr=!0);{ll(e,t);return}}function wo(e){var f;var t=Ne,r=Be,n=gt,s=ce,a=Tt,l=tt,u=te,c=e.f;Ne=null,Be=0,gt=null,ce=c&(Ze|vr)?null:e,Tt=!Rt&&(c&Pt)!==0,tt=null,te=e.ctx,Kr++;try{var d=(0,e.fn)(),p=e.deps;if(Ne!==null){var x;if(hr(e,Be),p!==null&&Be>0)for(p.length=Be+Ne.length,x=0;x<Ne.length;x++)p[Be+x]=Ne[x];else e.deps=p=Ne;if(!Tt)for(x=Be;x<p.length;x++)((f=p[x]).reactions??(f.reactions=[])).push(e)}else p!==null&&Be<p.length&&(hr(e,Be),p.length=Be);return s!==null&&Kr++,d}finally{Ne=t,Be=r,gt=n,ce=s,Tt=a,tt=l,te=u}}function cl(e,t){let r=t.reactions;if(r!==null){var n=xi.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&t.f&He&&(Ne===null||!Ne.includes(t))&&(Xe(t,wr),t.f&(Pt|Zr)||(t.f^=Zr),hr(t,0))}function hr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)cl(e,r[n])}function Ar(e){var t=e.f;if(!(t&Xt)){Xe(e,Ee);var r=ee,n=te;ee=e;try{t&ln?rl(e):po(e),ho(e),co(e);var s=wo(e);e.teardown=typeof s=="function"?s:null,e.wv=yo;var a=e.deps,l;Wn&&Di&&e.f&bt}catch(u){dn(u,e,r,n||e.ctx)}finally{ee=r}}}function _o(){if(Ft>1e3){Ft=0;try{Oi()}catch(e){if(dr!==null)dn(e,dr,null);else throw e}}Ft++}function ko(e){var t=e.length;if(t!==0){_o();var r=Rt;Rt=!0;try{for(var n=0;n<t;n++){var s=e[n];s.f&Ee||(s.f^=Ee);var a=[];Ao(s,a),dl(a)}}finally{Rt=r}}}function dl(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if(!(n.f&(Xt|Vt)))try{Jt(n)&&(Ar(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?fo(n):n.fn=null))}catch(s){dn(s,n,null,n.ctx)}}}function hl(){if(cr=!1,Ft>1001)return;const e=Nt;Nt=[],ko(e),cr||(Ft=0,dr=null)}function hn(e){Ur===xo&&(cr||(cr=!0,queueMicrotask(hl))),dr=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(vr|Ze)){if(!(r&Ee))return;t.f^=Ee}}Nt.push(t)}function Ao(e,t){var r=e.first,n=[];e:for(;r!==null;){var s=r.f,a=(s&Ze)!==0,l=a&&(s&Ee)!==0,u=r.next;if(!l&&!(s&Vt))if(s&yr){if(a)r.f^=Ee;else try{Jt(r)&&Ar(r)}catch(x){dn(x,r,null,r.ctx)}var c=r.first;if(c!==null){r=c;continue}}else s&Ka&&n.push(r);if(u===null){let x=r.parent;for(;x!==null;){if(e===x)break e;var d=x.next;if(d!==null){r=d;continue e}x=x.parent}}r=u}for(var p=0;p<n.length;p++)c=n[p],t.push(c),Ao(c,t)}function So(e){var t=Ur,r=Nt;try{_o();const s=[];Ur=al,Nt=s,cr=!1,ko(r);var n=e==null?void 0:e();return sl(),(Nt.length>0||s.length>0)&&So(),Ft=0,dr=null,n}finally{Ur=t,Nt=r}}function H(e){var p;var t=e.f,r=(t&He)!==0;if(r&&t&Xt){var n=io(e);return ys(e),n}if(ce!==null){tt!==null&&tt.includes(e)&&Li();var s=ce.deps;e.rv<Kr&&(e.rv=Kr,Ne===null&&s!==null&&s[Be]===e?Be++:Ne===null?Ne=[e]:Ne.push(e),gt!==null&&ee!==null&&ee.f&Ee&&!(ee.f&Ze)&&gt.includes(e)&&(Xe(ee,bt),hn(ee)))}else if(r&&e.deps===null)for(var a=e,l=a.parent,u=a;l!==null;)if(l.f&He){var c=l;u=c,l=c.parent}else{var d=l;(p=d.deriveds)!=null&&p.includes(u)||(d.deriveds??(d.deriveds=[])).push(u);break}return r&&(a=e,Jt(a)&&lo(a)),e.v}function yt(e){const t=ce;try{return ce=null,e()}finally{ce=t}}const pl=-7169;function Xe(e,t){e.f=e.f&pl|t}function Gt(e){return No().get(e)}function kn(e,t){return No().set(e,t),t}function No(e){return te===null&&cn(),te.c??(te.c=new Map(fl(te)||void 0))}function fl(e){let t=e.p;for(;t!==null;){const r=t.c;if(r!==null)return r;t=t.p}return null}function Vs(e,t=1){var r=H(e),n=t===1?r++:r--;return xe(e,r),n}function vt(e,t=!1,r){te={p:te,c:null,e:null,m:!1,s:e,x:null,l:null},Yt&&!t&&(te.l={s:null,u:null,r1:[],r2:De(!1)})}function wt(e){const t=te;if(t!==null){e!==void 0&&(t.x=e);const l=t.e;if(l!==null){var r=ee,n=ce;t.e=null;try{for(var s=0;s<l.length;s++){var a=l[s];Le(a.effect),Ve(a.reaction),ws(a.fn)}}finally{Le(r),Ve(n)}}te=t.p,t.m=!0}return e||{}}function ar(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ct in e)Kn(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Ct in r&&Kn(r)}}}function Kn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Kn(e[n],t)}catch{}const r=fs(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Ya(r);for(let s in n){const a=n[s].get;if(a)try{a.call(e)}catch{}}}}}function ml(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const gl=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function bl(e){return gl.includes(e)}const xl={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function yl(e){return e=e.toLowerCase(),xl[e]??e}const vl=["touchstart","touchmove"];function wl(e){return vl.includes(e)}function _l(e,t){if(t){const r=document.body;e.autofocus=!0,un(()=>{document.activeElement===r&&e.focus()})}}function kl(e){var t=ce,r=ee;Ve(null),Le(null);try{return e()}finally{Ve(t),Le(r)}}const To=new Set,Qn=new Set;function qo(e,t,r,n){function s(a){if(n.capture||rr.call(t,a),!a.cancelBubble)return kl(()=>r.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?un(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function Al(e,t,r,n,s){var a={capture:n,passive:s},l=qo(e,t,r,a);(t===document.body||t===window||t===document)&&vs(()=>{t.removeEventListener(e,l,a)})}function Sl(e){for(var t=0;t<e.length;t++)To.add(e[t]);for(var r of Qn)r(e)}function rr(e){var k;var t=this,r=t.ownerDocument,n=e.type,s=((k=e.composedPath)==null?void 0:k.call(e))||[],a=s[0]||e.target,l=0,u=e.__root;if(u){var c=s.indexOf(u);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var d=s.indexOf(t);if(d===-1)return;c<=d&&(l=c)}if(a=s[l]||e.target,a!==t){vi(e,"currentTarget",{configurable:!0,get(){return a||r}});var p=ce,x=ee;Ve(null),Le(null);try{for(var f,v=[];a!==null;){var M=a.assignedSlot||a.parentNode||a.host||null;try{var I=a["__"+n];if(I!==void 0&&!a.disabled)if(ps(I)){var[L,...w]=I;L.apply(a,[e,...w])}else I.call(a,e)}catch(P){f?v.push(P):f=P}if(e.cancelBubble||M===t||M===null)break;a=M}if(f){for(let P of v)queueMicrotask(()=>{throw P});throw f}}finally{e.__root=t,delete e.currentTarget,Ve(p),Le(x)}}}function Mo(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function pr(e,t){var r=ee;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function Ie(e,t){var r=(t&Hi)!==0,n=(t&Zi)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=Mo(a?e:"<!>"+e),r||(s=lr(s)));var l=n?document.importNode(s,!0):s.cloneNode(!0);if(r){var u=lr(l),c=l.lastChild;pr(u,c)}else pr(l,l);return l}}function We(e=""){{var t=bs(e+"");return pr(t,t),t}}function ot(){var e=document.createDocumentFragment(),t=document.createComment(""),r=bs();return e.append(t,r),pr(t,r),e}function J(e,t){e!==null&&e.before(t)}let Jn=!0;function Qr(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function Nl(e,t){return Tl(e,t)}const Bt=new Map;function Tl(e,{target:t,anchor:r,props:n={},events:s,context:a,intro:l=!0}){Yi();var u=new Set,c=x=>{for(var f=0;f<x.length;f++){var v=x[f];if(!u.has(v)){u.add(v);var M=wl(v);t.addEventListener(v,rr,{passive:M});var I=Bt.get(v);I===void 0?(document.addEventListener(v,rr,{passive:M}),Bt.set(v,1)):Bt.set(v,I+1)}}};c(yi(To)),Qn.add(c);var d=void 0,p=tl(()=>{var x=r??t.appendChild(bs());return It(()=>{if(a){vt({});var f=te;f.c=a}s&&(n.$$events=s),Jn=l,d=e(x,n)||{},Jn=!0,a&&wt()}),()=>{var M;for(var f of u){t.removeEventListener(f,rr);var v=Bt.get(f);--v===0?(document.removeEventListener(f,rr),Bt.delete(f)):Bt.set(f,v)}Qn.delete(c),x!==r&&((M=x.parentNode)==null||M.removeChild(x))}});return ql.set(d,p),d}let ql=new WeakMap;const An=0,$r=1,Sn=2;function Ml(e,t,r,n,s){var a=e,l=kr(),u=te,c=Se,d,p,x,f=(l?De:ir)(void 0),v=(l?De:ir)(void 0),M=!1;function I(w,k){M=!0,k&&(Le(L),Ve(L),Us(u));try{w===$r&&n&&(p?Xn(p):p=It(()=>n(a,f))),w!==An&&d&&mt(d,()=>d=null),w!==$r&&p&&mt(p,()=>p=null),w!==Sn&&x&&mt(x,()=>x=null)}finally{k&&(Us(null),Ve(null),Le(null),So())}}var L=Qt(()=>{if(c!==(c=t())){if(ki(c)){var w=c;M=!1,w.then(k=>{w===c&&(Fr(f,k),I($r,!0))},k=>{if(w===c)throw Fr(v,k),I(Sn,!0),v.v}),un(()=>{M||I(An,!0)})}else Fr(f,c),I($r,!1);return()=>c=Se}})}function es(e,t,r=!1){var n=e,s=null,a=null,l=Se,u=r?_r:0,c=!1;const d=(x,f=!0)=>{c=!0,p(f,x)},p=(x,f)=>{l!==(l=x)&&(l?(s?Xn(s):f&&(s=It(()=>f(n))),a&&mt(a,()=>{a=null})):(a?Xn(a):f&&(a=It(()=>f(n))),s&&mt(s,()=>{s=null})))};Qt(()=>{c=!1,t(d),c||p(null,null)},u)}function Cl(e,t,r){var n=e,s=Se,a,l=kr()?qi:ms;Qt(()=>{l(s,s=t())&&(a&&mt(a),a=It(()=>r(n)))})}function Il(e,t,r,n,s){var a=e,l="",u;Qt(()=>{l!==(l=t()??"")&&(u!==void 0&&(xt(u),u=void 0),l!==""&&(u=It(()=>{var c=l+"",d=Mo(c);pr(lr(d),d.lastChild),a.before(d)})))})}function fr(e,t,r,n,s){var u;var a=(u=t.$$slots)==null?void 0:u[r],l=!1;a===!0&&(a=t.children,l=!0),a===void 0||a(e,l?()=>n:n)}function Ol(e,t,r){var n=e,s,a;Qt(()=>{s!==(s=t())&&(a&&(mt(a),a=null),s&&(a=It(()=>r(n,s))))},_r)}function Co(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Co(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Pl(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Co(e))&&(n&&(n+=" "),n+=t);return n}function $l(e){return typeof e=="object"?Pl(e):e??""}function El(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Ll(e,t,r,n){var s=e.__attributes??(e.__attributes={});s[t]!==(s[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Ti]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Io(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Bl(e,t,r,n,s=!1,a=!1,l=!1){var u=t||{},c=e.tagName==="OPTION";for(var d in t)d in r||(r[d]=null);r.class&&(r.class=$l(r.class));var p=Io(e),x=e.__attributes??(e.__attributes={});for(const k in r){let P=r[k];if(c&&k==="value"&&P==null){e.value=e.__value="",u[k]=P;continue}var f=u[k];if(P!==f){u[k]=P;var v=k[0]+k[1];if(v!=="$$"){if(v==="on"){const j={},F="$$"+k;let z=k.slice(2);var M=bl(z);if(ml(z)&&(z=z.slice(0,-7),j.capture=!0),!M&&f){if(P!=null)continue;e.removeEventListener(z,u[F],j),u[F]=null}if(P!=null)if(M)e[`__${z}`]=P,Sl([z]);else{let fe=function(se){u[k].call(this,se)};var w=fe;u[F]=qo(z,e,fe,j)}else M&&(e[`__${z}`]=void 0)}else if(k==="style"&&P!=null)e.style.cssText=P+"";else if(k==="autofocus")_l(e,!!P);else if(k==="__value"||k==="value"&&P!=null)e.value=e[k]=e.__value=P;else if(k==="selected"&&c)El(e,P);else{var I=k;s||(I=yl(I));var L=I==="defaultValue"||I==="defaultChecked";if(P==null&&!a&&!L)if(x[k]=null,I==="value"||I==="checked"){let j=e;if(I==="value"){let F=j.defaultValue;j.removeAttribute(I),j.defaultValue=F}else{let F=j.defaultChecked;j.removeAttribute(I),j.defaultChecked=F}}else e.removeAttribute(k);else L||p.includes(I)&&(a||typeof P!="string")?e[I]=P:typeof P!="function"&&Ll(e,I,P)}k==="style"&&"__styles"in e&&(e.__styles={})}}}return u}var Ws=new Map;function Io(e){var t=Ws.get(e.nodeName);if(t)return t;Ws.set(e.nodeName,t=[]);for(var r,n=e,s=Element.prototype;s!==n;){r=Ya(n);for(var a in r)r[a].set&&t.push(a);n=fs(n)}return t}const Dl=()=>performance.now(),it={tick:e=>requestAnimationFrame(e),now:()=>Dl(),tasks:new Set};function Oo(){const e=it.now();it.tasks.forEach(t=>{t.c(e)||(it.tasks.delete(t),t.f())}),it.tasks.size!==0&&it.tick(Oo)}function zl(e){let t;return it.tasks.size===0&&it.tick(Oo),{promise:new Promise(r=>{it.tasks.add(t={c:e,f:r})}),abort(){it.tasks.delete(t)}}}function Er(e,t){e.dispatchEvent(new CustomEvent(t))}function jl(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Hs(e){const t={},r=e.split(";");for(const n of r){const[s,a]=n.split(":");if(!s||a===void 0)break;const l=jl(s.trim());t[l]=a.trim()}return t}const Rl=e=>e;function Zs(e,t,r,n){var s=(e&Ui)!==0,a=(e&Vi)!==0,l=s&&a,u=(e&Wi)!==0,c=l?"both":s?"in":"out",d,p=t.inert,x=t.style.overflow,f,v;function M(){var P=ce,j=ee;Ve(null),Le(null);try{return d??(d=r()(t,(n==null?void 0:n())??{},{direction:c}))}finally{Ve(P),Le(j)}}var I={is_global:u,in(){var P;if(t.inert=p,!s){v==null||v.abort(),(P=v==null?void 0:v.reset)==null||P.call(v);return}a||f==null||f.abort(),Er(t,"introstart"),f=ts(t,M(),v,1,()=>{Er(t,"introend"),f==null||f.abort(),f=d=void 0,t.style.overflow=x})},out(P){if(!a){P==null||P(),d=void 0;return}t.inert=!0,Er(t,"outrostart"),v=ts(t,M(),f,0,()=>{Er(t,"outroend"),P==null||P()})},stop:()=>{f==null||f.abort(),v==null||v.abort()}},L=ee;if((L.transitions??(L.transitions=[])).push(I),s&&Jn){var w=u;if(!w){for(var k=L.parent;k&&k.f&_r;)for(;(k=k.parent)&&!(k.f&ln););w=!k||(k.f&Qa)!==0}w&&ws(()=>{yt(()=>I.in())})}}function ts(e,t,r,n,s){var a=n===1;if(zt(t)){var l,u=!1;return un(()=>{if(!u){var L=t({direction:a?"in":"out"});l=ts(e,L,r,n,s)}}),{abort:()=>{u=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return s(),{abort:je,deactivate:je,reset:je,t:()=>n};const{delay:c=0,css:d,tick:p,easing:x=Rl}=t;var f=[];if(a&&r===void 0&&(p&&p(0,1),d)){var v=Hs(d(0,1));f.push(v,v)}var M=()=>1-n,I=e.animate(f,{duration:c});return I.onfinish=()=>{var L=(r==null?void 0:r.t())??1-n;r==null||r.abort();var w=n-L,k=t.duration*Math.abs(w),P=[];if(k>0){var j=!1;if(d)for(var F=Math.ceil(k/16.666666666666668),z=0;z<=F;z+=1){var fe=L+w*x(z/F),se=Hs(d(fe,1-fe));P.push(se),j||(j=se.overflow==="hidden")}j&&(e.style.overflow="hidden"),M=()=>{var pe=I.currentTime;return L+w*x(pe/k)},p&&zl(()=>{if(I.playState!=="running")return!1;var pe=M();return p(pe,1-pe),!0})}I=e.animate(P,{duration:k,fill:"forwards"}),I.onfinish=()=>{M=()=>n,p==null||p(n,1-n),s()}},{abort:()=>{I&&(I.cancel(),I.effect=null,I.onfinish=je)},deactivate:()=>{s=je},reset:()=>{n===0&&(p==null||p(1,0))},t:()=>M()}}function Fl(e,t,r){var n=ut(e,t);n&&n.set&&(e[t]=r,vs(()=>{e[t]=null}))}function $t(e=!1){const t=te,r=t.l.u;if(!r)return;let n=()=>ar(t.s);if(e){let s=0,a={};const l=Xr(()=>{let u=!1;const c=t.s;for(const d in c)c[d]!==a[d]&&(a[d]=c[d],u=!0);return u&&s++,s});n=()=>H(l)}r.b.length&&el(()=>{Xs(t,n),Hr(r.b)}),Zn(()=>{const s=yt(()=>r.m.map(Ai));return()=>{for(const a of s)typeof a=="function"&&a()}}),r.a.length&&Zn(()=>{Xs(t,n),Hr(r.a)})}function Xs(e,t){if(e.l.s)for(const r of e.l.s)H(r);t()}function Po(e,t,r){if(e==null)return t(void 0),r&&r(void 0),je;const n=yt(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}let Lr=!1;function qt(e,t,r){const n=r[t]??(r[t]={store:null,source:ir(void 0),unsubscribe:je});if(n.store!==e)if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=je;else{var s=!0;n.unsubscribe=Po(e,a=>{s?n.source.v=a:xe(n.source,a)}),s=!1}return H(n.source)}function Ss(){const e={};return vs(()=>{for(var t in e)e[t].unsubscribe()}),e}function Gl(e){var t=Lr;try{return Lr=!1,[e(),Lr]}finally{Lr=t}}const Ul={get(e,t){if(!e.exclude.includes(t))return H(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=Ce({get[t](){return e.props[t]}},t,ro)),e.special[t](r),Vs(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Vs(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function rs(e,t){return new Proxy({props:e,exclude:t,special:{},version:De(0)},Ul)}const Vl={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(zt(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let s=e.props[n];zt(s)&&(s=s());const a=ut(s,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(zt(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const s=ut(n,t);return s&&!s.configurable&&(s.configurable=!0),s}}},has(e,t){if(t===Ct||t===eo)return!1;for(let r of e.props)if(zt(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){zt(r)&&(r=r());for(const n in r)t.includes(n)||t.push(n)}return t}};function Wl(...e){return new Proxy({props:e},Vl)}function Ys(e){for(var t=ee,r=ee;t!==null&&!(t.f&(Ze|vr));)t=t.parent;try{return Le(t),e()}finally{Le(r)}}function Ce(e,t,r,n){var fe;var s=(r&ji)!==0,a=!Yt||(r&Ri)!==0,l=(r&Fi)!==0,u=(r&Gi)!==0,c=!1,d;l?[d,c]=Gl(()=>e[t]):d=e[t];var p=Ct in e||eo in e,x=l&&(((fe=ut(e,t))==null?void 0:fe.set)??(p&&t in e&&(se=>e[t]=se)))||void 0,f=n,v=!0,M=!1,I=()=>(M=!0,v&&(v=!1,u?f=yt(n):f=n),f);d===void 0&&n!==void 0&&(x&&a&&Pi(),d=I(),x&&x(d));var L;if(a)L=()=>{var se=e[t];return se===void 0?I():(v=!0,M=!1,se)};else{var w=Ys(()=>(s?Xr:Ki)(()=>e[t]));w.f|=Si,L=()=>{var se=H(w);return se!==void 0&&(f=void 0),se===void 0?f:se}}if(!(r&ro))return L;if(x){var k=e.$$legacy;return function(se,pe){return arguments.length>0?((!a||!pe||k||c)&&x(pe?L():se),se):L()}}var P=!1,j=!1,F=ir(d),z=Ys(()=>Xr(()=>{var se=L(),pe=H(F);return P?(P=!1,j=!0,pe):(j=!1,F.v=se)}));return s||(z.equals=gs),function(se,pe){if(arguments.length>0){const Te=pe?H(z):a&&l?jt(se):se;return z.equals(Te)||(P=!0,xe(F,Te),M&&f!==void 0&&(f=Te),yt(()=>H(z))),se}return H(z)}}function $o(e){te===null&&cn(),Yt&&te.l!==null?Yl(te).m.push(e):Zn(()=>{const t=yt(e);if(typeof t=="function")return t})}function Hl(e){te===null&&cn(),$o(()=>()=>yt(e))}function Zl(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function Xl(){const e=te;return e===null&&cn(),(t,r,n)=>{var a;const s=(a=e.s.$$events)==null?void 0:a[t];if(s){const l=ps(s)?s.slice():[s],u=Zl(t,r,n);for(const c of l)c.call(e.x,u);return!u.defaultPrevented}return!0}}function Yl(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Kl="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kl);zi();const ns={},Jr={},Eo={},Lo=/^:(.+)/,Ks=4,Ql=3,Jl=2,eu=1,tu=1,mr=e=>e.replace(/(^\/+|\/+$)/g,"").split("/"),Nn=e=>e.replace(/(^\/+|\/+$)/g,""),ru=(e,t)=>{const r=e.default?0:mr(e.path).reduce((n,s)=>(n+=Ks,s===""?n+=tu:Lo.test(s)?n+=Jl:s[0]==="*"?n-=Ks+eu:n+=Ql,n),0);return{route:e,score:r,index:t}},nu=e=>e.map(ru).sort((t,r)=>t.score<r.score?1:t.score>r.score?-1:t.index-r.index),Qs=(e,t)=>{let r,n;const[s]=t.split("?"),a=mr(s),l=a[0]==="",u=nu(e);for(let c=0,d=u.length;c<d;c++){const p=u[c].route;let x=!1;if(p.default){n={route:p,params:{},uri:t};continue}const f=mr(p.path),v={},M=Math.max(a.length,f.length);let I=0;for(;I<M;I++){const L=f[I],w=a[I];if(L&&L[0]==="*"){const P=L==="*"?"*":L.slice(1);v[P]=a.slice(I).map(decodeURIComponent).join("/");break}if(typeof w>"u"){x=!0;break}const k=Lo.exec(L);if(k&&!l){const P=decodeURIComponent(w);v[k[1]]=P}else if(L!==w){x=!0;break}}if(!x){r={route:p,params:v,uri:"/"+a.slice(0,I).join("/")};break}}return r||n||null},Tn=(e,t)=>e+(t?`?${t}`:""),su=(e,t)=>{if(e.startsWith("/"))return e;const[r,n]=e.split("?"),[s]=t.split("?"),a=mr(r),l=mr(s);if(a[0]==="")return Tn(s,n);if(!a[0].startsWith(".")){const d=l.concat(a).join("/");return Tn((s==="/"?"":"/")+d,n)}const u=l.concat(a),c=[];return u.forEach(d=>{d===".."?c.pop():d!=="."&&c.push(d)}),Tn("/"+c.join("/"),n)},qn=(e,t)=>`${Nn(t==="/"?e:`${Nn(e)}/${Nn(t)}`)}/`,au=e=>!e.defaultPrevented&&e.button===0&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey),ss=()=>typeof window<"u"&&"document"in window&&"location"in window;var ou=Ie("<a><!></a>");function Ut(e,t){const r=rs(t,["children","$$slots","$$events","$$legacy"]),n=rs(r,["to","replace","state","getProps","preserveScroll"]);vt(t,!1);const s=Ss(),a=()=>qt(M,"$base",s),l=()=>qt(v,"$location",s),u=pt();let c=Ce(t,"to",8,"#"),d=Ce(t,"replace",8,!1),p=Ce(t,"state",24,()=>({})),x=Ce(t,"getProps",8,()=>({})),f=Ce(t,"preserveScroll",8,!1);const v=Gt(ns),{base:M}=Gt(Jr),{navigate:I}=Gt(Eo),L=Xl();let w=pt(),k=pt(),P=pt(),j=pt();const F=pe=>{if(L("click",pe),au(pe)){pe.preventDefault();const Te=l().pathname===H(w)||d();I(H(w),{state:p(),replace:Te,preserveScroll:f()})}};ft(()=>(ar(c()),a()),()=>{xe(w,su(c(),a().uri))}),ft(()=>(l(),H(w)),()=>{xe(k,l().pathname.startsWith(H(w)))}),ft(()=>(H(w),l()),()=>{xe(P,H(w)===l().pathname)}),ft(()=>H(P),()=>{xe(u,H(P)?"page":void 0)}),ft(()=>(ar(x()),l(),H(w),H(k),H(P),ar(n)),()=>{xe(j,x()({location:l(),href:H(w),isPartiallyCurrent:H(k),isCurrent:H(P),existingProps:n}))}),_s(),$t();var z=ou();let fe;var se=ve(z);fr(se,t,"default",{get active(){return!!H(u)}}),ur(()=>fe=Bl(z,fe,{href:H(w),"aria-current":H(u),...H(j),...n})),Al("click",z,F),J(e,z),wt()}function er(e,t){const r=rs(t,["children","$$slots","$$events","$$legacy"]);vt(t,!1);const n=Ss(),s=()=>qt(x,"$activeRoute",n);let a=Ce(t,"path",8,""),l=Ce(t,"component",12,null),u=pt({}),c=pt({});const{registerRoute:d,unregisterRoute:p,activeRoute:x}=Gt(Jr),f={path:a(),default:a()===""};d(f),Hl(()=>{p(f)}),ft(()=>(s(),ar(r),ss),()=>{if(s()&&s().route===f){xe(u,s().params);const{component:L,path:w,...k}=r;xe(c,k),L&&(L.toString().startsWith("class ")?l(L):l(L())),ss()&&!s().preserveScroll&&(window==null||window.scrollTo(0,0))}}),_s(),$t();var v=ot(),M=$e(v);{var I=L=>{var w=ot(),k=$e(w);{var P=F=>{var z=ot(),fe=$e(z);Ml(fe,l,null,(se,pe)=>{var Te=ot(),Y=$e(Te);Ol(Y,()=>{var de;return((de=H(pe))==null?void 0:de.default)||H(pe)},(de,ke)=>{ke(de,Wl(()=>H(u),()=>H(c)))}),J(se,Te)}),J(F,z)},j=F=>{var z=ot(),fe=$e(z);fr(fe,t,"default",{get params(){return H(u)}}),J(F,z)};es(k,F=>{l()?F(P):F(j,!1)})}J(L,w)};es(M,L=>{s()&&s().route===f&&L(I)})}J(e,v),wt()}const Dt=[];function iu(e,t){return{subscribe:nr(e,t).subscribe}}function nr(e,t=je){let r=null;const n=new Set;function s(u){if(ms(e,u)&&(e=u,r)){const c=!Dt.length;for(const d of n)d[1](),Dt.push(d,e);if(c){for(let d=0;d<Dt.length;d+=2)Dt[d][0](Dt[d+1]);Dt.length=0}}}function a(u){s(u(e))}function l(u,c=je){const d=[u,c];return n.add(d),n.size===1&&(r=t(s,a)||je),u(e),()=>{n.delete(d),n.size===0&&r&&(r(),r=null)}}return{set:s,update:a,subscribe:l}}function lu(e,t,r){const n=!Array.isArray(e),s=n?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return iu(r,(l,u)=>{let c=!1;const d=[];let p=0,x=je;const f=()=>{if(p)return;x();const M=t(n?d[0]:d,l,u);a?l(M):x=typeof M=="function"?M:je},v=s.map((M,I)=>Po(M,L=>{d[I]=L,p&=~(1<<I),c&&f()},()=>{p|=1<<I}));return c=!0,f(),function(){Hr(v),x(),c=!1}})}const Mn=e=>({...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}),uu=e=>{const t=[];let r=Mn(e);return{get location(){return r},listen(n){t.push(n);const s=()=>{r=Mn(e),n({location:r,action:"POP"})};return e.addEventListener("popstate",s),()=>{e.removeEventListener("popstate",s);const a=t.indexOf(n);t.splice(a,1)}},navigate(n,{state:s,replace:a=!1,preserveScroll:l=!1,blurActiveElement:u=!0}={}){s={...s,key:Date.now()+""};try{a?e.history.replaceState(s,"",n):e.history.pushState(s,"",n)}catch{e.location[a?"replace":"assign"](n)}r=Mn(e),t.forEach(c=>c({location:r,action:"PUSH",preserveScroll:l})),u&&document.activeElement.blur()}}},cu=(e="/")=>{let t=0;const r=[{pathname:e,search:""}],n=[];return{get location(){return r[t]},addEventListener(s,a){},removeEventListener(s,a){},history:{get entries(){return r},get index(){return t},get state(){return n[t]},pushState(s,a,l){const[u,c=""]=l.split("?");t++,r.push({pathname:u,search:c}),n.push(s)},replaceState(s,a,l){const[u,c=""]=l.split("?");r[t]={pathname:u,search:c},n[t]=s}}}},du=uu(ss()?window:cu());var hu=Ie("<div><!></div>");function pu(e,t){vt(t,!1);const r=Ss(),n=()=>qt(k,"$base",r),s=()=>qt(w,"$location",r),a=()=>qt(M,"$routes",r),l=()=>qt(I,"$activeRoute",r);let u=Ce(t,"basepath",8,"/"),c=Ce(t,"url",8,null),d=Ce(t,"viewtransition",8,null),p=Ce(t,"history",8,du);const x=(Y,de,ke)=>{const Ae=d()(ke);return typeof(Ae==null?void 0:Ae.fn)=="function"?Ae.fn(Y,Ae):Ae};kn(Eo,p());const f=Gt(ns),v=Gt(Jr),M=nr([]),I=nr(null);let L=!1;const w=f||nr(c()?{pathname:c()}:p().location),k=v?v.routerBase:nr({path:u(),uri:u()}),P=lu([k,I],([Y,de])=>{if(!de)return Y;const{path:ke}=Y,{route:Ae,uri:st}=de;return{path:Ae.default?ke:Ae.path.replace(/\*.*$/,""),uri:st}}),j=Y=>{const{path:de}=n();let{path:ke}=Y;if(Y._path=ke,Y.path=qn(de,ke),typeof window>"u"){if(L)return;const Ae=Qs([Y],s().pathname);Ae&&(I.set(Ae),L=!0)}else M.update(Ae=>[...Ae,Y])},F=Y=>{M.update(de=>de.filter(ke=>ke!==Y))};let z=pt(!1);f||($o(()=>p().listen(de=>{xe(z,de.preserveScroll||!1),w.set(de.location)})),kn(ns,w)),kn(Jr,{activeRoute:I,base:k,routerBase:P,registerRoute:j,unregisterRoute:F}),ft(()=>(n(),qn),()=>{const{path:Y}=n();M.update(de=>de.map(ke=>Object.assign(ke,{path:qn(Y,ke._path)})))}),ft(()=>(a(),s(),H(z)),()=>{const Y=Qs(a(),s().pathname);I.set(Y&&{...Y,preserveScroll:H(z)})}),_s(),$t();var fe=ot(),se=$e(fe);{var pe=Y=>{var de=ot(),ke=$e(de);Cl(ke,()=>s().pathname,Ae=>{var st=hu(),Ir=ve(st);fr(Ir,t,"default",{get route(){return l()&&l().uri},get location(){return s()}}),Zs(1,st,()=>x),Zs(2,st,()=>x),J(Ae,st)}),J(Y,de)},Te=Y=>{var de=ot(),ke=$e(de);fr(ke,t,"default",{get route(){return l()&&l().uri},get location(){return s()}}),J(Y,de)};es(se,Y=>{d()?Y(pe):Y(Te,!1)})}J(e,fe),wt()}var fu=Ie(`<h1 style="margin-bottom: 0em;">Beckett Lee-Messer</h1> <p class="centeralign"><em>Student at Vassar College studying Computer Science and Physics,<br> Software enthusiast and developer-in-training,<br> Occasional photographer,<br> Full-time musical instrument practice-er.</em></p> <p class="centeralign">Welcome to my page.</p> <hr> <p class="centeralign">This site is a work in progress, and represents my attempt to document my
    learning and projects, as well as establish an online presence. At the
    moment, the most interesting page is probably the <!> section, where you can find my CV. As I continue writing up my projects, I'll
    add them to the <!> section.</p>`,1);function mu(e){var t=fu(),r=ie($e(t),8),n=ie(ve(r));Ut(n,{to:"/about",children:(a,l)=>{var u=We("about");J(a,u)},$$slots:{default:!0}});var s=ie(n,2);Ut(s,{to:"/blog",children:(a,l)=>{var u=We("blog");J(a,u)},$$slots:{default:!0}}),J(e,t)}var gu=Ie('<div class="tab"><p><!></p></div>');function et(e,t){var r=gu(),n=ve(r),s=ve(n);fr(s,t,"default",{}),J(e,r)}var bu=Ie('<article><h1>About Me</h1> <p><em>Updated January 11, 2025</em></p> <h2>Quick Links</h2> <blockquote>CV: <a download="bleemesser-cv.pdf" href="/bleemesser-cv.pdf" target="_blank">bleemesser-cv.pdf</a><br> Email: <a href="mailto:bleemesser@vassar.edu">bleemesser@vassar.edu</a><br> GitHub: <a href="https://github.com/bleemesser" target="_blank">@bleemesser</a><br></blockquote> <h2>Introduction</h2> <!> <!></article>');function xu(e){var t=bu(),r=ie(ve(t),10);et(r,{children:(s,a)=>{var l=We(`Hi, I'm Beckett. I grew up in the San Francisco Bay Area and, by way of
        The Nueva School, am now a first-year student at Vassar College in
        Poughkeepsie, New York. As a kid, I loved to tinker—taking things apart
        (and usually putting them back together) or building new contraptions
        from scratch. I started by making robots out of Legos and other toys,
        and in middle school, I assembled my first computer. While building
        electronics was fun, I eventually realized that what really interested
        me was learning how to control them. That curiosity led me to
        programming, which I've been doing ever since. I enjoy studying
        physics and a bit of math as well.`);J(s,l)},$$slots:{default:!0}});var n=ie(r,2);et(n,{}),J(e,t)}var yu=Ie('<div><hr> <h4 class="centeralign"><!></h4> <p class="centeralign"><em> </em></p></div>');function vu(e,t){vt(t,!1);let r=Ce(t,"post",8);$t();var n=yu(),s=ie(ve(n),2),a=ve(s);Ut(a,{get to(){return`/blog/${r().number??""}`},children:(d,p)=>{var x=We();ur(()=>Qr(x,r().title)),J(d,x)},$$slots:{default:!0}});var l=ie(s,2),u=ve(l),c=ve(u);ur(()=>Qr(c,r().date.toDateString())),J(e,n),wt()}var wu=Ie("<article><h1>Latest Posts</h1> <p><em>Updated January 12, 2025</em></p> <!></article>");function _u(e,t){vt(t,!1),$t();var r=wu(),n=ie(ve(r),4);vu(n,{post:{title:"Image Compression With Autoencoders",date:new Date(2025,0,12),number:"1"}}),J(e,r),wt()}var ku=Ie(`<article><h1> </h1> <p><em> </em></p> <h2>Introduction</h2> <p>Modern web development has evolved significantly over the past decade.
        With the advent of powerful frameworks and tools, developers now have
        more <a href=".">options</a> than ever to create compelling web experiences.</p> <h3>The Role of JavaScript Frameworks</h3> <p>One of the most significant changes in web development has been the rise
        of JavaScript frameworks. <code>Vue</code> is the first. Let's look at some
        code:</p> <pre><code></code></pre> <h3>Key Concepts</h3> <ul><li><strong>Component-Based Architecture:</strong> Modern frameworks emphasize
            building applications as collections of reusable components.</li> <li><strong>State Management:</strong> Understanding how to manage application
            state effectively is crucial for building scalable applications.</li> <li><strong>Performance Optimization:</strong> Modern web development requires
            careful consideration of performance implications.</li></ul> <blockquote>"The best way to predict the future is to implement it." — David
        Heinemeier Hansson</blockquote> <h2>Advanced Topics</h2> <p>Let's explore some advanced concepts in modern web development through a
        simple comparison:</p> <table><thead><tr><th>Approach</th><th>Pros</th><th>Cons</th></tr></thead><tbody><tr><td>Traditional</td><td>Simple to understand</td><td>Limited scalability</td></tr><tr><td>Modern</td><td>Highly scalable</td><td>Steeper learning curve</td></tr></tbody></table> <hr> <p><em>This article is part of our ongoing series about modern web
            development. Check out our other articles for more insights.</em></p></article>`);function Au(e,t){vt(t,!1);const r={title:"Understanding Modern Web Development",date:new Date(2025,0,10)};$t();var n=ku(),s=ve(n),a=ve(s),l=ie(s,2),u=ve(l),c=ve(u);ur(()=>Qr(c,r.date.toDateString()));var d=ie(l,10),p=ve(d);return p.textContent=`
        
        import { createApp } from 'vue';
        import App from './App.vue';
        
        createApp(App).mount('#app');
        
    `,ur(()=>Qr(a,r.title)),J(e,n),Fl(t,"post",r),wt({post:r})}class O{constructor(t,r){let n=" "+t,s;const a=r&&r.loc;if(a&&a.start<=a.end){const u=a.lexer.input;s=a.start;const c=a.end;s===u.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";const d=u.slice(s,c).replace(/[^]/g,"$&̲");let p;s>15?p="…"+u.slice(s-15,s):p=u.slice(0,s);let x;c+15<u.length?x=u.slice(c,c+15)+"…":x=u.slice(c),n+=p+d+x}const l=new Error(n);return l.name="ParseError",l.__proto__=O.prototype,l.position=s,l}}O.prototype.__proto__=Error.prototype;const Su=function(e,t){return e===void 0?t:e},Nu=/([A-Z])/g,Tu=function(e){return e.replace(Nu,"-$1").toLowerCase()},qu={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Mu=/[&><"']/g;function Cu(e){return String(e).replace(Mu,t=>qu[t])}const en=function(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?en(e.body[0]):e:e.type==="font"?en(e.body):e},Iu=function(e){const t=en(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},Ou=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Pu=function(e){const t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},$u=function(e){return+e.toFixed(4)};var ae={deflt:Su,escape:Cu,hyphenate:Tu,getBaseElem:en,isCharacterBox:Iu,protocolFromUrl:Pu,round:$u};class Ns{constructor(t){t=t||{},this.displayMode=ae.deflt(t.displayMode,!1),this.annotate=ae.deflt(t.annotate,!1),this.leqno=ae.deflt(t.leqno,!1),this.throwOnError=ae.deflt(t.throwOnError,!1),this.errorColor=ae.deflt(t.errorColor,"#b22222"),this.macros=t.macros||{},this.wrap=ae.deflt(t.wrap,"tex"),this.xml=ae.deflt(t.xml,!1),this.colorIsTextColor=ae.deflt(t.colorIsTextColor,!1),this.strict=ae.deflt(t.strict,!1),this.trust=ae.deflt(t.trust,!1),this.maxSize=t.maxSize===void 0?[1/0,1/0]:Array.isArray(t.maxSize)?t.maxSize:[1/0,1/0],this.maxExpand=Math.max(0,ae.deflt(t.maxExpand,1e3))}isTrusted(t){if(t.url&&!t.protocol){const r=ae.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}return!!(typeof this.trust=="function"?this.trust(t):this.trust)}}const Bo={},tn={};function B({type:e,names:t,props:r,handler:n,mathmlBuilder:s}){const a={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:n};for(let l=0;l<t.length;++l)Bo[t[l]]=a;e&&s&&(tn[e]=s)}function Et({type:e,mathmlBuilder:t}){B({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},mathmlBuilder:t})}const gr=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ge=function(e){return e.type==="ordgroup"?e.body:[e]};class Ts{constructor(t){this.children=t,this.classes=[],this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){const t=document.createDocumentFragment();for(let r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){let t="";for(let r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){const t=r=>r.toText();return this.children.map(t).join("")}}const rn=function(e){return e.filter(t=>t).join(" ")},Eu=function(e,t){this.classes=e||[],this.attributes={},this.style=t||{}},Lu=function(e){const t=document.createElement(e);t.className=rn(this.classes);for(const r in this.style)Object.prototype.hasOwnProperty.call(this.style,r)&&(t.style[r]=this.style[r]);for(const r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);for(let r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t},Bu=function(e){let t=`<${e}`;this.classes.length&&(t+=` class="${ae.escape(rn(this.classes))}"`);let r="";for(const n in this.style)Object.prototype.hasOwnProperty.call(this.style,n)&&(r+=`${ae.hyphenate(n)}:${this.style[n]};`);r&&(t+=` style="${r}"`);for(const n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=` ${n}="${ae.escape(this.attributes[n])}"`);t+=">";for(let n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+=`</${e}>`,t};class Do{constructor(t,r,n){Eu.call(this,t,n),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}toNode(){return Lu.call(this,"span")}toMarkup(){return Bu.call(this,"span")}}let Du=class{constructor(e){this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return ae.escape(this.text)}};class zu{constructor(t,r,n){this.alt=r,this.src=t,this.classes=["mord"],this.style=n}hasClass(t){return this.classes.includes(t)}toNode(){const t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(const r in this.style)Object.prototype.hasOwnProperty.call(this.style,r)&&(t.style[r]=this.style[r]);return t}toMarkup(){let t=`<img src='${this.src}' alt='${this.alt}'`,r="";for(const n in this.style)Object.prototype.hasOwnProperty.call(this.style,n)&&(r+=`${ae.hyphenate(n)}:${this.style[n]};`);return r&&(t+=` style="${ae.escape(r)}"`),t+=">",t}}function ju(e){return new Ts(e)}class Me{constructor(t,r,n,s){this.type=t,this.attributes={},this.children=r||[],this.classes=n||[],this.style=s||{}}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){const t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=rn(this.classes));for(const r in this.style)Object.prototype.hasOwnProperty.call(this.style,r)&&(t.style[r]=this.style[r]);for(let r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){let t="<"+this.type;for(const n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="',t+=ae.escape(this.attributes[n]),t+='"');this.classes.length>0&&(t+=` class="${ae.escape(rn(this.classes))}"`);let r="";for(const n in this.style)Object.prototype.hasOwnProperty.call(this.style,n)&&(r+=`${ae.hyphenate(n)}:${this.style[n]};`);r&&(t+=` style="${r}"`),t+=">";for(let n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class zo{constructor(t){this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return ae.escape(this.toText())}toText(){return this.text}}const qs=e=>{let t;return e.length===1&&e[0].type==="mrow"?(t=e.pop(),t.type="mstyle"):t=new Me("mstyle",e),t};var _={MathNode:Me,TextNode:zo,newDocumentFragment:ju};const sr=e=>{let t=0;if(e.body)for(const r of e.body)t+=sr(r);else if(e.type==="supsub")t+=sr(e.base),e.sub&&(t+=.7*sr(e.sub)),e.sup&&(t+=.7*sr(e.sup));else if(e.type==="mathord"||e.type==="textord")for(const r of e.text.split("")){const n=r.codePointAt(0);96<n&&n<123||944<n&&n<970?t+=.56:47<n&&n<58?t+=.5:t+=.92}else t+=1;return t},Ru={widehat:"^",widecheck:"ˇ",widetilde:"~",wideparen:"⏜",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",overparen:"⏜",undergroup:"⏡",underparen:"⏝",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xrightleftarrows:"⇄",yields:"→",yieldsLeft:"←",mesomerism:"↔",longrightharpoonup:"⇀",longleftharpoondown:"↽",eqrightharpoonup:"⇀",eqleftharpoondown:"↽","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},jo=function(e){const t=new _.TextNode(Ru[e.slice(1)]),r=new _.MathNode("mo",[t]);return r.setAttribute("stretchy","true"),r},Fu=["\\widetilde","\\widehat","\\widecheck","\\utilde"],Gu=e=>{const t=jo(e.label);if(Fu.includes(e.label)){const r=sr(e.base);1<r&&r<1.6?t.classes.push("tml-crooked-2"):1.6<=r&&r<2.5?t.classes.push("tml-crooked-3"):2.5<=r&&t.classes.push("tml-crooked-4")}return t};var pn={mathMLnode:jo,accentNode:Gu};const Uu={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Vu={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},we={math:{},text:{}};function o(e,t,r,n,s){we[e][n]={group:t,replace:r},s&&r&&(we[e][r]=we[e][n])}const i="math",T="text",Q="accent-token",A="bin",be="close",Lt="inner",E="mathord",Z="op-token",_e="open",Sr="punct",m="rel",ct="spacing",b="textord";o(i,m,"≡","\\equiv",!0);o(i,m,"≺","\\prec",!0);o(i,m,"≻","\\succ",!0);o(i,m,"∼","\\sim",!0);o(i,m,"⟂","\\perp",!0);o(i,m,"⪯","\\preceq",!0);o(i,m,"⪰","\\succeq",!0);o(i,m,"≃","\\simeq",!0);o(i,m,"≌","\\backcong",!0);o(i,m,"|","\\mid",!0);o(i,m,"≪","\\ll",!0);o(i,m,"≫","\\gg",!0);o(i,m,"≍","\\asymp",!0);o(i,m,"∥","\\parallel");o(i,m,"⌣","\\smile",!0);o(i,m,"⊑","\\sqsubseteq",!0);o(i,m,"⊒","\\sqsupseteq",!0);o(i,m,"≐","\\doteq",!0);o(i,m,"⌢","\\frown",!0);o(i,m,"∋","\\ni",!0);o(i,m,"∌","\\notni",!0);o(i,m,"∝","\\propto",!0);o(i,m,"⊢","\\vdash",!0);o(i,m,"⊣","\\dashv",!0);o(i,m,"∋","\\owns");o(i,m,"≘","\\arceq",!0);o(i,m,"≙","\\wedgeq",!0);o(i,m,"≚","\\veeeq",!0);o(i,m,"≛","\\stareq",!0);o(i,m,"≝","\\eqdef",!0);o(i,m,"≞","\\measeq",!0);o(i,m,"≟","\\questeq",!0);o(i,m,"≠","\\ne",!0);o(i,m,"≠","\\neq");o(i,m,"⩵","\\eqeq",!0);o(i,m,"⩶","\\eqeqeq",!0);o(i,m,"∷","\\dblcolon",!0);o(i,m,"≔","\\coloneqq",!0);o(i,m,"≕","\\eqqcolon",!0);o(i,m,"∹","\\eqcolon",!0);o(i,m,"⩴","\\Coloneqq",!0);o(i,Sr,".","\\ldotp");o(i,Sr,"·","\\cdotp");o(i,b,"#","\\#");o(T,b,"#","\\#");o(i,b,"&","\\&");o(T,b,"&","\\&");o(i,b,"ℵ","\\aleph",!0);o(i,b,"∀","\\forall",!0);o(i,b,"ℏ","\\hbar",!0);o(i,b,"∃","\\exists",!0);o(i,A,"∇","\\nabla",!0);o(i,b,"♭","\\flat",!0);o(i,b,"ℓ","\\ell",!0);o(i,b,"♮","\\natural",!0);o(i,b,"Å","\\Angstrom",!0);o(T,b,"Å","\\Angstrom",!0);o(i,b,"♣","\\clubsuit",!0);o(i,b,"♧","\\varclubsuit",!0);o(i,b,"℘","\\wp",!0);o(i,b,"♯","\\sharp",!0);o(i,b,"♢","\\diamondsuit",!0);o(i,b,"♦","\\vardiamondsuit",!0);o(i,b,"ℜ","\\Re",!0);o(i,b,"♡","\\heartsuit",!0);o(i,b,"♥","\\varheartsuit",!0);o(i,b,"ℑ","\\Im",!0);o(i,b,"♠","\\spadesuit",!0);o(i,b,"♤","\\varspadesuit",!0);o(i,b,"♀","\\female",!0);o(i,b,"♂","\\male",!0);o(i,b,"§","\\S",!0);o(T,b,"§","\\S");o(i,b,"¶","\\P",!0);o(T,b,"¶","\\P");o(T,b,"☺","\\smiley",!0);o(i,b,"☺","\\smiley",!0);o(i,b,"†","\\dag");o(T,b,"†","\\dag");o(T,b,"†","\\textdagger");o(i,b,"‡","\\ddag");o(T,b,"‡","\\ddag");o(T,b,"‡","\\textdaggerdbl");o(i,be,"⎱","\\rmoustache",!0);o(i,_e,"⎰","\\lmoustache",!0);o(i,be,"⟯","\\rgroup",!0);o(i,_e,"⟮","\\lgroup",!0);o(i,A,"∓","\\mp",!0);o(i,A,"⊖","\\ominus",!0);o(i,A,"⊎","\\uplus",!0);o(i,A,"⊓","\\sqcap",!0);o(i,A,"∗","\\ast");o(i,A,"⊔","\\sqcup",!0);o(i,A,"◯","\\bigcirc",!0);o(i,A,"∙","\\bullet",!0);o(i,A,"‡","\\ddagger");o(i,A,"≀","\\wr",!0);o(i,A,"⨿","\\amalg");o(i,A,"&","\\And");o(i,A,"⫽","\\sslash",!0);o(i,m,"⟵","\\longleftarrow",!0);o(i,m,"⇐","\\Leftarrow",!0);o(i,m,"⟸","\\Longleftarrow",!0);o(i,m,"⟶","\\longrightarrow",!0);o(i,m,"⇒","\\Rightarrow",!0);o(i,m,"⟹","\\Longrightarrow",!0);o(i,m,"↔","\\leftrightarrow",!0);o(i,m,"⟷","\\longleftrightarrow",!0);o(i,m,"⇔","\\Leftrightarrow",!0);o(i,m,"⟺","\\Longleftrightarrow",!0);o(i,m,"↤","\\mapsfrom",!0);o(i,m,"↦","\\mapsto",!0);o(i,m,"⟼","\\longmapsto",!0);o(i,m,"↗","\\nearrow",!0);o(i,m,"↩","\\hookleftarrow",!0);o(i,m,"↪","\\hookrightarrow",!0);o(i,m,"↘","\\searrow",!0);o(i,m,"↼","\\leftharpoonup",!0);o(i,m,"⇀","\\rightharpoonup",!0);o(i,m,"↙","\\swarrow",!0);o(i,m,"↽","\\leftharpoondown",!0);o(i,m,"⇁","\\rightharpoondown",!0);o(i,m,"↖","\\nwarrow",!0);o(i,m,"⇌","\\rightleftharpoons",!0);o(i,E,"↯","\\lightning",!0);o(i,E,"∎","\\QED",!0);o(i,E,"‰","\\permil",!0);o(T,b,"‰","\\permil");o(i,E,"☉","\\astrosun",!0);o(i,E,"☼","\\sun",!0);o(i,E,"☾","\\leftmoon",!0);o(i,E,"☽","\\rightmoon",!0);o(i,E,"⊕","\\Earth");o(i,m,"≮","\\nless",!0);o(i,m,"⪇","\\lneq",!0);o(i,m,"≨","\\lneqq",!0);o(i,m,"≨︀","\\lvertneqq");o(i,m,"⋦","\\lnsim",!0);o(i,m,"⪉","\\lnapprox",!0);o(i,m,"⊀","\\nprec",!0);o(i,m,"⋠","\\npreceq",!0);o(i,m,"⋨","\\precnsim",!0);o(i,m,"⪹","\\precnapprox",!0);o(i,m,"≁","\\nsim",!0);o(i,m,"∤","\\nmid",!0);o(i,m,"∤","\\nshortmid");o(i,m,"⊬","\\nvdash",!0);o(i,m,"⊭","\\nvDash",!0);o(i,m,"⋪","\\ntriangleleft");o(i,m,"⋬","\\ntrianglelefteq",!0);o(i,m,"⊄","\\nsubset",!0);o(i,m,"⊅","\\nsupset",!0);o(i,m,"⊊","\\subsetneq",!0);o(i,m,"⊊︀","\\varsubsetneq");o(i,m,"⫋","\\subsetneqq",!0);o(i,m,"⫋︀","\\varsubsetneqq");o(i,m,"≯","\\ngtr",!0);o(i,m,"⪈","\\gneq",!0);o(i,m,"≩","\\gneqq",!0);o(i,m,"≩︀","\\gvertneqq");o(i,m,"⋧","\\gnsim",!0);o(i,m,"⪊","\\gnapprox",!0);o(i,m,"⊁","\\nsucc",!0);o(i,m,"⋡","\\nsucceq",!0);o(i,m,"⋩","\\succnsim",!0);o(i,m,"⪺","\\succnapprox",!0);o(i,m,"≆","\\ncong",!0);o(i,m,"∦","\\nparallel",!0);o(i,m,"∦","\\nshortparallel");o(i,m,"⊯","\\nVDash",!0);o(i,m,"⋫","\\ntriangleright");o(i,m,"⋭","\\ntrianglerighteq",!0);o(i,m,"⊋","\\supsetneq",!0);o(i,m,"⊋","\\varsupsetneq");o(i,m,"⫌","\\supsetneqq",!0);o(i,m,"⫌︀","\\varsupsetneqq");o(i,m,"⊮","\\nVdash",!0);o(i,m,"⪵","\\precneqq",!0);o(i,m,"⪶","\\succneqq",!0);o(i,A,"⊴","\\unlhd");o(i,A,"⊵","\\unrhd");o(i,m,"↚","\\nleftarrow",!0);o(i,m,"↛","\\nrightarrow",!0);o(i,m,"⇍","\\nLeftarrow",!0);o(i,m,"⇏","\\nRightarrow",!0);o(i,m,"↮","\\nleftrightarrow",!0);o(i,m,"⇎","\\nLeftrightarrow",!0);o(i,m,"△","\\vartriangle");o(i,b,"ℏ","\\hslash");o(i,b,"▽","\\triangledown");o(i,b,"◊","\\lozenge");o(i,b,"Ⓢ","\\circledS");o(i,b,"®","\\circledR",!0);o(T,b,"®","\\circledR");o(T,b,"®","\\textregistered");o(i,b,"∡","\\measuredangle",!0);o(i,b,"∄","\\nexists");o(i,b,"℧","\\mho");o(i,b,"Ⅎ","\\Finv",!0);o(i,b,"⅁","\\Game",!0);o(i,b,"‵","\\backprime");o(i,b,"‶","\\backdprime");o(i,b,"‷","\\backtrprime");o(i,b,"▲","\\blacktriangle");o(i,b,"▼","\\blacktriangledown");o(i,b,"■","\\blacksquare");o(i,b,"⧫","\\blacklozenge");o(i,b,"★","\\bigstar");o(i,b,"∢","\\sphericalangle",!0);o(i,b,"∁","\\complement",!0);o(i,b,"ð","\\eth",!0);o(T,b,"ð","ð");o(i,b,"╱","\\diagup");o(i,b,"╲","\\diagdown");o(i,b,"□","\\square");o(i,b,"□","\\Box");o(i,b,"◊","\\Diamond");o(i,b,"¥","\\yen",!0);o(T,b,"¥","\\yen",!0);o(i,b,"✓","\\checkmark",!0);o(T,b,"✓","\\checkmark");o(i,b,"✗","\\ballotx",!0);o(T,b,"✗","\\ballotx");o(T,b,"•","\\textbullet");o(i,b,"ℶ","\\beth",!0);o(i,b,"ℸ","\\daleth",!0);o(i,b,"ℷ","\\gimel",!0);o(i,b,"ϝ","\\digamma",!0);o(i,b,"ϰ","\\varkappa");o(i,_e,"⌜","\\ulcorner",!0);o(i,be,"⌝","\\urcorner",!0);o(i,_e,"⌞","\\llcorner",!0);o(i,be,"⌟","\\lrcorner",!0);o(i,m,"≦","\\leqq",!0);o(i,m,"⩽","\\leqslant",!0);o(i,m,"⪕","\\eqslantless",!0);o(i,m,"≲","\\lesssim",!0);o(i,m,"⪅","\\lessapprox",!0);o(i,m,"≊","\\approxeq",!0);o(i,A,"⋖","\\lessdot");o(i,m,"⋘","\\lll",!0);o(i,m,"≶","\\lessgtr",!0);o(i,m,"⋚","\\lesseqgtr",!0);o(i,m,"⪋","\\lesseqqgtr",!0);o(i,m,"≑","\\doteqdot");o(i,m,"≓","\\risingdotseq",!0);o(i,m,"≒","\\fallingdotseq",!0);o(i,m,"∽","\\backsim",!0);o(i,m,"⋍","\\backsimeq",!0);o(i,m,"⫅","\\subseteqq",!0);o(i,m,"⋐","\\Subset",!0);o(i,m,"⊏","\\sqsubset",!0);o(i,m,"≼","\\preccurlyeq",!0);o(i,m,"⋞","\\curlyeqprec",!0);o(i,m,"≾","\\precsim",!0);o(i,m,"⪷","\\precapprox",!0);o(i,m,"⊲","\\vartriangleleft");o(i,m,"⊴","\\trianglelefteq");o(i,m,"⊨","\\vDash",!0);o(i,m,"⊫","\\VDash",!0);o(i,m,"⊪","\\Vvdash",!0);o(i,m,"⌣","\\smallsmile");o(i,m,"⌢","\\smallfrown");o(i,m,"≏","\\bumpeq",!0);o(i,m,"≎","\\Bumpeq",!0);o(i,m,"≧","\\geqq",!0);o(i,m,"⩾","\\geqslant",!0);o(i,m,"⪖","\\eqslantgtr",!0);o(i,m,"≳","\\gtrsim",!0);o(i,m,"⪆","\\gtrapprox",!0);o(i,A,"⋗","\\gtrdot");o(i,m,"⋙","\\ggg",!0);o(i,m,"≷","\\gtrless",!0);o(i,m,"⋛","\\gtreqless",!0);o(i,m,"⪌","\\gtreqqless",!0);o(i,m,"≖","\\eqcirc",!0);o(i,m,"≗","\\circeq",!0);o(i,m,"≜","\\triangleq",!0);o(i,m,"∼","\\thicksim");o(i,m,"≈","\\thickapprox");o(i,m,"⫆","\\supseteqq",!0);o(i,m,"⋑","\\Supset",!0);o(i,m,"⊐","\\sqsupset",!0);o(i,m,"≽","\\succcurlyeq",!0);o(i,m,"⋟","\\curlyeqsucc",!0);o(i,m,"≿","\\succsim",!0);o(i,m,"⪸","\\succapprox",!0);o(i,m,"⊳","\\vartriangleright");o(i,m,"⊵","\\trianglerighteq");o(i,m,"⊩","\\Vdash",!0);o(i,m,"∣","\\shortmid");o(i,m,"∥","\\shortparallel");o(i,m,"≬","\\between",!0);o(i,m,"⋔","\\pitchfork",!0);o(i,m,"∝","\\varpropto");o(i,m,"◀","\\blacktriangleleft");o(i,m,"∴","\\therefore",!0);o(i,m,"∍","\\backepsilon");o(i,m,"▶","\\blacktriangleright");o(i,m,"∵","\\because",!0);o(i,m,"⋘","\\llless");o(i,m,"⋙","\\gggtr");o(i,A,"⊲","\\lhd");o(i,A,"⊳","\\rhd");o(i,m,"≂","\\eqsim",!0);o(i,m,"≑","\\Doteq",!0);o(i,m,"⥽","\\strictif",!0);o(i,m,"⥼","\\strictfi",!0);o(i,A,"∔","\\dotplus",!0);o(i,A,"∖","\\smallsetminus");o(i,A,"⋒","\\Cap",!0);o(i,A,"⋓","\\Cup",!0);o(i,A,"⩞","\\doublebarwedge",!0);o(i,A,"⊟","\\boxminus",!0);o(i,A,"⊞","\\boxplus",!0);o(i,A,"⧄","\\boxslash",!0);o(i,A,"⋇","\\divideontimes",!0);o(i,A,"⋉","\\ltimes",!0);o(i,A,"⋊","\\rtimes",!0);o(i,A,"⋋","\\leftthreetimes",!0);o(i,A,"⋌","\\rightthreetimes",!0);o(i,A,"⋏","\\curlywedge",!0);o(i,A,"⋎","\\curlyvee",!0);o(i,A,"⊝","\\circleddash",!0);o(i,A,"⊛","\\circledast",!0);o(i,A,"⊺","\\intercal",!0);o(i,A,"⋒","\\doublecap");o(i,A,"⋓","\\doublecup");o(i,A,"⊠","\\boxtimes",!0);o(i,A,"⋈","\\bowtie",!0);o(i,A,"⋈","\\Join");o(i,A,"⟕","\\leftouterjoin",!0);o(i,A,"⟖","\\rightouterjoin",!0);o(i,A,"⟗","\\fullouterjoin",!0);o(i,A,"∸","\\dotminus",!0);o(i,A,"⟑","\\wedgedot",!0);o(i,A,"⟇","\\veedot",!0);o(i,A,"⩢","\\doublebarvee",!0);o(i,A,"⩣","\\veedoublebar",!0);o(i,A,"⩟","\\wedgebar",!0);o(i,A,"⩠","\\wedgedoublebar",!0);o(i,A,"⩔","\\Vee",!0);o(i,A,"⩓","\\Wedge",!0);o(i,A,"⩃","\\barcap",!0);o(i,A,"⩂","\\barcup",!0);o(i,A,"⩈","\\capbarcup",!0);o(i,A,"⩀","\\capdot",!0);o(i,A,"⩇","\\capovercup",!0);o(i,A,"⩆","\\cupovercap",!0);o(i,A,"⩍","\\closedvarcap",!0);o(i,A,"⩌","\\closedvarcup",!0);o(i,A,"⨪","\\minusdot",!0);o(i,A,"⨫","\\minusfdots",!0);o(i,A,"⨬","\\minusrdots",!0);o(i,A,"⊻","\\Xor",!0);o(i,A,"⊼","\\Nand",!0);o(i,A,"⊽","\\Nor",!0);o(i,A,"⊽","\\barvee");o(i,A,"⫴","\\interleave",!0);o(i,A,"⧢","\\shuffle",!0);o(i,A,"⫶","\\threedotcolon",!0);o(i,A,"⦂","\\typecolon",!0);o(i,A,"∾","\\invlazys",!0);o(i,A,"⩋","\\twocaps",!0);o(i,A,"⩊","\\twocups",!0);o(i,A,"⩎","\\Sqcap",!0);o(i,A,"⩏","\\Sqcup",!0);o(i,A,"⩖","\\veeonvee",!0);o(i,A,"⩕","\\wedgeonwedge",!0);o(i,A,"⧗","\\blackhourglass",!0);o(i,A,"⧆","\\boxast",!0);o(i,A,"⧈","\\boxbox",!0);o(i,A,"⧇","\\boxcircle",!0);o(i,A,"⊜","\\circledequal",!0);o(i,A,"⦷","\\circledparallel",!0);o(i,A,"⦶","\\circledvert",!0);o(i,A,"⦵","\\circlehbar",!0);o(i,A,"⟡","\\concavediamond",!0);o(i,A,"⟢","\\concavediamondtickleft",!0);o(i,A,"⟣","\\concavediamondtickright",!0);o(i,A,"⋄","\\diamond",!0);o(i,A,"⧖","\\hourglass",!0);o(i,A,"⟠","\\lozengeminus",!0);o(i,A,"⌽","\\obar",!0);o(i,A,"⦸","\\obslash",!0);o(i,A,"⨸","\\odiv",!0);o(i,A,"⧁","\\ogreaterthan",!0);o(i,A,"⧀","\\olessthan",!0);o(i,A,"⦹","\\operp",!0);o(i,A,"⨷","\\Otimes",!0);o(i,A,"⨶","\\otimeshat",!0);o(i,A,"⋆","\\star",!0);o(i,A,"△","\\triangle",!0);o(i,A,"⨺","\\triangleminus",!0);o(i,A,"⨹","\\triangleplus",!0);o(i,A,"⨻","\\triangletimes",!0);o(i,A,"⟤","\\whitesquaretickleft",!0);o(i,A,"⟥","\\whitesquaretickright",!0);o(i,A,"⨳","\\smashtimes",!0);o(i,m,"⇢","\\dashrightarrow",!0);o(i,m,"⇠","\\dashleftarrow",!0);o(i,m,"⇇","\\leftleftarrows",!0);o(i,m,"⇆","\\leftrightarrows",!0);o(i,m,"⇚","\\Lleftarrow",!0);o(i,m,"↞","\\twoheadleftarrow",!0);o(i,m,"↢","\\leftarrowtail",!0);o(i,m,"↫","\\looparrowleft",!0);o(i,m,"⇋","\\leftrightharpoons",!0);o(i,m,"↶","\\curvearrowleft",!0);o(i,m,"↺","\\circlearrowleft",!0);o(i,m,"↰","\\Lsh",!0);o(i,m,"⇈","\\upuparrows",!0);o(i,m,"↿","\\upharpoonleft",!0);o(i,m,"⇃","\\downharpoonleft",!0);o(i,m,"⊶","\\origof",!0);o(i,m,"⊷","\\imageof",!0);o(i,m,"⊸","\\multimap",!0);o(i,m,"↭","\\leftrightsquigarrow",!0);o(i,m,"⇉","\\rightrightarrows",!0);o(i,m,"⇄","\\rightleftarrows",!0);o(i,m,"↠","\\twoheadrightarrow",!0);o(i,m,"↣","\\rightarrowtail",!0);o(i,m,"↬","\\looparrowright",!0);o(i,m,"↷","\\curvearrowright",!0);o(i,m,"↻","\\circlearrowright",!0);o(i,m,"↱","\\Rsh",!0);o(i,m,"⇊","\\downdownarrows",!0);o(i,m,"↾","\\upharpoonright",!0);o(i,m,"⇂","\\downharpoonright",!0);o(i,m,"⇝","\\rightsquigarrow",!0);o(i,m,"⇝","\\leadsto");o(i,m,"⇛","\\Rrightarrow",!0);o(i,m,"↾","\\restriction");o(i,b,"‘","`");o(i,b,"$","\\$");o(T,b,"$","\\$");o(T,b,"$","\\textdollar");o(i,b,"¢","\\cent");o(T,b,"¢","\\cent");o(i,b,"%","\\%");o(T,b,"%","\\%");o(i,b,"_","\\_");o(T,b,"_","\\_");o(T,b,"_","\\textunderscore");o(T,b,"␣","\\textvisiblespace",!0);o(i,b,"∠","\\angle",!0);o(i,b,"∞","\\infty",!0);o(i,b,"′","\\prime");o(i,b,"″","\\dprime");o(i,b,"‴","\\trprime");o(i,b,"⁗","\\qprime");o(i,b,"△","\\triangle");o(T,b,"Α","\\Alpha",!0);o(T,b,"Β","\\Beta",!0);o(T,b,"Γ","\\Gamma",!0);o(T,b,"Δ","\\Delta",!0);o(T,b,"Ε","\\Epsilon",!0);o(T,b,"Ζ","\\Zeta",!0);o(T,b,"Η","\\Eta",!0);o(T,b,"Θ","\\Theta",!0);o(T,b,"Ι","\\Iota",!0);o(T,b,"Κ","\\Kappa",!0);o(T,b,"Λ","\\Lambda",!0);o(T,b,"Μ","\\Mu",!0);o(T,b,"Ν","\\Nu",!0);o(T,b,"Ξ","\\Xi",!0);o(T,b,"Ο","\\Omicron",!0);o(T,b,"Π","\\Pi",!0);o(T,b,"Ρ","\\Rho",!0);o(T,b,"Σ","\\Sigma",!0);o(T,b,"Τ","\\Tau",!0);o(T,b,"Υ","\\Upsilon",!0);o(T,b,"Φ","\\Phi",!0);o(T,b,"Χ","\\Chi",!0);o(T,b,"Ψ","\\Psi",!0);o(T,b,"Ω","\\Omega",!0);o(i,E,"Α","\\Alpha",!0);o(i,E,"Β","\\Beta",!0);o(i,E,"Γ","\\Gamma",!0);o(i,E,"Δ","\\Delta",!0);o(i,E,"Ε","\\Epsilon",!0);o(i,E,"Ζ","\\Zeta",!0);o(i,E,"Η","\\Eta",!0);o(i,E,"Θ","\\Theta",!0);o(i,E,"Ι","\\Iota",!0);o(i,E,"Κ","\\Kappa",!0);o(i,E,"Λ","\\Lambda",!0);o(i,E,"Μ","\\Mu",!0);o(i,E,"Ν","\\Nu",!0);o(i,E,"Ξ","\\Xi",!0);o(i,E,"Ο","\\Omicron",!0);o(i,E,"Π","\\Pi",!0);o(i,E,"Ρ","\\Rho",!0);o(i,E,"Σ","\\Sigma",!0);o(i,E,"Τ","\\Tau",!0);o(i,E,"Υ","\\Upsilon",!0);o(i,E,"Φ","\\Phi",!0);o(i,E,"Χ","\\Chi",!0);o(i,E,"Ψ","\\Psi",!0);o(i,E,"Ω","\\Omega",!0);o(i,_e,"¬","\\neg",!0);o(i,_e,"¬","\\lnot");o(i,b,"⊤","\\top");o(i,b,"⊥","\\bot");o(i,b,"∅","\\emptyset");o(i,b,"⌀","\\varnothing");o(i,E,"α","\\alpha",!0);o(i,E,"β","\\beta",!0);o(i,E,"γ","\\gamma",!0);o(i,E,"δ","\\delta",!0);o(i,E,"ϵ","\\epsilon",!0);o(i,E,"ζ","\\zeta",!0);o(i,E,"η","\\eta",!0);o(i,E,"θ","\\theta",!0);o(i,E,"ι","\\iota",!0);o(i,E,"κ","\\kappa",!0);o(i,E,"λ","\\lambda",!0);o(i,E,"μ","\\mu",!0);o(i,E,"ν","\\nu",!0);o(i,E,"ξ","\\xi",!0);o(i,E,"ο","\\omicron",!0);o(i,E,"π","\\pi",!0);o(i,E,"ρ","\\rho",!0);o(i,E,"σ","\\sigma",!0);o(i,E,"τ","\\tau",!0);o(i,E,"υ","\\upsilon",!0);o(i,E,"ϕ","\\phi",!0);o(i,E,"χ","\\chi",!0);o(i,E,"ψ","\\psi",!0);o(i,E,"ω","\\omega",!0);o(i,E,"ε","\\varepsilon",!0);o(i,E,"ϑ","\\vartheta",!0);o(i,E,"ϖ","\\varpi",!0);o(i,E,"ϱ","\\varrho",!0);o(i,E,"ς","\\varsigma",!0);o(i,E,"φ","\\varphi",!0);o(i,E,"Ϙ","\\Coppa",!0);o(i,E,"ϙ","\\coppa",!0);o(i,E,"ϙ","\\varcoppa",!0);o(i,E,"Ϟ","\\Koppa",!0);o(i,E,"ϟ","\\koppa",!0);o(i,E,"Ϡ","\\Sampi",!0);o(i,E,"ϡ","\\sampi",!0);o(i,E,"Ϛ","\\Stigma",!0);o(i,E,"ϛ","\\stigma",!0);o(i,E,"⫫","\\Bot");o(i,A,"∗","∗",!0);o(i,A,"+","+");o(i,A,"*","*");o(i,A,"⁄","/",!0);o(i,A,"⁄","⁄");o(i,A,"−","-",!0);o(i,A,"⋅","\\cdot",!0);o(i,A,"∘","\\circ",!0);o(i,A,"÷","\\div",!0);o(i,A,"±","\\pm",!0);o(i,A,"×","\\times",!0);o(i,A,"∩","\\cap",!0);o(i,A,"∪","\\cup",!0);o(i,A,"∖","\\setminus",!0);o(i,A,"∧","\\land");o(i,A,"∨","\\lor");o(i,A,"∧","\\wedge",!0);o(i,A,"∨","\\vee",!0);o(i,_e,"⟦","\\llbracket",!0);o(i,be,"⟧","\\rrbracket",!0);o(i,_e,"⟨","\\langle",!0);o(i,_e,"⟪","\\lAngle",!0);o(i,_e,"⦉","\\llangle",!0);o(i,_e,"|","\\lvert");o(i,_e,"‖","\\lVert");o(i,b,"!","\\oc");o(i,b,"?","\\wn");o(i,b,"↓","\\shpos");o(i,b,"↕","\\shift");o(i,b,"↑","\\shneg");o(i,be,"?","?");o(i,be,"!","!");o(i,be,"‼","‼");o(i,be,"⟩","\\rangle",!0);o(i,be,"⟫","\\rAngle",!0);o(i,be,"⦊","\\rrangle",!0);o(i,be,"|","\\rvert");o(i,be,"‖","\\rVert");o(i,_e,"⦃","\\lBrace",!0);o(i,be,"⦄","\\rBrace",!0);o(i,m,"=","\\equal",!0);o(i,m,":",":");o(i,m,"≈","\\approx",!0);o(i,m,"≅","\\cong",!0);o(i,m,"≥","\\ge");o(i,m,"≥","\\geq",!0);o(i,m,"←","\\gets");o(i,m,">","\\gt",!0);o(i,m,"∈","\\in",!0);o(i,m,"∉","\\notin",!0);o(i,m,"","\\@not");o(i,m,"⊂","\\subset",!0);o(i,m,"⊃","\\supset",!0);o(i,m,"⊆","\\subseteq",!0);o(i,m,"⊇","\\supseteq",!0);o(i,m,"⊈","\\nsubseteq",!0);o(i,m,"⊈","\\nsubseteqq");o(i,m,"⊉","\\nsupseteq",!0);o(i,m,"⊉","\\nsupseteqq");o(i,m,"⊨","\\models");o(i,m,"←","\\leftarrow",!0);o(i,m,"≤","\\le");o(i,m,"≤","\\leq",!0);o(i,m,"<","\\lt",!0);o(i,m,"→","\\rightarrow",!0);o(i,m,"→","\\to");o(i,m,"≱","\\ngeq",!0);o(i,m,"≱","\\ngeqq");o(i,m,"≱","\\ngeqslant");o(i,m,"≰","\\nleq",!0);o(i,m,"≰","\\nleqq");o(i,m,"≰","\\nleqslant");o(i,m,"⫫","\\Perp",!0);o(i,ct," ","\\ ");o(i,ct," ","\\space");o(i,ct," ","\\nobreakspace");o(T,ct," ","\\ ");o(T,ct," "," ");o(T,ct," ","\\space");o(T,ct," ","\\nobreakspace");o(i,ct,null,"\\nobreak");o(i,ct,null,"\\allowbreak");o(i,Sr,",",",");o(T,Sr,":",":");o(i,Sr,";",";");o(i,A,"⊼","\\barwedge");o(i,A,"⊻","\\veebar");o(i,A,"⊙","\\odot",!0);o(i,A,"⊕︎","\\oplus");o(i,A,"⊗","\\otimes",!0);o(i,b,"∂","\\partial",!0);o(i,A,"⊘","\\oslash",!0);o(i,A,"⊚","\\circledcirc",!0);o(i,A,"⊡","\\boxdot",!0);o(i,A,"△","\\bigtriangleup");o(i,A,"▽","\\bigtriangledown");o(i,A,"†","\\dagger");o(i,A,"⋄","\\diamond");o(i,A,"◃","\\triangleleft");o(i,A,"▹","\\triangleright");o(i,_e,"{","\\{");o(T,b,"{","\\{");o(T,b,"{","\\textbraceleft");o(i,be,"}","\\}");o(T,b,"}","\\}");o(T,b,"}","\\textbraceright");o(i,_e,"{","\\lbrace");o(i,be,"}","\\rbrace");o(i,_e,"[","\\lbrack",!0);o(T,b,"[","\\lbrack",!0);o(i,be,"]","\\rbrack",!0);o(T,b,"]","\\rbrack",!0);o(i,_e,"(","\\lparen",!0);o(i,be,")","\\rparen",!0);o(i,_e,"⦇","\\llparenthesis",!0);o(i,be,"⦈","\\rrparenthesis",!0);o(T,b,"<","\\textless",!0);o(T,b,">","\\textgreater",!0);o(i,_e,"⌊","\\lfloor",!0);o(i,be,"⌋","\\rfloor",!0);o(i,_e,"⌈","\\lceil",!0);o(i,be,"⌉","\\rceil",!0);o(i,b,"\\","\\backslash");o(i,b,"|","|");o(i,b,"|","\\vert");o(T,b,"|","\\textbar",!0);o(i,b,"‖","\\|");o(i,b,"‖","\\Vert");o(T,b,"‖","\\textbardbl");o(T,b,"~","\\textasciitilde");o(T,b,"\\","\\textbackslash");o(T,b,"^","\\textasciicircum");o(i,m,"↑","\\uparrow",!0);o(i,m,"⇑","\\Uparrow",!0);o(i,m,"↓","\\downarrow",!0);o(i,m,"⇓","\\Downarrow",!0);o(i,m,"↕","\\updownarrow",!0);o(i,m,"⇕","\\Updownarrow",!0);o(i,Z,"∐","\\coprod");o(i,Z,"⋁","\\bigvee");o(i,Z,"⋀","\\bigwedge");o(i,Z,"⨄","\\biguplus");o(i,Z,"⨄","\\bigcupplus");o(i,Z,"⨃","\\bigcupdot");o(i,Z,"⨇","\\bigdoublevee");o(i,Z,"⨈","\\bigdoublewedge");o(i,Z,"⋂","\\bigcap");o(i,Z,"⋃","\\bigcup");o(i,Z,"∫","\\int");o(i,Z,"∫","\\intop");o(i,Z,"∬","\\iint");o(i,Z,"∭","\\iiint");o(i,Z,"∏","\\prod");o(i,Z,"∑","\\sum");o(i,Z,"⨂","\\bigotimes");o(i,Z,"⨁","\\bigoplus");o(i,Z,"⨀","\\bigodot");o(i,Z,"⨉","\\bigtimes");o(i,Z,"∮","\\oint");o(i,Z,"∯","\\oiint");o(i,Z,"∰","\\oiiint");o(i,Z,"∱","\\intclockwise");o(i,Z,"∲","\\varointclockwise");o(i,Z,"⨌","\\iiiint");o(i,Z,"⨍","\\intbar");o(i,Z,"⨎","\\intBar");o(i,Z,"⨏","\\fint");o(i,Z,"⨒","\\rppolint");o(i,Z,"⨓","\\scpolint");o(i,Z,"⨕","\\pointint");o(i,Z,"⨖","\\sqint");o(i,Z,"⨗","\\intlarhk");o(i,Z,"⨘","\\intx");o(i,Z,"⨙","\\intcap");o(i,Z,"⨚","\\intcup");o(i,Z,"⨅","\\bigsqcap");o(i,Z,"⨆","\\bigsqcup");o(i,Z,"∫","\\smallint");o(T,Lt,"…","\\textellipsis");o(i,Lt,"…","\\mathellipsis");o(T,Lt,"…","\\ldots",!0);o(i,Lt,"…","\\ldots",!0);o(i,Lt,"⋰","\\iddots",!0);o(i,Lt,"⋯","\\@cdots",!0);o(i,Lt,"⋱","\\ddots",!0);o(i,b,"⋮","\\varvdots");o(i,Q,"ˊ","\\acute");o(i,Q,"`","\\grave");o(i,Q,"¨","\\ddot");o(i,Q,"…","\\dddot");o(i,Q,"….","\\ddddot");o(i,Q,"~","\\tilde");o(i,Q,"‾","\\bar");o(i,Q,"˘","\\breve");o(i,Q,"ˇ","\\check");o(i,Q,"^","\\hat");o(i,Q,"→","\\vec");o(i,Q,"˙","\\dot");o(i,Q,"˚","\\mathring");o(i,E,"ı","\\imath",!0);o(i,E,"ȷ","\\jmath",!0);o(i,b,"ı","ı");o(i,b,"ȷ","ȷ");o(T,b,"ı","\\i",!0);o(T,b,"ȷ","\\j",!0);o(T,b,"ß","\\ss",!0);o(T,b,"æ","\\ae",!0);o(T,b,"œ","\\oe",!0);o(T,b,"ø","\\o",!0);o(i,E,"ø","\\o",!0);o(T,b,"Æ","\\AE",!0);o(T,b,"Œ","\\OE",!0);o(T,b,"Ø","\\O",!0);o(i,E,"Ø","\\O",!0);o(T,Q,"ˊ","\\'");o(T,Q,"ˋ","\\`");o(T,Q,"ˆ","\\^");o(T,Q,"˜","\\~");o(T,Q,"ˉ","\\=");o(T,Q,"˘","\\u");o(T,Q,"˙","\\.");o(T,Q,"¸","\\c");o(T,Q,"˚","\\r");o(T,Q,"ˇ","\\v");o(T,Q,"¨",'\\"');o(T,Q,"˝","\\H");o(i,Q,"ˊ","\\'");o(i,Q,"ˋ","\\`");o(i,Q,"ˆ","\\^");o(i,Q,"˜","\\~");o(i,Q,"ˉ","\\=");o(i,Q,"˘","\\u");o(i,Q,"˙","\\.");o(i,Q,"¸","\\c");o(i,Q,"˚","\\r");o(i,Q,"ˇ","\\v");o(i,Q,"¨",'\\"');o(i,Q,"˝","\\H");const Wu={"--":!0,"---":!0,"``":!0,"''":!0};o(T,b,"–","--",!0);o(T,b,"–","\\textendash");o(T,b,"—","---",!0);o(T,b,"—","\\textemdash");o(T,b,"‘","`",!0);o(T,b,"‘","\\textquoteleft");o(T,b,"’","'",!0);o(T,b,"’","\\textquoteright");o(T,b,"“","``",!0);o(T,b,"“","\\textquotedblleft");o(T,b,"”","''",!0);o(T,b,"”","\\textquotedblright");o(i,b,"°","\\degree",!0);o(T,b,"°","\\degree");o(T,b,"°","\\textdegree",!0);o(i,b,"£","\\pounds");o(i,b,"£","\\mathsterling",!0);o(T,b,"£","\\pounds");o(T,b,"£","\\textsterling",!0);o(i,b,"✠","\\maltese");o(T,b,"✠","\\maltese");o(i,b,"€","\\euro",!0);o(T,b,"€","\\euro",!0);o(T,b,"€","\\texteuro");o(i,b,"©","\\copyright",!0);o(T,b,"©","\\textcopyright");o(i,b,"⌀","\\diameter",!0);o(T,b,"⌀","\\diameter");o(i,b,"𝛤","\\varGamma");o(i,b,"𝛥","\\varDelta");o(i,b,"𝛩","\\varTheta");o(i,b,"𝛬","\\varLambda");o(i,b,"𝛯","\\varXi");o(i,b,"𝛱","\\varPi");o(i,b,"𝛴","\\varSigma");o(i,b,"𝛶","\\varUpsilon");o(i,b,"𝛷","\\varPhi");o(i,b,"𝛹","\\varPsi");o(i,b,"𝛺","\\varOmega");o(T,b,"𝛤","\\varGamma");o(T,b,"𝛥","\\varDelta");o(T,b,"𝛩","\\varTheta");o(T,b,"𝛬","\\varLambda");o(T,b,"𝛯","\\varXi");o(T,b,"𝛱","\\varPi");o(T,b,"𝛴","\\varSigma");o(T,b,"𝛶","\\varUpsilon");o(T,b,"𝛷","\\varPhi");o(T,b,"𝛹","\\varPsi");o(T,b,"𝛺","\\varOmega");const Js='0123456789/@."';for(let e=0;e<Js.length;e++){const t=Js.charAt(e);o(i,b,t,t)}const ea='0123456789!@*()-=+";:?/.,';for(let e=0;e<ea.length;e++){const t=ea.charAt(e);o(T,b,t,t)}const nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let e=0;e<nn.length;e++){const t=nn.charAt(e);o(i,E,t,t),o(T,b,t,t)}const ta="ÇÐÞçþℂℍℕℙℚℝℤℎℏℊℋℌℐℑℒℓ℘ℛℜℬℰℱℳℭℨ";for(let e=0;e<ta.length;e++){const t=ta.charAt(e);o(i,E,t,t),o(T,b,t,t)}let D="";for(let e=0;e<nn.length;e++){D=String.fromCharCode(55349,56320+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,56372+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,56424+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,56580+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,56736+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,56788+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,56840+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,56944+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,56632+e),o(i,E,D,D),o(T,b,D,D);const t=nn.charAt(e);D=String.fromCharCode(55349,56476+e),o(i,E,t,D),o(T,b,t,D)}for(let e=0;e<10;e++)D=String.fromCharCode(55349,57294+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,57314+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,57324+e),o(i,E,D,D),o(T,b,D,D),D=String.fromCharCode(55349,57334+e),o(i,E,D,D),o(T,b,D,D);const Hu="([{⌊⌈⟨⟮⎰⟦⦃",Zu=")]}⌋⌉⟩⟯⎱⟦⦄";function Xu(e,t,r){const n=[];let s=[],a=[],l=0,u=0,c=0;for(;u<e.length;){for(;e[u]instanceof Ts;)e.splice(u,1,...e[u].children);const d=e[u];if(d.attributes&&d.attributes.linebreak&&d.attributes.linebreak==="newline"){a.length>0&&s.push(new _.MathNode("mrow",a)),s.push(d),a=[];const p=new _.MathNode("mtd",s);p.style.textAlign="left",n.push(new _.MathNode("mtr",[p])),s=[],u+=1;continue}if(a.push(d),d.type&&d.type==="mo"&&d.children.length===1&&!Object.hasOwn(d.attributes,"movablelimits")){const p=d.children[0].text;if(Hu.indexOf(p)>-1)c+=1;else if(Zu.indexOf(p)>-1)c-=1;else if(c===0&&t==="="&&p==="="){if(l+=1,l>1){a.pop();const x=new _.MathNode("mrow",a);s.push(x),a=[d]}}else if(c===0&&t==="tex"&&p!=="∇"){const x=u<e.length-1?e[u+1]:null;let f=!0;if(!(x&&x.type==="mtext"&&x.attributes.linebreak&&x.attributes.linebreak==="nobreak"))for(let v=u+1;v<e.length;v++){const M=e[v];if(M.type&&M.type==="mspace"&&!(M.attributes.linebreak&&M.attributes.linebreak==="newline"))a.push(M),u+=1,M.attributes&&M.attributes.linebreak&&M.attributes.linebreak==="nobreak"&&(f=!1);else break}if(f){const v=new _.MathNode("mrow",a);s.push(v),a=[]}}}u+=1}if(a.length>0){const d=new _.MathNode("mrow",a);s.push(d)}if(n.length>0){const d=new _.MathNode("mtd",s);d.style.textAlign="left";const p=new _.MathNode("mtr",[d]);n.push(p);const x=new _.MathNode("mtable",n);return r||(x.setAttribute("columnalign","left"),x.setAttribute("rowspacing","0em")),x}return _.newDocumentFragment(s)}const Re=function(e,t,r){return we[t][e]&&we[t][e].replace&&e.charCodeAt(0)!==55349&&!(Object.prototype.hasOwnProperty.call(Wu,e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=we[t][e].replace),new _.TextNode(e)},ra=(e,t)=>{if(e.children.length===0||e.children[e.children.length-1].type!=="mtext"){const r=new _.MathNode("mtext",[new _.TextNode(t.children[0].text)]);e.children.push(r)}else e.children[e.children.length-1].children[0].text+=t.children[0].text},Ms=e=>{if(e.type!=="mrow"&&e.type!=="mstyle"||e.children.length===0)return e;const t=new _.MathNode("mrow");for(let r=0;r<e.children.length;r++){const n=e.children[r];if(n.type==="mtext"&&Object.keys(n.attributes).length===0)ra(t,n);else if(n.type==="mrow"){let s=!0;for(let a=0;a<n.children.length;a++)if(n.children[a].type!=="mtext"||Object.keys(n.attributes).length!==0){s=!1;break}if(s)for(let a=0;a<n.children.length;a++){const l=n.children[a];ra(t,l)}else t.children.push(n)}else t.children.push(n)}for(let r=0;r<t.children.length;r++)if(t.children[r].type==="mtext"){const n=t.children[r];n.children[0].text.charAt(0)===" "&&(n.children[0].text=" "+n.children[0].text.slice(1));const s=n.children[0].text.length;s>0&&n.children[0].text.charAt(s-1)===" "&&(n.children[0].text=n.children[0].text.slice(0,-1)+" ");for(const[a,l]of Object.entries(e.attributes))n.attributes[a]=l}return t.children.length===1&&t.children[0].type==="mtext"?t.children[0]:t},na=/^[0-9]$/,Yu=(e,t)=>(e.type==="textord"&&e.text==="."||e.type==="atom"&&e.text===",")&&e.loc&&t.loc&&e.loc.end===t.loc.start,Ku=e=>{if(e.length<2)return;const t=[];let r=!1;for(let n=0;n<e.length;n++){const s=e[n];s.type==="textord"&&na.test(s.text)?(r||t.push({start:n}),r=!0):(r&&(t[t.length-1].end=n-1),r=!1)}r&&(t[t.length-1].end=e.length-1);for(let n=t.length-1;n>0;n--)t[n-1].end===t[n].start-2&&Yu(e[t[n].start-1],e[t[n].start])&&(t[n-1].end=t[n].end,t.splice(n,1));for(let n=t.length-1;n>=0;n--){for(let s=t[n].start+1;s<=t[n].end;s++)e[t[n].start].text+=e[s].text;if(e.splice(t[n].start+1,t[n].end-t[n].start),e.length>t[n].start+1){const s=e[t[n].start+1];s.type==="supsub"&&s.base&&s.base.type==="textord"&&na.test(s.base.text)&&(s.base.text=e[t[n].start].text+s.base.text,e.splice(t[n].start,1))}}},Cs=function(e,t=!1){if(e.length===1&&!(e[0]instanceof Ts))return e[0];if(!t){e[0]instanceof Me&&e[0].type==="mo"&&!e[0].attributes.fence&&(e[0].attributes.lspace="0em",e[0].attributes.rspace="0em");const r=e.length-1;e[r]instanceof Me&&e[r].type==="mo"&&!e[r].attributes.fence&&(e[r].attributes.lspace="0em",e[r].attributes.rspace="0em")}return new _.MathNode("mrow",e)},Br=e=>e.type==="atom"&&e.family==="rel"||e.type==="mclass"&&e.mclass==="mrel",Oe=function(e,t,r=!1){if(!r&&e.length===1){const s=ue(e[0],t);return s instanceof Me&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}Ku(e);const n=[];for(let s=0;s<e.length;s++){const a=ue(e[s],t);s<e.length-1&&Br(e[s])&&Br(e[s+1])&&a.setAttribute("rspace","0em"),s>0&&Br(e[s])&&Br(e[s-1])&&a.setAttribute("lspace","0em"),n.push(a)}return n},dt=function(e,t,r=!1){return Cs(Oe(e,t,r),r)},ue=function(e,t){if(!e)return new _.MathNode("mrow");if(tn[e.type])return tn[e.type](e,t);throw new O("Got group of unknown type: '"+e.type+"'")},sa=e=>new _.MathNode("mtd",[],[],{padding:"0",width:"50%"}),Qu=(e,t,r,n)=>{t=dt(t[0].body,r),t=Ms(t),t.classes.push("tml-tag"),e=new _.MathNode("mtd",[e]);const s=[sa(),e,sa()];s[n?0:2].classes.push(n?"tml-left":"tml-right"),s[n?0:2].children.push(t);const a=new _.MathNode("mtr",s,["tml-tageqn"]),l=new _.MathNode("mtable",[a]);return l.style.width="100%",l.setAttribute("displaystyle","true"),l};function Ju(e,t,r,n){let s=null;e.length===1&&e[0].type==="tag"&&(s=e[0].tag,e=e[0].body);const a=Oe(e,r),l=n.displayMode||n.annotate?"none":n.wrap,u=a.length===0?null:a[0];let c=a.length===1&&s===null&&u instanceof Me?a[0]:Xu(a,l,n.displayMode);if(s&&(c=Qu(c,s,r,n.leqno)),n.annotate){const p=new _.MathNode("annotation",[new _.TextNode(t)]);p.setAttribute("encoding","application/x-tex"),c=new _.MathNode("semantics",[c,p])}const d=new _.MathNode("math",[c]);return n.xml&&d.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n.displayMode&&(d.setAttribute("display","block"),d.style.display="block math",d.classes=["tml-display"]),d}const Ro="acegıȷmnopqrsuvwxyzαγεηικμνοπρςστυχωϕ𝐚𝐜𝐞𝐠𝐦𝐧𝐨𝐩𝐪𝐫𝐬𝐮𝐯𝐰𝐱𝐲𝐳",ec="ABCDEFGHIJKLMNOPQRSTUVWXYZbdfhkltΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩβδλζφθψ𝐀𝐁𝐂𝐃𝐄𝐅𝐆𝐇𝐈𝐉𝐊𝐋𝐌𝐍𝐎𝐏𝐐𝐑𝐒𝐓𝐔𝐕𝐖𝐗𝐘𝐙𝐛𝐝𝐟𝐡𝐤𝐥𝐭",tc=new Set(["\\alpha","\\gamma","\\delta","\\epsilon","\\eta","\\iota","\\kappa","\\mu","\\nu","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\chi","\\psi","\\omega","\\imath","\\jmath"]),rc=new Set(["\\Gamma","\\Delta","\\Sigma","\\Omega","\\beta","\\delta","\\lambda","\\theta","\\psi"]),Fo=(e,t)=>{const r=e.isStretchy?pn.accentNode(e):new _.MathNode("mo",[Re(e.label,e.mode)]);if(e.label==="\\vec")r.style.transform="scale(0.75) translate(10%, 30%)";else if(r.style.mathStyle="normal",r.style.mathDepth="0",sc.has(e.label)&&ae.isCharacterBox(e.base)){let n="";const s=e.base.text;(Ro.indexOf(s)>-1||tc.has(s))&&(n="tml-xshift"),(ec.indexOf(s)>-1||rc.has(s))&&(n="tml-capshift"),n&&r.classes.push(n)}return e.isStretchy||r.setAttribute("stretchy","false"),new _.MathNode(e.label==="\\c"?"munder":"mover",[ue(e.base,t),r])},nc=new Set(["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"]),sc=new Set(["\\acute","\\bar","\\breve","\\check","\\dot","\\ddot","\\grave","\\hat","\\mathring","\\'","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v"]),aa={"\\`":"̀","\\'":"́","\\^":"̂","\\~":"̃","\\=":"̄","\\u":"̆","\\.":"̇",'\\"':"̈","\\r":"̊","\\H":"̋","\\v":"̌"};B({type:"accent",names:["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\overparen","\\widecheck","\\widehat","\\wideparen","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{const r=gr(t[0]),n=!nc.has(e.funcName);return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,base:r}},mathmlBuilder:Fo});B({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\c","\\u","\\.",'\\"',"\\r","\\H","\\v"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{const r=gr(t[0]),n=e.parser.mode;return n==="math"&&e.parser.settings.strict&&console.log(`Temml parse error: Command ${e.funcName} is invalid in math mode.`),n==="text"&&r.text&&r.text.length===1&&e.funcName in aa&&Ro.indexOf(r.text)>-1?{type:"textord",mode:"text",text:r.text+aa[e.funcName]}:{type:"accent",mode:n,label:e.funcName,isStretchy:!1,base:r}},mathmlBuilder:Fo});B({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underparen","\\utilde"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>{const n=r[0];return{type:"accentUnder",mode:e.mode,label:t,base:n}},mathmlBuilder:(e,t)=>{const r=pn.accentNode(e);return r.style["math-depth"]=0,new _.MathNode("munder",[ue(e.base,t),r])}});const oa={pt:800/803,pc:12*800/803,dd:1238/1157*800/803,cc:14856/1157*800/803,nd:685/642*800/803,nc:1370/107*800/803,sp:1/65536*800/803,mm:25.4/72,cm:2.54/72,in:1/72,px:96/72},ac=["em","ex","mu","pt","mm","cm","in","px","bp","pc","dd","cc","nd","nc","sp"],Go=function(e){return typeof e!="string"&&(e=e.unit),ac.indexOf(e)>-1},Uo=e=>{const t=Math.max(e-1,0);return[1,.7,.5][t]},rt=function(e,t){let r=e.number;if(t.maxSize[0]<0&&r>0)return{number:0,unit:"em"};const n=e.unit;switch(n){case"mm":case"cm":case"in":case"px":return r*oa[n]>t.maxSize[1]?{number:t.maxSize[1],unit:"pt"}:{number:r,unit:n};case"em":case"ex":return n==="ex"&&(r*=.431),r=Math.min(r/Uo(t.level),t.maxSize[0]),{number:ae.round(r),unit:"em"};case"bp":return r>t.maxSize[1]&&(r=t.maxSize[1]),{number:r,unit:"pt"};case"pt":case"pc":case"dd":case"cc":case"nd":case"nc":case"sp":return r=Math.min(r*oa[n],t.maxSize[1]),{number:ae.round(r),unit:"pt"};case"mu":return r=Math.min(r/18,t.maxSize[0]),{number:ae.round(r),unit:"em"};default:throw new O("Invalid unit: '"+n+"'")}},lt=e=>{const t=new _.MathNode("mspace");return t.setAttribute("width",e+"em"),t},Dr=(e,t=.3,r=0)=>{if(e==null&&r===0)return lt(t);const n=e?[e]:[];return t!==0&&n.unshift(lt(t)),r>0&&n.push(lt(r)),new _.MathNode("mrow",n)},Cn=(e,t)=>Number(e)/Uo(t),as=(e,t,r,n)=>{const s=pn.mathMLnode(e),a=e.slice(1,3)==="eq",l=e.charAt(1)==="x"?"1.75":e.slice(2,4)==="cd"?"3.0":a?"1.0":"2.0";s.setAttribute("lspace","0"),s.setAttribute("rspace",a?"0.5em":"0");const u=n.withLevel(n.level<2?2:3),c=Cn(l,u.level),d=Cn(l,3),p=Dr(null,c.toFixed(4),0),x=Dr(null,d.toFixed(4),0),f=Cn(a?0:.3,u.level).toFixed(4);let v,M;const I=t&&t.body&&(t.body.body||t.body.length>0);if(I){let k=ue(t,u);k=Dr(k,f,f),v=new _.MathNode("mover",[k,x])}const L=r&&r.body&&(r.body.body||r.body.length>0);if(L){let k=ue(r,u);k=Dr(k,f,f),M=new _.MathNode("munder",[k,x])}let w;return!I&&!L?w=new _.MathNode("mover",[s,p]):I&&L?w=new _.MathNode("munderover",[s,M,v]):I?w=new _.MathNode("mover",[s,v]):w=new _.MathNode("munder",[s,M]),l==="3.0"&&(w.style.height="1em"),w.setAttribute("accent","false"),w};B({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\yields","\\yieldsLeft","\\mesomerism","\\longrightharpoonup","\\longleftharpoondown","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e,funcName:t},r,n){return{type:"xArrow",mode:e.mode,name:t,body:r[0],below:n[0]}},mathmlBuilder(e,t){const r=[as(e.name,e.body,e.below,t)];return r.unshift(lt(.2778)),r.push(lt(.2778)),new _.MathNode("mrow",r)}});const ia={"\\xtofrom":["\\xrightarrow","\\xleftarrow"],"\\xleftrightharpoons":["\\xleftharpoonup","\\xrightharpoondown"],"\\xrightleftharpoons":["\\xrightharpoonup","\\xleftharpoondown"],"\\yieldsLeftRight":["\\yields","\\yieldsLeft"],"\\equilibrium":["\\longrightharpoonup","\\longleftharpoondown"],"\\equilibriumRight":["\\longrightharpoonup","\\eqleftharpoondown"],"\\equilibriumLeft":["\\eqrightharpoonup","\\longleftharpoondown"]};B({type:"stackedArrow",names:["\\xtofrom","\\xleftrightharpoons","\\xrightleftharpoons","\\yieldsLeftRight","\\equilibrium","\\equilibriumRight","\\equilibriumLeft"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e,funcName:t},r,n){const s=r[0]?{type:"hphantom",mode:e.mode,body:r[0]}:null,a=n[0]?{type:"hphantom",mode:e.mode,body:n[0]}:null;return{type:"stackedArrow",mode:e.mode,name:t,body:r[0],upperArrowBelow:a,lowerArrowBody:s,below:n[0]}},mathmlBuilder(e,t){const r=ia[e.name][0],n=ia[e.name][1],s=as(r,e.body,e.upperArrowBelow,t),a=as(n,e.lowerArrowBody,e.below,t);let l;const u=new _.MathNode("mpadded",[s]);if(u.setAttribute("voffset","0.3em"),u.setAttribute("height","+0.3em"),u.setAttribute("depth","-0.3em"),e.name==="\\equilibriumLeft"){const c=new _.MathNode("mpadded",[a]);c.setAttribute("width","0.5em"),l=new _.MathNode("mpadded",[lt(.2778),c,u,lt(.2778)])}else u.setAttribute("width",e.name==="\\equilibriumRight"?"0.5em":"0"),l=new _.MathNode("mpadded",[lt(.2778),u,a,lt(.2778)]);return l.setAttribute("voffset","-0.18em"),l.setAttribute("height","-0.18em"),l.setAttribute("depth","+0.18em"),l}});function W(e,t){if(!e||e.type!==t)throw new Error(`Expected node of type ${t}, but got `+(e?`node of type ${e.type}`:String(e)));return e}function Is(e){const t=fn(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?`node of type ${e.type}`:String(e)));return t}function fn(e){return e&&(e.type==="atom"||Object.prototype.hasOwnProperty.call(Vu,e.type))?e:null}const oc={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},la=()=>({type:"styling",body:[],mode:"math",scriptLevel:"display"}),ua=e=>e.type==="textord"&&e.text==="@",ic=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function lc(e,t,r){const n=oc[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{const s=r.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},l=r.callFunction("\\Big",[a],[]),u=r.callFunction("\\\\cdright",[t[1]],[]),c={type:"ordgroup",mode:"math",body:[s,l,u],semisimple:!0};return r.callFunction("\\\\cdparent",[c],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const s={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[s],[])}default:return{type:"textord",text:" ",mode:"math"}}}function uc(e){const t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();const s=e.fetch().text;if(s==="&"||s==="\\\\")e.consume();else if(s==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new O("Expected \\\\ or \\cr or \\end",e.nextToken)}let r=[];const n=[r];for(let s=0;s<t.length;s++){const a=t[s];let l=la();for(let u=0;u<a.length;u++)if(!ua(a[u]))l.body.push(a[u]);else{r.push(l),u+=1;const c=Is(a[u]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(let x=0;x<2;x++){let f=!0;for(let v=u+1;v<a.length;v++){if(ic(a[v],c)){f=!1,u=v;break}if(ua(a[v]))throw new O("Missing a "+c+" character to complete a CD arrow.",a[v]);d[x].body.push(a[v])}if(f)throw new O("Missing a "+c+" character to complete a CD arrow.",a[u])}else throw new O('Expected one of "<>AV=|." after @.');const p=lc(c,d,e);r.push(p),l=la()}s%2===0?r.push(l):r.shift(),r=[],n.push(r)}return n.pop(),e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:n,envClasses:["jot","cd"],cols:[],hLinesBeforeRow:new Array(n.length+1).fill([])}}B({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler({parser:e,funcName:t},r){return{type:"cdlabel",mode:e.mode,side:t.slice(4),label:r[0]}},mathmlBuilder(e,t){let r=new _.MathNode("mrow",[ue(e.label,t)]);return r=new _.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new _.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});B({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler({parser:e},t){return{type:"cdlabelparent",mode:e.mode,fragment:t[0]}},mathmlBuilder(e,t){return new _.MathNode("mrow",[ue(e.fragment,t)])}});B({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler({parser:e,token:t},r){const n=W(r[0],"ordgroup").body;let s="";for(let l=0;l<n.length;l++){const u=W(n[l],"textord");s+=u.text}const a=parseInt(s);if(isNaN(a))throw new O(`\\@char has non-numeric argument ${s}`,t);return{type:"textord",mode:e.mode,text:String.fromCodePoint(a)}}});const cc=/^(#[a-f0-9]{3}|#?[a-f0-9]{6})$/i,dc=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i,hc=/^ *\d{1,3} *(?:, *\d{1,3} *){2}$/,pc=/^ *[10](?:\.\d*)? *(?:, *[10](?:\.\d*)? *){2}$/,fc=/^[a-f0-9]{6}$/i,ca=e=>{let t=e.toString(16);return t.length===1&&(t="0"+t),t},da=JSON.parse(`{
  "Apricot": "#ffb484",
  "Aquamarine": "#08b4bc",
  "Bittersweet": "#c84c14",
  "blue": "#0000FF",
  "Blue": "#303494",
  "BlueGreen": "#08b4bc",
  "BlueViolet": "#503c94",
  "BrickRed": "#b8341c",
  "brown": "#BF8040",
  "Brown": "#802404",
  "BurntOrange": "#f8941c",
  "CadetBlue": "#78749c",
  "CarnationPink": "#f884b4",
  "Cerulean": "#08a4e4",
  "CornflowerBlue": "#40ace4",
  "cyan": "#00FFFF",
  "Cyan": "#08acec",
  "Dandelion": "#ffbc44",
  "darkgray": "#404040",
  "DarkOrchid": "#a8548c",
  "Emerald": "#08ac9c",
  "ForestGreen": "#089c54",
  "Fuchsia": "#90348c",
  "Goldenrod": "#ffdc44",
  "gray": "#808080",
  "Gray": "#98949c",
  "green": "#00FF00",
  "Green": "#08a44c",
  "GreenYellow": "#e0e474",
  "JungleGreen": "#08ac9c",
  "Lavender": "#f89cc4",
  "lightgray": "#c0c0c0",
  "lime": "#BFFF00",
  "LimeGreen": "#90c43c",
  "magenta": "#FF00FF",
  "Magenta": "#f0048c",
  "Mahogany": "#b0341c",
  "Maroon": "#b03434",
  "Melon": "#f89c7c",
  "MidnightBlue": "#086494",
  "Mulberry": "#b03c94",
  "NavyBlue": "#086cbc",
  "olive": "#7F7F00",
  "OliveGreen": "#407c34",
  "orange": "#FF8000",
  "Orange": "#f8843c",
  "OrangeRed": "#f0145c",
  "Orchid": "#b074ac",
  "Peach": "#f8945c",
  "Periwinkle": "#8074bc",
  "PineGreen": "#088c74",
  "pink": "#ff7f7f",
  "Plum": "#98248c",
  "ProcessBlue": "#08b4ec",
  "purple": "#BF0040",
  "Purple": "#a0449c",
  "RawSienna": "#983c04",
  "red": "#ff0000",
  "Red": "#f01c24",
  "RedOrange": "#f86434",
  "RedViolet": "#a0246c",
  "Rhodamine": "#f0549c",
  "Royallue": "#0874bc",
  "RoyalPurple": "#683c9c",
  "RubineRed": "#f0047c",
  "Salmon": "#f8948c",
  "SeaGreen": "#30bc9c",
  "Sepia": "#701404",
  "SkyBlue": "#48c4dc",
  "SpringGreen": "#c8dc64",
  "Tan": "#e09c74",
  "teal": "#007F7F",
  "TealBlue": "#08acb4",
  "Thistle": "#d884b4",
  "Turquoise": "#08b4cc",
  "violet": "#800080",
  "Violet": "#60449c",
  "VioletRed": "#f054a4",
  "WildStrawberry": "#f0246c",
  "yellow": "#FFFF00",
  "Yellow": "#fff404",
  "YellowGreen": "#98cc6c",
  "YellowOrange": "#ffa41c"
}`),Wt=(e,t)=>{let r="";if(e==="HTML"){if(!cc.test(t))throw new O("Invalid HTML input.");r=t}else if(e==="RGB"){if(!hc.test(t))throw new O("Invalid RGB input.");t.split(",").map(n=>{r+=ca(Number(n.trim()))})}else{if(!pc.test(t))throw new O("Invalid rbg input.");t.split(",").map(n=>{const s=Number(n.trim());if(s>1)throw new O("Color rgb input must be < 1.");r+=ca(Number((s*255).toFixed(0)))})}return r.charAt(0)!=="#"&&(r="#"+r),r},br=(e,t,r)=>{const n=`\\\\color@${e}`;if(!dc.exec(e))throw new O("Invalid color: '"+e+"'",r);return fc.test(e)?"#"+e:(e.charAt(0)==="#"||(t.has(n)?e=t.get(n).tokens[0].text:da[e]&&(e=da[e])),e)},Vo=(e,t)=>{let r=Oe(e.body,t.withColor(e.color));return r=r.map(n=>(n.style.color=e.color,n)),_.newDocumentFragment(r)};B({type:"color",names:["\\textcolor"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","original"]},handler({parser:e,token:t},r,n){const s=n[0]&&W(n[0],"raw").string;let a="";if(s){const u=W(r[0],"raw").string;a=Wt(s,u)}else a=br(W(r[0],"raw").string,e.gullet.macros,t);const l=r[1];return{type:"color",mode:e.mode,color:a,body:ge(l)}},mathmlBuilder:Vo});B({type:"color",names:["\\color"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw"]},handler({parser:e,breakOnTokenText:t,token:r},n,s){const a=s[0]&&W(s[0],"raw").string;let l="";if(a){const c=W(n[0],"raw").string;l=Wt(a,c)}else l=br(W(n[0],"raw").string,e.gullet.macros,r);const u=e.parseExpression(!0,t,!0);return{type:"color",mode:e.mode,color:l,body:u}},mathmlBuilder:Vo});B({type:"color",names:["\\definecolor"],props:{numArgs:3,allowedInText:!0,argTypes:["raw","raw","raw"]},handler({parser:e,funcName:t,token:r},n){const s=W(n[0],"raw").string;if(!/^[A-Za-z]+$/.test(s))throw new O("Color name must be latin letters.",r);const a=W(n[1],"raw").string;if(!["HTML","RGB","rgb"].includes(a))throw new O("Color model must be HTML, RGB, or rgb.",r);const l=W(n[2],"raw").string,u=Wt(a,l);return e.gullet.macros.set(`\\\\color@${s}`,{tokens:[{text:u}],numArgs:0}),{type:"internal",mode:e.mode}}});B({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler({parser:e},t,r){const n=e.gullet.future().text==="["?e.parseSizeGroup(!0):null,s=!e.settings.displayMode;return{type:"cr",mode:e.mode,newLine:s,size:n&&W(n,"size").value}},mathmlBuilder(e,t){const r=new _.MathNode("mo");if(e.newLine&&(r.setAttribute("linebreak","newline"),e.size)){const n=rt(e.size,t);r.setAttribute("height",n.number+n.unit)}return r}});const os={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},sn=e=>{const t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new O("Expected a control sequence",e);return t},mc=e=>{let t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},Wo=(e,t,r,n)=>{let s=e.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,s,n)};B({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler({parser:e,funcName:t}){e.consumeSpaces();const r=e.fetch();if(os[r.text])return(t==="\\global"||t==="\\\\globallong")&&(r.text=os[r.text]),W(e.parseFunction(),"internal");throw new O("Invalid token after macro prefix",r)}});B({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){let r=e.gullet.popToken();const n=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(n))throw new O("Expected a control sequence",r);let s=0,a;const l=[[]];for(;e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){a=e.gullet.future(),l[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new O(`Invalid argument number "${r.text}"`);if(parseInt(r.text)!==s+1)throw new O(`Argument number "${r.text}" out of order`);s++,l.push([])}else{if(r.text==="EOF")throw new O("Expected a macro definition");l[s].push(r.text)}let{tokens:u}=e.gullet.consumeArg();if(a&&u.unshift(a),t==="\\edef"||t==="\\xdef"){if(u=e.gullet.expandTokens(u),u.length>e.gullet.settings.maxExpand)throw new O("Too many expansions in an "+t);u.reverse()}return e.gullet.macros.set(n,{tokens:u,numArgs:s,delimiters:l},t===os[t]),{type:"internal",mode:e.mode}}});B({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){const r=sn(e.gullet.popToken());e.gullet.consumeSpaces();const n=mc(e);return Wo(e,r,n,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});B({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){const r=sn(e.gullet.popToken()),n=e.gullet.popToken(),s=e.gullet.popToken();return Wo(e,r,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(n),{type:"internal",mode:e.mode}}});B({type:"internal",names:["\\newcommand","\\renewcommand","\\providecommand"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){let r="";const n=e.gullet.popToken();n.text==="{"?(r=sn(e.gullet.popToken()),e.gullet.popToken()):r=sn(n);const s=e.gullet.isDefined(r);if(s&&t==="\\newcommand")throw new O(`\\newcommand{${r}} attempting to redefine ${r}; use \\renewcommand`);if(!s&&t==="\\renewcommand")throw new O(`\\renewcommand{${r}} when command ${r} does not yet exist; use \\newcommand`);let a=0;if(e.gullet.future().text==="["){let u=e.gullet.popToken();if(u=e.gullet.popToken(),!/^[0-9]$/.test(u.text))throw new O(`Invalid number of arguments: "${u.text}"`);if(a=parseInt(u.text),u=e.gullet.popToken(),u.text!=="]")throw new O(`Invalid argument "${u.text}"`)}const{tokens:l}=e.gullet.consumeArg();return e.gullet.macros.set(r,{tokens:l,numArgs:a}),{type:"internal",mode:e.mode}}});const is={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Ho=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","⦇","\\llparenthesis","⦈","\\rrparenthesis","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lAngle","⟪","\\rAngle","⟫","\\llangle","⦉","\\rrangle","⦊","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","\\llbracket","\\rrbracket","⟦","⟦","\\lBrace","\\rBrace","⦃","⦄","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],gc=["}","\\left","\\middle","\\right"],mn=e=>e.length>0&&(Ho.includes(e)||is[e]||gc.includes(e)),ha=[0,1.2,1.8,2.4,3];function xr(e,t){const r=fn(e);if(r&&Ho.includes(r.text))return["/","⁄"].includes(r.text)&&(r.text="∕"),["<","\\lt"].includes(r.text)&&(r.text="⟨"),[">","\\gt"].includes(r.text)&&(r.text="⟩"),r.text==="\\backslash"&&(r.text="∖"),r;throw r?new O(`Invalid delimiter '${r.text}' after '${t.funcName}'`,e):new O(`Invalid delimiter type '${e.type}'`,e)}B({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{const r=xr(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:is[e.funcName].size,mclass:is[e.funcName].mclass,delim:r.text}},mathmlBuilder:e=>{const t=[];e.delim==="."&&(e.delim=""),t.push(Re(e.delim,e.mode));const r=new _.MathNode("mo",t);return e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),(e.delim==="∖"||e.delim==="\\vert"||e.delim==="|"||e.delim.indexOf("arrow")>-1)&&r.setAttribute("stretchy","true"),r.setAttribute("symmetric","true"),r.setAttribute("minsize",ha[e.size]+"em"),r.setAttribute("maxsize",ha[e.size]+"em"),r}});function bc(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}B({type:"leftright-right",names:["\\right"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>({type:"leftright-right",mode:e.parser.mode,delim:xr(t[0],e).text})});B({type:"leftright",names:["\\left"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{const r=xr(t[0],e),n=e.parser;++n.leftrightDepth;let s=n.parseExpression(!1,null,!0),a=n.fetch();for(;a.text==="\\middle";){n.consume();const u=n.fetch().text;if(!we.math[u])throw new O(`Invalid delimiter '${u}' after '\\middle'`);xr({type:"atom",mode:"math",text:u},{funcName:"\\middle"}),s.push({type:"middle",mode:"math",delim:u}),n.consume(),s=s.concat(n.parseExpression(!1,null,!0)),a=n.fetch()}--n.leftrightDepth,n.expect("\\right",!1);const l=W(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:r.text,right:l.delim}},mathmlBuilder:(e,t)=>{bc(e);const r=Oe(e.body,t);e.left==="."&&(e.left="");const n=new _.MathNode("mo",[Re(e.left,e.mode)]);n.setAttribute("fence","true"),n.setAttribute("form","prefix"),(e.left==="∖"||e.left.indexOf("arrow")>-1)&&n.setAttribute("stretchy","true"),r.unshift(n),e.right==="."&&(e.right="");const s=new _.MathNode("mo",[Re(e.right,e.mode)]);return s.setAttribute("fence","true"),s.setAttribute("form","postfix"),(e.right==="∖"||e.right.indexOf("arrow")>-1)&&s.setAttribute("stretchy","true"),r.push(s),Cs(r)}});B({type:"middle",names:["\\middle"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{const r=xr(t[0],e);if(!e.parser.leftrightDepth)throw new O("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},mathmlBuilder:(e,t)=>{const r=Re(e.delim,e.mode),n=new _.MathNode("mo",[r]);return n.setAttribute("fence","true"),e.delim.indexOf("arrow")>-1&&n.setAttribute("stretchy","true"),n.setAttribute("form","prefix"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});const pa=e=>{const t=new _.MathNode("mspace");return t.setAttribute("width","3pt"),t},Nr=(e,t)=>{let r;switch(e.label.indexOf("colorbox")>-1||e.label==="\\boxed"?r=new _.MathNode("mrow",[pa(),ue(e.body,t),pa()]):r=new _.MathNode("menclose",[ue(e.body,t)]),e.label){case"\\overline":r.setAttribute("notation","top"),r.classes.push("tml-overline");break;case"\\underline":r.setAttribute("notation","bottom"),r.classes.push("tml-underline");break;case"\\cancel":r.setAttribute("notation","updiagonalstrike"),r.children.push(new _.MathNode("mrow",[],["tml-cancel","upstrike"]));break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike"),r.children.push(new _.MathNode("mrow",[],["tml-cancel","downstrike"]));break;case"\\sout":r.setAttribute("notation","horizontalstrike"),r.children.push(new _.MathNode("mrow",[],["tml-cancel","sout"]));break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike"),r.classes.push("tml-xcancel");break;case"\\longdiv":r.setAttribute("notation","longdiv"),r.classes.push("longdiv-top"),r.children.push(new _.MathNode("mrow",[],["longdiv-arc"]));break;case"\\phase":r.setAttribute("notation","phasorangle"),r.classes.push("phasor-bottom"),r.children.push(new _.MathNode("mrow",[],["phasor-angle"]));break;case"\\textcircled":r.setAttribute("notation","circle"),r.classes.push("circle-pad"),r.children.push(new _.MathNode("mrow",[],["textcircle"]));break;case"\\angl":r.setAttribute("notation","actuarial"),r.classes.push("actuarial");break;case"\\boxed":r.setAttribute("notation","box"),r.classes.push("tml-box"),r.setAttribute("scriptlevel","0"),r.setAttribute("displaystyle","true");break;case"\\fbox":r.setAttribute("notation","box"),r.classes.push("tml-fbox");break;case"\\fcolorbox":case"\\colorbox":{const n={padding:"3pt 0 3pt 0"};e.label==="\\fcolorbox"&&(n.border="0.0667em solid "+String(e.borderColor)),r.style=n;break}}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};B({type:"enclose",names:["\\colorbox"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","text"]},handler({parser:e,funcName:t},r,n){const s=n[0]&&W(n[0],"raw").string;let a="";if(s){const u=W(r[0],"raw").string;a=Wt(s,u)}else a=br(W(r[0],"raw").string,e.gullet.macros);const l=r[1];return{type:"enclose",mode:e.mode,label:t,backgroundColor:a,body:l}},mathmlBuilder:Nr});B({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","raw","text"]},handler({parser:e,funcName:t},r,n){const s=n[0]&&W(n[0],"raw").string;let a="",l;if(s){const c=W(r[0],"raw").string,d=W(r[0],"raw").string;a=Wt(s,c),l=Wt(s,d)}else a=br(W(r[0],"raw").string,e.gullet.macros),l=br(W(r[1],"raw").string,e.gullet.macros);const u=r[2];return{type:"enclose",mode:e.mode,label:t,backgroundColor:l,borderColor:a,body:u}},mathmlBuilder:Nr});B({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler({parser:e},t){return{type:"enclose",mode:e.mode,label:"\\fbox",body:t[0]}}});B({type:"enclose",names:["\\angl","\\cancel","\\bcancel","\\xcancel","\\sout","\\overline","\\boxed","\\longdiv","\\phase"],props:{numArgs:1},handler({parser:e,funcName:t},r){const n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:Nr});B({type:"enclose",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler({parser:e,funcName:t},r){const n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:Nr});B({type:"enclose",names:["\\textcircled"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:e,funcName:t},r){const n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:Nr});const Zo={};function Ye({type:e,names:t,props:r,handler:n,mathmlBuilder:s}){const a={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n};for(let l=0;l<t.length;++l)Zo[t[l]]=a;s&&(tn[e]=s)}const ye={DISPLAY:0,TEXT:1,SCRIPT:2,SCRIPTSCRIPT:3},Xo={};function h(e,t){Xo[e]=t}const xc=Xo;h("\\noexpand",function(e){const t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});h("\\expandafter",function(e){const t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});h("\\@firstoftwo",function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}});h("\\@secondoftwo",function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}});h("\\@ifnextchar",function(e){const t=e.consumeArgs(3);e.consumeSpaces();const r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});h("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");h("\\TextOrMath",function(e){const t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});const ls=e=>{let t="";for(let r=e.length-1;r>-1;r--)t+=e[r].text;return t},Os={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15},fa=e=>{const t=e.future().text;return t==="EOF"?[null,""]:[Os[t.charAt(0)],t]},ma=(e,t,r)=>{for(let n=1;n<t.length;n++){const s=Os[t.charAt(n)];e*=r,e+=s}return e};h("\\char",function(e){let t=e.popToken(),r,n="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")n=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new O("\\char` missing argument");n=t.text.charCodeAt(0)}else r=10;if(r){let s=t.text;if(n=Os[s.charAt(0)],n==null||n>=r)throw new O(`Invalid base-${r} digit ${t.text}`);n=ma(n,s,r);let a;for([a,s]=fa(e);a!=null&&a<r;)n*=r,n+=a,n=ma(n,s,r),e.popToken(),[a,s]=fa(e)}return`\\@char{${n}}`});function Ps(e){const t=e.consumeArgs(1)[0];let r="",n=t[t.length-1].loc.start;for(let s=t.length-1;s>=0;s--){const a=t[s].loc.start;a>n&&(r+=" ",n=a),r+=t[s].text,n+=t[s].text.length}return r}h("\\surd","\\sqrt{\\vphantom{|}}");h("⊕","\\oplus");h("\\long","");h("\\bgroup","{");h("\\egroup","}");h("~","\\nobreakspace");h("\\lq","`");h("\\rq","'");h("\\aa","\\r a");h("\\Bbbk","\\Bbb{k}");h("\\mathstrut","\\vphantom{(}");h("\\underbar","\\underline{\\text{#1}}");h("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");h("⋮","\\vdots");h("\\arraystretch","1");h("\\arraycolsep","6pt");h("\\substack","\\begin{subarray}{c}#1\\end{subarray}");h("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");h("\\implies","\\DOTSB\\;\\Longrightarrow\\;");h("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");const ga={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcap":"\\dotsb","\\bigsqcup":"\\dotsb","\\bigtimes":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};h("\\dots",function(e){let t="\\dotso";const r=e.expandAfterFuture().text;return r in ga?t=ga[r]:(r.slice(0,4)==="\\not"||r in we.math&&["bin","rel"].includes(we.math[r].group))&&(t="\\dotsb"),t});const $s={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};h("\\dotso",function(e){return e.future().text in $s?"\\ldots\\,":"\\ldots"});h("\\dotsc",function(e){const t=e.future().text;return t in $s&&t!==","?"\\ldots\\,":"\\ldots"});h("\\cdots",function(e){return e.future().text in $s?"\\@cdots\\,":"\\@cdots"});h("\\dotsb","\\cdots");h("\\dotsm","\\cdots");h("\\dotsi","\\!\\cdots");h("\\idotsint","\\dotsi");h("\\dotsx","\\ldots\\,");h("\\DOTSI","\\relax");h("\\DOTSB","\\relax");h("\\DOTSX","\\relax");h("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");h("\\,","{\\tmspace+{3mu}{.1667em}}");h("\\thinspace","\\,");h("\\>","\\mskip{4mu}");h("\\:","{\\tmspace+{4mu}{.2222em}}");h("\\medspace","\\:");h("\\;","{\\tmspace+{5mu}{.2777em}}");h("\\thickspace","\\;");h("\\!","{\\tmspace-{3mu}{.1667em}}");h("\\negthinspace","\\!");h("\\negmedspace","{\\tmspace-{4mu}{.2222em}}");h("\\negthickspace","{\\tmspace-{5mu}{.277em}}");h("\\enspace","\\kern.5em ");h("\\enskip","\\hskip.5em\\relax");h("\\quad","\\hskip1em\\relax");h("\\qquad","\\hskip2em\\relax");h("\\AA","\\TextOrMath{\\Angstrom}{\\mathring{A}}\\relax");h("\\tag","\\@ifstar\\tag@literal\\tag@paren");h("\\tag@paren","\\tag@literal{({#1})}");h("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new O("Multiple \\tag");return"\\def\\df@tag{\\text{#1}}"});h("\\bmod","\\mathbin{\\text{mod}}");h("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");h("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");h("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");h("\\newline","\\\\\\relax");h("\\TeX","\\textrm{T}\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125em\\textrm{X}");h("\\LaTeX","\\textrm{L}\\kern-.35em\\raisebox{0.2em}{\\scriptstyle A}\\kern-.15em\\TeX");h("\\Temml","\\textrm{T}\\kern-0.2em\\lower{0.2em}{\\textrm{E}}\\kern-0.08em{\\textrm{M}\\kern-0.08em\\raise{0.2em}\\textrm{M}\\kern-0.08em\\textrm{L}}");h("\\hspace","\\@ifstar\\@hspacer\\@hspace");h("\\@hspace","\\hskip #1\\relax");h("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");h("\\colon",'\\mathpunct{\\char"3a}');h("\\prescript","\\pres@cript{_{#1}^{#2}}{}{#3}");h("\\ordinarycolon",'\\char"3a');h("\\vcentcolon","\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}}");h("\\coloneq",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2212}');h("\\Coloneq",'\\mathrel{\\char"2237\\char"2212}');h("\\Eqqcolon",'\\mathrel{\\char"3d\\char"2237}');h("\\Eqcolon",'\\mathrel{\\char"2212\\char"2237}');h("\\colonapprox",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2248}');h("\\Colonapprox",'\\mathrel{\\char"2237\\char"2248}');h("\\colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}');h("\\Colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}');h("\\ratio","\\vcentcolon");h("\\coloncolon","\\dblcolon");h("\\colonequals","\\coloneqq");h("\\coloncolonequals","\\Coloneqq");h("\\equalscolon","\\eqqcolon");h("\\equalscoloncolon","\\Eqqcolon");h("\\colonminus","\\coloneq");h("\\coloncolonminus","\\Coloneq");h("\\minuscolon","\\eqcolon");h("\\minuscoloncolon","\\Eqcolon");h("\\coloncolonapprox","\\Colonapprox");h("\\coloncolonsim","\\Colonsim");h("\\notni","\\mathrel{\\char`∌}");h("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");h("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");h("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");h("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");h("\\varlimsup","\\DOTSB\\operatorname*{\\overline{\\text{lim}}}");h("\\varliminf","\\DOTSB\\operatorname*{\\underline{\\text{lim}}}");h("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{\\text{lim}}}");h("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{\\text{lim}}}");h("\\centerdot","{\\medspace\\rule{0.167em}{0.189em}\\medspace}");h("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");h("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");h("\\plim","\\DOTSB\\operatorname*{plim}");h("\\leftmodels","\\mathop{\\reflectbox{$\\models$}}");h("\\bra","\\mathinner{\\langle{#1}|}");h("\\ket","\\mathinner{|{#1}\\rangle}");h("\\braket","\\mathinner{\\langle{#1}\\rangle}");h("\\Bra","\\left\\langle#1\\right|");h("\\Ket","\\left|#1\\right\\rangle");const Yo=(e,t)=>{const r=`}\\,\\middle${t[0]==="|"?"\\vert":"\\Vert"}\\,{`;return e.slice(0,t.index)+r+e.slice(t.index+t[0].length)};h("\\Braket",function(e){let t=Ps(e);const r=/\|\||\||\\\|/g;let n;for(;(n=r.exec(t))!==null;)t=Yo(t,n);return"\\left\\langle{"+t+"}\\right\\rangle"});h("\\Set",function(e){let t=Ps(e);const r=/\|\||\||\\\|/.exec(t);return r&&(t=Yo(t,r)),"\\left\\{\\:{"+t+"}\\:\\right\\}"});h("\\set",function(e){return"\\{{"+Ps(e).replace(/\|/,"}\\mid{")+"}\\}"});h("\\angln","{\\angl n}");h("\\odv","\\@ifstar\\odv@next\\odv@numerator");h("\\odv@numerator","\\frac{\\mathrm{d}#1}{\\mathrm{d}#2}");h("\\odv@next","\\frac{\\mathrm{d}}{\\mathrm{d}#2}#1");h("\\pdv","\\@ifstar\\pdv@next\\pdv@numerator");const Ko=e=>{const t=e[0][0].text,r=ls(e[1]).split(","),n=String(r.length),s=n==="1"?"\\partial":`\\partial^${n}`;let a="";return r.map(l=>{a+="\\partial "+l.trim()+"\\,"}),[t,s,a.replace(/\\,$/,"")]};h("\\pdv@numerator",function(e){const[t,r,n]=Ko(e.consumeArgs(2));return`\\frac{${r} ${t}}{${n}}`});h("\\pdv@next",function(e){const[t,r,n]=Ko(e.consumeArgs(2));return`\\frac{${r}}{${n}} ${t}`});h("\\upalpha","\\up@greek{\\alpha}");h("\\upbeta","\\up@greek{\\beta}");h("\\upgamma","\\up@greek{\\gamma}");h("\\updelta","\\up@greek{\\delta}");h("\\upepsilon","\\up@greek{\\epsilon}");h("\\upzeta","\\up@greek{\\zeta}");h("\\upeta","\\up@greek{\\eta}");h("\\uptheta","\\up@greek{\\theta}");h("\\upiota","\\up@greek{\\iota}");h("\\upkappa","\\up@greek{\\kappa}");h("\\uplambda","\\up@greek{\\lambda}");h("\\upmu","\\up@greek{\\mu}");h("\\upnu","\\up@greek{\\nu}");h("\\upxi","\\up@greek{\\xi}");h("\\upomicron","\\up@greek{\\omicron}");h("\\uppi","\\up@greek{\\pi}");h("\\upalpha","\\up@greek{\\alpha}");h("\\uprho","\\up@greek{\\rho}");h("\\upsigma","\\up@greek{\\sigma}");h("\\uptau","\\up@greek{\\tau}");h("\\upupsilon","\\up@greek{\\upsilon}");h("\\upphi","\\up@greek{\\phi}");h("\\upchi","\\up@greek{\\chi}");h("\\uppsi","\\up@greek{\\psi}");h("\\upomega","\\up@greek{\\omega}");h("\\invamp",'\\mathbin{\\char"214b}');h("\\parr",'\\mathbin{\\char"214b}');h("\\with",'\\mathbin{\\char"26}');h("\\multimapinv",'\\mathrel{\\char"27dc}');h("\\multimapboth",'\\mathrel{\\char"29df}');h("\\scoh",'{\\mkern5mu\\char"2322\\mkern5mu}');h("\\sincoh",'{\\mkern5mu\\char"2323\\mkern5mu}');h("\\coh",`{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2322}}}
{\\smash{\\lower4mu{\\char"2323}}}\\mkern5mu}`);h("\\incoh",`{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2323}}}
{\\smash{\\lower4mu{\\char"2322}}}\\mkern5mu}`);h("\\standardstate","\\text{\\tiny\\char`⦵}");h("\\ce",function(e){return Qo(e.consumeArgs(1)[0],"ce")});h("\\pu",function(e){return Qo(e.consumeArgs(1)[0],"pu")});h("\\uniDash","{\\rule{0.672em}{0.06em}}");h("\\triDash","{\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}}");h("\\tripleDash","\\kern0.075em\\raise0.25em{\\triDash}\\kern0.075em");h("\\tripleDashOverLine","\\kern0.075em\\mathrlap{\\raise0.125em{\\uniDash}}\\raise0.34em{\\triDash}\\kern0.075em");h("\\tripleDashOverDoubleLine","\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\triDash}}\\raise0.27em{\\uniDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em");h("\\tripleDashBetweenDoubleLine","\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\uniDash}}\\raise0.27em{\\triDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em");var Qo=function(e,t){for(var r="",n=e.length&&e[e.length-1].loc.start,s=e.length-1;s>=0;s--)e[s].loc.start>n&&(r+=" ",n=e[s].loc.start),r+=e[s].text,n+=e[s].text.length;var a=he.go(C.go(r,t));return a},C={go:function(e,t){if(!e)return[];t===void 0&&(t="ce");var r="0",n={};n.parenthesisLevel=0,e=e.replace(/\n/g," "),e=e.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),e=e.replace(/[\u2026]/g,"...");for(var s,a=10,l=[];;){s!==e?(a=10,s=e):a--;var u=C.stateMachines[t],c=u.transitions[r]||u.transitions["*"];e:for(var d=0;d<c.length;d++){var p=C.patterns.match_(c[d].pattern,e);if(p){for(var x=c[d].task,f=0;f<x.action_.length;f++){var v;if(u.actions[x.action_[f].type_])v=u.actions[x.action_[f].type_](n,p.match_,x.action_[f].option);else if(C.actions[x.action_[f].type_])v=C.actions[x.action_[f].type_](n,p.match_,x.action_[f].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+x.action_[f].type_+")"];C.concatArray(l,v)}if(r=x.nextState||r,e.length>0){if(x.revisit||(e=p.remainder),!x.toContinue)break e}else return l}}if(a<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(e,t){if(t)if(Array.isArray(t))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"(-)(9)^(-9)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"state of aggregation $":function(e){var t=C.patterns.findObserveGroups(e,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(t&&t.remainder.match(/^($|[\s,;\)\]\}])/))return t;var r=e.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return r?{match_:r[0],remainder:e.substr(r[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(e){return C.patterns.findObserveGroups(e,"^{","","","}")},"^($...$)":function(e){return C.patterns.findObserveGroups(e,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(e){return C.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(e){return C.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(e){return C.patterns.findObserveGroups(e,"_{","","","}")},"_($...$)":function(e){return C.patterns.findObserveGroups(e,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(e){return C.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(e){return C.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(e){return C.patterns.findObserveGroups(e,"","{","}","")},"{(...)}":function(e){return C.patterns.findObserveGroups(e,"{","","","}")},"$...$":function(e){return C.patterns.findObserveGroups(e,"","$","$","")},"${(...)}$":function(e){return C.patterns.findObserveGroups(e,"${","","","}$")},"$(...)$":function(e){return C.patterns.findObserveGroups(e,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(e){return C.patterns.findObserveGroups(e,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(e){return C.patterns.findObserveGroups(e,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(e){return C.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(e){return C.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(e){return C.patterns.findObserveGroups(e,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(e){return C.patterns.findObserveGroups(e,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(e){return C.patterns.findObserveGroups(e,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(e){return C.patterns.findObserveGroups(e,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(e){return C.patterns.findObserveGroups(e,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(e){return C.patterns.findObserveGroups(e,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(e){return C.patterns.findObserveGroups(e,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(e){return C.patterns.findObserveGroups(e,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(e){var t;if(t=e.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),t)return{match_:t[0],remainder:e.substr(t[0].length)};var r=C.patterns.findObserveGroups(e,"","$","$","");return r&&(t=r.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),t)?{match_:t[0],remainder:e.substr(t[0].length)}:null},amount2:function(e){return this.amount(e)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(e){if(e.match(/^\([a-z]+\)$/))return null;var t=e.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return t?{match_:t[0],remainder:e.substr(t[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(e,t,r,n,s,a,l,u,c,d){var p=function(w,k){if(typeof k=="string")return w.indexOf(k)!==0?null:k;var P=w.match(k);return P?P[0]:null},x=function(w,k,P){for(var j=0;k<w.length;){var F=w.charAt(k),z=p(w.substr(k),P);if(z!==null&&j===0)return{endMatchBegin:k,endMatchEnd:k+z.length};if(F==="{")j++;else if(F==="}"){if(j===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];j--}k++}return null},f=p(e,t);if(f===null||(e=e.substr(f.length),f=p(e,r),f===null))return null;var v=x(e,f.length,n||s);if(v===null)return null;var M=e.substring(0,n?v.endMatchEnd:v.endMatchBegin);if(a||l){var I=this.findObserveGroups(e.substr(v.endMatchEnd),a,l,u,c);if(I===null)return null;var L=[M,I.match_];return{match_:d?L.join(""):L,remainder:I.remainder}}else return{match_:M,remainder:e.substr(v.endMatchEnd)}},match_:function(e,t){var r=C.patterns.patterns[e];if(r===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+e+")"];if(typeof r=="function")return C.patterns.patterns[e](t);var n=t.match(r);if(n){var s;return n[2]?s=[n[1],n[2]]:n[1]?s=n[1]:s=n[0],{match_:s,remainder:t.substr(n[0].length)}}return null}},actions:{"a=":function(e,t){e.a=(e.a||"")+t},"b=":function(e,t){e.b=(e.b||"")+t},"p=":function(e,t){e.p=(e.p||"")+t},"o=":function(e,t){e.o=(e.o||"")+t},"q=":function(e,t){e.q=(e.q||"")+t},"d=":function(e,t){e.d=(e.d||"")+t},"rm=":function(e,t){e.rm=(e.rm||"")+t},"text=":function(e,t){e.text_=(e.text_||"")+t},insert:function(e,t,r){return{type_:r}},"insert+p1":function(e,t,r){return{type_:r,p1:t}},"insert+p1+p2":function(e,t,r){return{type_:r,p1:t[0],p2:t[1]}},copy:function(e,t){return t},rm:function(e,t){return{type_:"rm",p1:t||""}},text:function(e,t){return C.go(t,"text")},"{text}":function(e,t){var r=["{"];return C.concatArray(r,C.go(t,"text")),r.push("}"),r},"tex-math":function(e,t){return C.go(t,"tex-math")},"tex-math tight":function(e,t){return C.go(t,"tex-math tight")},bond:function(e,t,r){return{type_:"bond",kind_:r||t}},"color0-output":function(e,t){return{type_:"color0",color:t[0]}},ce:function(e,t){return C.go(t)},"1/2":function(e,t){var r=[];t.match(/^[+\-]/)&&(r.push(t.substr(0,1)),t=t.substr(1));var n=t.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),r.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),r.push({type_:"tex-math",p1:n[3]})),r},"9,9":function(e,t){return C.go(t,"9,9")}},createTransitions:function(e){var t,r,n,s,a={};for(t in e)for(r in e[t])for(n=r.split("|"),e[t][r].stateArray=n,s=0;s<n.length;s++)a[n[s]]=[];for(t in e)for(r in e[t])for(n=e[t][r].stateArray||[],s=0;s<n.length;s++){var l=e[t][r];if(l.action_){l.action_=[].concat(l.action_);for(var u=0;u<l.action_.length;u++)typeof l.action_[u]=="string"&&(l.action_[u]={type_:l.action_[u]})}else l.action_=[];for(var c=t.split("|"),d=0;d<c.length;d++)if(n[s]==="*")for(var p in a)a[p].push({pattern:c[d],task:l});else a[n[s]].push({pattern:c[d],task:l})}return a},stateMachines:{}};C.stateMachines={ce:{transitions:C.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(e,t){var r;if((e.d||"").match(/^[0-9]+$/)){var n=e.d;e.d=void 0,r=this.output(e),e.b=n}else r=this.output(e);return C.actions["o="](e,t),r},"d= kv":function(e,t){e.d=t,e.dType="kv"},"charge or bond":function(e,t){if(e.beginsWithBond){var r=[];return C.concatArray(r,this.output(e)),C.concatArray(r,C.actions.bond(e,t,"-")),r}else e.d=t},"- after o/d":function(e,t,r){var n=C.patterns.match_("orbital",e.o||""),s=C.patterns.match_("one lowercase greek letter $",e.o||""),a=C.patterns.match_("one lowercase latin letter $",e.o||""),l=C.patterns.match_("$one lowercase latin letter$ $",e.o||""),u=t==="-"&&(n&&n.remainder===""||s||a||l);u&&!e.a&&!e.b&&!e.p&&!e.d&&!e.q&&!n&&a&&(e.o="$"+e.o+"$");var c=[];return u?(C.concatArray(c,this.output(e)),c.push({type_:"hyphen"})):(n=C.patterns.match_("digits",e.d||""),r&&n&&n.remainder===""?(C.concatArray(c,C.actions["d="](e,t)),C.concatArray(c,this.output(e))):(C.concatArray(c,this.output(e)),C.concatArray(c,C.actions.bond(e,t,"-")))),c},"a to o":function(e){e.o=e.a,e.a=void 0},"sb=true":function(e){e.sb=!0},"sb=false":function(e){e.sb=!1},"beginsWithBond=true":function(e){e.beginsWithBond=!0},"beginsWithBond=false":function(e){e.beginsWithBond=!1},"parenthesisLevel++":function(e){e.parenthesisLevel++},"parenthesisLevel--":function(e){e.parenthesisLevel--},"state of aggregation":function(e,t){return{type_:"state of aggregation",p1:C.go(t,"o")}},comma:function(e,t){var r=t.replace(/\s*$/,""),n=r!==t;return n&&e.parenthesisLevel===0?{type_:"comma enumeration L",p1:r}:{type_:"comma enumeration M",p1:r}},output:function(e,t,r){var n;if(!e.r)n=[],!e.a&&!e.b&&!e.p&&!e.o&&!e.q&&!e.d&&!r||(e.sb&&n.push({type_:"entitySkip"}),!e.o&&!e.q&&!e.d&&!e.b&&!e.p&&r!==2?(e.o=e.a,e.a=void 0):!e.o&&!e.q&&!e.d&&(e.b||e.p)?(e.o=e.a,e.d=e.b,e.q=e.p,e.a=e.b=e.p=void 0):e.o&&e.dType==="kv"&&C.patterns.match_("d-oxidation$",e.d||"")?e.dType="oxidation":e.o&&e.dType==="kv"&&!e.q&&(e.dType=void 0),n.push({type_:"chemfive",a:C.go(e.a,"a"),b:C.go(e.b,"bd"),p:C.go(e.p,"pq"),o:C.go(e.o,"o"),q:C.go(e.q,"pq"),d:C.go(e.d,e.dType==="oxidation"?"oxidation":"bd"),dType:e.dType}));else{var s;e.rdt==="M"?s=C.go(e.rd,"tex-math"):e.rdt==="T"?s=[{type_:"text",p1:e.rd||""}]:s=C.go(e.rd);var a;e.rqt==="M"?a=C.go(e.rq,"tex-math"):e.rqt==="T"?a=[{type_:"text",p1:e.rq||""}]:a=C.go(e.rq),n={type_:"arrow",r:e.r,rd:s,rq:a}}for(var l in e)l!=="parenthesisLevel"&&l!=="beginsWithBond"&&delete e[l];return n},"oxidation-output":function(e,t){var r=["{"];return C.concatArray(r,C.go(t,"oxidation")),r.push("}"),r},"frac-output":function(e,t){return{type_:"frac-ce",p1:C.go(t[0]),p2:C.go(t[1])}},"overset-output":function(e,t){return{type_:"overset",p1:C.go(t[0]),p2:C.go(t[1])}},"underset-output":function(e,t){return{type_:"underset",p1:C.go(t[0]),p2:C.go(t[1])}},"underbrace-output":function(e,t){return{type_:"underbrace",p1:C.go(t[0]),p2:C.go(t[1])}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:C.go(t[1])}},"r=":function(e,t){e.r=t},"rdt=":function(e,t){e.rdt=t},"rd=":function(e,t){e.rd=t},"rqt=":function(e,t){e.rqt=t},"rq=":function(e,t){e.rq=t},operator:function(e,t,r){return{type_:"operator",kind_:r||t}}}},a:{transitions:C.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:C.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:C.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(e){if(e.text_){var t={type_:"text",p1:e.text_};for(var r in e)delete e[r];return t}}}},pq:{transitions:C.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(e,t){return{type_:"state of aggregation subscript",p1:C.go(t,"o")}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:C.go(t[1],"pq")}}}},bd:{transitions:C.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(e,t){return{type_:"color",color1:t[0],color2:C.go(t[1],"bd")}}}},oxidation:{transitions:C.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(e,t){return{type_:"roman numeral",p1:t||""}}}},"tex-math":{transitions:C.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return t}}}},"tex-math tight":{transitions:C.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(e,t){e.o=(e.o||"")+"{"+t+"}"},output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return t}}}},"9,9":{transitions:C.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:C.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(e,t){var r=[];return t[0]==="+-"||t[0]==="+/-"?r.push("\\pm "):t[0]&&r.push(t[0]),t[1]&&(C.concatArray(r,C.go(t[1],"pu-9,9")),t[2]&&(t[2].match(/[,.]/)?C.concatArray(r,C.go(t[2],"pu-9,9")):r.push(t[2])),t[3]=t[4]||t[3],t[3]&&(t[3]=t[3].trim(),t[3]==="e"||t[3].substr(0,1)==="*"?r.push({type_:"cdot"}):r.push({type_:"times"}))),t[3]&&r.push("10^{"+t[5]+"}"),r},"number^":function(e,t){var r=[];return t[0]==="+-"||t[0]==="+/-"?r.push("\\pm "):t[0]&&r.push(t[0]),C.concatArray(r,C.go(t[1],"pu-9,9")),r.push("^{"+t[2]+"}"),r},operator:function(e,t,r){return{type_:"operator",kind_:r||t}},space:function(){return{type_:"pu-space-1"}},output:function(e){var t,r=C.patterns.match_("{(...)}",e.d||"");r&&r.remainder===""&&(e.d=r.match_);var n=C.patterns.match_("{(...)}",e.q||"");if(n&&n.remainder===""&&(e.q=n.match_),e.d&&(e.d=e.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.d=e.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),e.q){e.q=e.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.q=e.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var s={d:C.go(e.d,"pu"),q:C.go(e.q,"pu")};e.o==="//"?t={type_:"pu-frac",p1:s.d,p2:s.q}:(t=s.d,s.d.length>1||s.q.length>1?t.push({type_:" / "}):t.push({type_:"/"}),C.concatArray(t,s.q))}else t=C.go(e.d,"pu-2");for(var a in e)delete e[a];return t}}},"pu-2":{transitions:C.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(e,t){e.rm+="^{"+t+"}"},space:function(){return{type_:"pu-space-2"}},output:function(e){var t=[];if(e.rm){var r=C.patterns.match_("{(...)}",e.rm||"");r&&r.remainder===""?t=C.go(r.match_,"pu"):t={type_:"rm",p1:e.rm}}for(var n in e)delete e[n];return t}}},"pu-9,9":{transitions:C.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){var r=e.text_.length%3;r===0&&(r=3);for(var n=e.text_.length-3;n>0;n-=3)t.push(e.text_.substr(n,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(0,r)),t.reverse()}else t.push(e.text_);for(var s in e)delete e[s];return t},"output-o":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){for(var r=e.text_.length-3,n=0;n<r;n+=3)t.push(e.text_.substr(n,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(n))}else t.push(e.text_);for(var s in e)delete e[s];return t}}}};var he={go:function(e,t){if(!e)return"";for(var r="",n=!1,s=0;s<e.length;s++){var a=e[s];typeof a=="string"?r+=a:(r+=he._go2(a),a.type_==="1st-level escape"&&(n=!0))}return!t&&!n&&r&&(r="{"+r+"}"),r},_goInner:function(e){return e&&he.go(e,!0)},_go2:function(e){var t;switch(e.type_){case"chemfive":t="";var r={a:he._goInner(e.a),b:he._goInner(e.b),p:he._goInner(e.p),o:he._goInner(e.o),q:he._goInner(e.q),d:he._goInner(e.d)};r.a&&(r.a.match(/^[+\-]/)&&(r.a="{"+r.a+"}"),t+=r.a+"\\,"),(r.b||r.p)&&(t+="{\\vphantom{X}}",t+="^{\\hphantom{"+(r.b||"")+"}}_{\\hphantom{"+(r.p||"")+"}}",t+="{\\vphantom{X}}",t+="^{\\vphantom{2}\\mathllap{"+(r.b||"")+"}}",t+="_{\\vphantom{2}\\mathllap{"+(r.p||"")+"}}"),r.o&&(r.o.match(/^[+\-]/)&&(r.o="{"+r.o+"}"),t+=r.o),e.dType==="kv"?((r.d||r.q)&&(t+="{\\vphantom{X}}"),r.d&&(t+="^{"+r.d+"}"),r.q&&(t+="_{"+r.q+"}")):e.dType==="oxidation"?(r.d&&(t+="{\\vphantom{X}}",t+="^{"+r.d+"}"),r.q&&(t+="{{}}",t+="_{"+r.q+"}")):(r.q&&(t+="{{}}",t+="_{"+r.q+"}"),r.d&&(t+="{{}}",t+="^{"+r.d+"}"));break;case"rm":t="\\mathrm{"+e.p1+"}";break;case"text":e.p1.match(/[\^_]/)?(e.p1=e.p1.replace(" ","~").replace("-","\\text{-}"),t="\\mathrm{"+e.p1+"}"):t="\\text{"+e.p1+"}";break;case"roman numeral":t="\\mathrm{"+e.p1+"}";break;case"state of aggregation":t="\\mskip2mu "+he._goInner(e.p1);break;case"state of aggregation subscript":t="\\mskip1mu "+he._goInner(e.p1);break;case"bond":if(t=he._getBond(e.kind_),!t)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+e.kind_+")"];break;case"frac":var n="\\frac{"+e.p1+"}{"+e.p2+"}";t="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var s="\\frac{"+he._goInner(e.p1)+"}{"+he._goInner(e.p2)+"}";t="\\mathchoice{\\textstyle"+s+"}{"+s+"}{"+s+"}{"+s+"}";break;case"tex-math":t=e.p1+" ";break;case"frac-ce":t="\\frac{"+he._goInner(e.p1)+"}{"+he._goInner(e.p2)+"}";break;case"overset":t="\\overset{"+he._goInner(e.p1)+"}{"+he._goInner(e.p2)+"}";break;case"underset":t="\\underset{"+he._goInner(e.p1)+"}{"+he._goInner(e.p2)+"}";break;case"underbrace":t="\\underbrace{"+he._goInner(e.p1)+"}_{"+he._goInner(e.p2)+"}";break;case"color":t="{\\color{"+e.color1+"}{"+he._goInner(e.color2)+"}}";break;case"color0":t="\\color{"+e.color+"}";break;case"arrow":var a={rd:he._goInner(e.rd),rq:he._goInner(e.rq)},l=he._getArrow(e.r);a.rq&&(l+="[{\\rm "+a.rq+"}]"),a.rd?l+="{\\rm "+a.rd+"}":l+="{}",t=l;break;case"operator":t=he._getOperator(e.kind_);break;case"1st-level escape":t=e.p1+" ";break;case"space":t=" ";break;case"entitySkip":t="~";break;case"pu-space-1":t="~";break;case"pu-space-2":t="\\mkern3mu ";break;case"1000 separator":t="\\mkern2mu ";break;case"commaDecimal":t="{,}";break;case"comma enumeration L":t="{"+e.p1+"}\\mkern6mu ";break;case"comma enumeration M":t="{"+e.p1+"}\\mkern3mu ";break;case"comma enumeration S":t="{"+e.p1+"}\\mkern1mu ";break;case"hyphen":t="\\text{-}";break;case"addition compound":t="\\,{\\cdot}\\,";break;case"electron dot":t="\\mkern1mu \\text{\\textbullet}\\mkern1mu ";break;case"KV x":t="{\\times}";break;case"prime":t="\\prime ";break;case"cdot":t="\\cdot ";break;case"tight cdot":t="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":t="\\times ";break;case"circa":t="{\\sim}";break;case"^":t="uparrow";break;case"v":t="downarrow";break;case"ellipsis":t="\\ldots ";break;case"/":t="/";break;case" / ":t="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return t},_getArrow:function(e){switch(e){case"->":return"\\yields";case"→":return"\\yields";case"⟶":return"\\yields";case"<-":return"\\yieldsLeft";case"<->":return"\\mesomerism";case"<-->":return"\\yieldsLeftRight";case"<=>":return"\\equilibrium";case"⇌":return"\\equilibrium";case"<=>>":return"\\equilibriumRight";case"<<=>":return"\\equilibriumLeft";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(e){switch(e){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripleDash}";case"~-":return"{\\tripleDashOverLine}";case"~=":return"{\\tripleDashOverDoubleLine}";case"~--":return"{\\tripleDashOverDoubleLine}";case"-~-":return"{\\tripleDashBetweenDoubleLine}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(e){switch(e){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}};h("\\darr","\\downarrow");h("\\dArr","\\Downarrow");h("\\Darr","\\Downarrow");h("\\lang","\\langle");h("\\rang","\\rangle");h("\\uarr","\\uparrow");h("\\uArr","\\Uparrow");h("\\Uarr","\\Uparrow");h("\\N","\\mathbb{N}");h("\\R","\\mathbb{R}");h("\\Z","\\mathbb{Z}");h("\\alef","\\aleph");h("\\alefsym","\\aleph");h("\\bull","\\bullet");h("\\clubs","\\clubsuit");h("\\cnums","\\mathbb{C}");h("\\Complex","\\mathbb{C}");h("\\Dagger","\\ddagger");h("\\diamonds","\\diamondsuit");h("\\empty","\\emptyset");h("\\exist","\\exists");h("\\harr","\\leftrightarrow");h("\\hArr","\\Leftrightarrow");h("\\Harr","\\Leftrightarrow");h("\\hearts","\\heartsuit");h("\\image","\\Im");h("\\infin","\\infty");h("\\isin","\\in");h("\\larr","\\leftarrow");h("\\lArr","\\Leftarrow");h("\\Larr","\\Leftarrow");h("\\lrarr","\\leftrightarrow");h("\\lrArr","\\Leftrightarrow");h("\\Lrarr","\\Leftrightarrow");h("\\natnums","\\mathbb{N}");h("\\plusmn","\\pm");h("\\rarr","\\rightarrow");h("\\rArr","\\Rightarrow");h("\\Rarr","\\Rightarrow");h("\\real","\\Re");h("\\reals","\\mathbb{R}");h("\\Reals","\\mathbb{R}");h("\\sdot","\\cdot");h("\\sect","\\S");h("\\spades","\\spadesuit");h("\\sub","\\subset");h("\\sube","\\subseteq");h("\\supe","\\supseteq");h("\\thetasym","\\vartheta");h("\\weierp","\\wp");h("\\quantity","{\\left\\{ #1 \\right\\}}");h("\\qty","{\\left\\{ #1 \\right\\}}");h("\\pqty","{\\left( #1 \\right)}");h("\\bqty","{\\left[ #1 \\right]}");h("\\vqty","{\\left\\vert #1 \\right\\vert}");h("\\Bqty","{\\left\\{ #1 \\right\\}}");h("\\absolutevalue","{\\left\\vert #1 \\right\\vert}");h("\\abs","{\\left\\vert #1 \\right\\vert}");h("\\norm","{\\left\\Vert #1 \\right\\Vert}");h("\\evaluated","{\\left.#1 \\right\\vert}");h("\\eval","{\\left.#1 \\right\\vert}");h("\\order","{\\mathcal{O} \\left( #1 \\right)}");h("\\commutator","{\\left[ #1 , #2 \\right]}");h("\\comm","{\\left[ #1 , #2 \\right]}");h("\\anticommutator","{\\left\\{ #1 , #2 \\right\\}}");h("\\acomm","{\\left\\{ #1 , #2 \\right\\}}");h("\\poissonbracket","{\\left\\{ #1 , #2 \\right\\}}");h("\\pb","{\\left\\{ #1 , #2 \\right\\}}");h("\\vectorbold","{\\boldsymbol{ #1 }}");h("\\vb","{\\boldsymbol{ #1 }}");h("\\vectorarrow","{\\vec{\\boldsymbol{ #1 }}}");h("\\va","{\\vec{\\boldsymbol{ #1 }}}");h("\\vectorunit","{{\\boldsymbol{\\hat{ #1 }}}}");h("\\vu","{{\\boldsymbol{\\hat{ #1 }}}}");h("\\dotproduct","\\mathbin{\\boldsymbol\\cdot}");h("\\vdot","{\\boldsymbol\\cdot}");h("\\crossproduct","\\mathbin{\\boldsymbol\\times}");h("\\cross","\\mathbin{\\boldsymbol\\times}");h("\\cp","\\mathbin{\\boldsymbol\\times}");h("\\gradient","{\\boldsymbol\\nabla}");h("\\grad","{\\boldsymbol\\nabla}");h("\\divergence","{\\grad\\vdot}");h("\\curl","{\\grad\\cross}");h("\\laplacian","\\nabla^2");h("\\tr","{\\operatorname{tr}}");h("\\Tr","{\\operatorname{Tr}}");h("\\rank","{\\operatorname{rank}}");h("\\erf","{\\operatorname{erf}}");h("\\Res","{\\operatorname{Res}}");h("\\principalvalue","{\\mathcal{P}}");h("\\pv","{\\mathcal{P}}");h("\\PV","{\\operatorname{P.V.}}");h("\\qqtext","{\\quad\\text{ #1 }\\quad}");h("\\qq","{\\quad\\text{ #1 }\\quad}");h("\\qcomma","{\\text{,}\\quad}");h("\\qc","{\\text{,}\\quad}");h("\\qcc","{\\quad\\text{c.c.}\\quad}");h("\\qif","{\\quad\\text{if}\\quad}");h("\\qthen","{\\quad\\text{then}\\quad}");h("\\qelse","{\\quad\\text{else}\\quad}");h("\\qotherwise","{\\quad\\text{otherwise}\\quad}");h("\\qunless","{\\quad\\text{unless}\\quad}");h("\\qgiven","{\\quad\\text{given}\\quad}");h("\\qusing","{\\quad\\text{using}\\quad}");h("\\qassume","{\\quad\\text{assume}\\quad}");h("\\qsince","{\\quad\\text{since}\\quad}");h("\\qlet","{\\quad\\text{let}\\quad}");h("\\qfor","{\\quad\\text{for}\\quad}");h("\\qall","{\\quad\\text{all}\\quad}");h("\\qeven","{\\quad\\text{even}\\quad}");h("\\qodd","{\\quad\\text{odd}\\quad}");h("\\qinteger","{\\quad\\text{integer}\\quad}");h("\\qand","{\\quad\\text{and}\\quad}");h("\\qor","{\\quad\\text{or}\\quad}");h("\\qas","{\\quad\\text{as}\\quad}");h("\\qin","{\\quad\\text{in}\\quad}");h("\\differential","{\\text{d}}");h("\\dd","{\\text{d}}");h("\\derivative","{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}");h("\\dv","{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}");h("\\partialderivative","{\\frac{\\partial{ #1 }}{\\partial{ #2 }}}");h("\\variation","{\\delta}");h("\\var","{\\delta}");h("\\functionalderivative","{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}");h("\\fdv","{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}");h("\\innerproduct","{\\left\\langle {#1} \\mid { #2} \\right\\rangle}");h("\\outerproduct","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");h("\\dyad","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");h("\\ketbra","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");h("\\op","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");h("\\expectationvalue","{\\left\\langle {#1 } \\right\\rangle}");h("\\expval","{\\left\\langle {#1 } \\right\\rangle}");h("\\ev","{\\left\\langle {#1 } \\right\\rangle}");h("\\matrixelement","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");h("\\matrixel","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");h("\\mel","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");function ba(e){const t=[];e.consumeSpaces();let r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}const Tr=e=>{if(!e.parser.settings.displayMode)throw new O(`{${e.envName}} can be used only in display mode.`)},yc=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/,Jo=e=>{let t=e.get("\\arraystretch");typeof t!="string"&&(t=ls(t.tokens)),t=isNaN(t)?null:Number(t);let r=e.get("\\arraycolsep");typeof r!="string"&&(r=ls(r.tokens));const n=yc.exec(r),s=n?{number:+(n[1]+n[2]),unit:n[3]}:null;return[t,s]},vc=(e,t,r)=>{let n;const s=e.tags.shift();if(s)if(s.body)n=dt(s.body,t,!0),n.classes=["tml-tag"];else return n=new _.MathNode("mtext",[],[]),n;else{if(e.envClasses.includes("multline")&&(e.leqno&&r!==0||!e.leqno&&r!==e.body.length-1))return n=new _.MathNode("mtext",[],[]),n;n=new _.MathNode("mtext",[new Do(["tml-eqn"])])}return n};function ht(e,{cols:t,envClasses:r,addEqnNum:n,singleRow:s,emptySingleRow:a,maxNumCols:l,leqno:u,arraystretch:c,arraycolsep:d},p){e.gullet.beginGroup(),s||e.gullet.macros.set("\\cr","\\\\\\relax"),n&&(e.gullet.macros.set("\\tag","\\@ifstar\\envtag@literal\\envtag@paren"),e.gullet.macros.set("\\envtag@paren","\\env@tag{{(\\text{#1})}}"),e.gullet.macros.set("\\envtag@literal","\\env@tag{\\text{#1}}"),e.gullet.macros.set("\\notag","\\env@notag"),e.gullet.macros.set("\\nonumber","\\env@notag")),e.gullet.beginGroup();let x=[];const f=[x],v=[],M=[];let I;const L=[];for(L.push(ba(e));;){let w=e.parseExpression(!1,s?"\\end":"\\\\");if(n&&!I){for(let P=0;P<w.length;P++)if(w[P].type==="envTag"||w[P].type==="noTag"){I=w[P].type==="envTag"?w.splice(P,1)[0].body.body[0]:{body:null};break}}e.gullet.endGroup(),e.gullet.beginGroup(),w={type:"ordgroup",mode:e.mode,body:w,semisimple:!0},x.push(w);const k=e.fetch().text;if(k==="&"){if(l&&x.length===l)if(r.includes("array")){if(e.settings.strict)throw new O("Too few columns specified in the {array} column argument.",e.nextToken)}else throw l===2?new O("The split environment accepts no more than two columns",e.nextToken):new O("The equation environment accepts only one column",e.nextToken);e.consume()}else if(k==="\\end"){x.length===1&&w.body.length===0&&(f.length>1||!a)&&f.pop(),L.length<f.length+1&&L.push([]);break}else if(k==="\\\\"){e.consume();let P;e.gullet.future().text!==" "&&(P=e.parseSizeGroup(!0)),v.push(P?P.value:null),M.push(I),L.push(ba(e)),x=[],I=null,f.push(x)}else throw new O("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),M.push(I),{type:"array",mode:e.mode,body:f,cols:t,rowGaps:v,hLinesBeforeRow:L,envClasses:r,addEqnNum:n,scriptLevel:p,tags:M,leqno:u,arraystretch:c,arraycolsep:d}}function ei(e){return e.slice(0,1)==="d"?"display":"text"}const wc={c:"center ",l:"left ",r:"right "},xa=e=>{const t=new _.MathNode("mtd",[]);return t.style={padding:"0",width:"50%"},e.envClasses.includes("multline")&&(t.style.width="7.5%"),t},Ke=function(e,t){const r=[],n=e.body.length,s=e.hLinesBeforeRow;for(let u=0;u<n;u++){const c=e.body[u],d=[],p=e.scriptLevel==="text"?ye.TEXT:e.scriptLevel==="script"?ye.SCRIPT:ye.DISPLAY;for(let f=0;f<c.length;f++){const v=new _.MathNode("mtd",[ue(c[f],t.withLevel(p))]);if(e.envClasses.includes("multline")){const M=u===0?"left":u===n-1?"right":"center";v.setAttribute("columnalign",M),M!=="center"&&v.classes.push("tml-"+M)}d.push(v)}if(e.addEqnNum){d.unshift(xa(e)),d.push(xa(e));const f=vc(e,t.withLevel(p),u);e.leqno?(d[0].children.push(f),d[0].classes.push("tml-left")):(d[d.length-1].children.push(f),d[d.length-1].classes.push("tml-right"))}const x=new _.MathNode("mtr",d,[]);u===0&&s[0].length>0&&(s[0].length===2?x.children.forEach(f=>{f.style.borderTop="0.15em double"}):x.children.forEach(f=>{f.style.borderTop=s[0][0]?"0.06em dashed":"0.06em solid"})),s[u+1].length>0&&(s[u+1].length===2?x.children.forEach(f=>{f.style.borderBottom="0.15em double"}):x.children.forEach(f=>{f.style.borderBottom=s[u+1][0]?"0.06em dashed":"0.06em solid"})),r.push(x)}if(e.envClasses.length>0){let u=e.envClasses.includes("jot")?"0.7":e.envClasses.includes("small")?"0.35":"0.5";e.arraystretch&&e.arraystretch!==1&&(u=String(1.4*e.arraystretch-.8));let c=e.envClasses.includes("abut")||e.envClasses.includes("cases")?"0":e.envClasses.includes("small")?"0.1389":e.envClasses.includes("cd")?"0.25":"0.4",d="em";if(e.arraycolsep){const v=rt(e.arraycolsep,t);c=v.number,d=v.unit}const p=r.length===0?0:r[0].children.length,x=(v,M)=>v===0&&M===0||v===p-1&&M===1?"0":e.envClasses[0]!=="align"?c:M===1?"0":e.addEqnNum?v%2?"1":"0":v%2?"0":"1";for(let v=0;v<r.length;v++)for(let M=0;M<r[v].children.length;M++)r[v].children[M].style.padding=`${u}ex ${x(M,1)}${d} ${u}ex ${x(M,0)}${d}`;const f=e.envClasses.includes("align")||e.envClasses.includes("alignat");for(let v=0;v<r.length;v++){const M=r[v];if(f){for(let I=0;I<M.children.length;I++)M.children[I].classes=["tml-"+(I%2?"left":"right")];if(e.addEqnNum){const I=e.leqno?0:M.children.length-1;M.children[I].classes=["tml-"+(e.leqno?"left":"right")]}}if(M.children.length>1&&e.envClasses.includes("cases")&&(M.children[1].style.padding=M.children[1].style.padding.replace(/0em$/,"1em")),e.envClasses.includes("cases")||e.envClasses.includes("subarray"))for(const I of M.children)I.classes.push("tml-left")}}else for(let u=0;u<r.length;u++)r[u].children[0].style.paddingLeft="0em",r[u].children.length===r[0].children.length&&(r[u].children[r[u].children.length-1].style.paddingRight="0em");let a=new _.MathNode("mtable",r);e.scriptLevel==="display"&&a.setAttribute("displaystyle","true"),(e.addEqnNum||e.envClasses.includes("multline"))&&(a.style.width="100%");let l="";if(e.cols&&e.cols.length>0){const u=e.cols;let c=!1,d=0,p=u.length;for(;u[d].type==="separator";)d+=1;for(;u[p-1].type==="separator";)p-=1;if(u[0].type==="separator"){const f=u[1].type==="separator"?"0.15em double":u[0].separator==="|"?"0.06em solid ":"0.06em dashed ";for(const v of a.children)v.children[0].style.borderLeft=f}let x=e.addEqnNum?0:-1;for(let f=d;f<p;f++)if(u[f].type==="align"){const v=wc[u[f].align];l+=v,x+=1;for(const M of a.children)v.trim()!=="center"&&x<M.children.length&&(M.children[x].classes=["tml-"+v.trim()]);c=!0}else if(u[f].type==="separator"){if(c){const v=u[f+1].type==="separator"?"0.15em double":u[f].separator==="|"?"0.06em solid":"0.06em dashed";for(const M of a.children)x<M.children.length&&(M.children[x].style.borderRight=v)}c=!1}if(u[u.length-1].type==="separator"){const f=u[u.length-2].type==="separator"?"0.15em double":u[u.length-1].separator==="|"?"0.06em solid":"0.06em dashed";for(const v of a.children)v.children[v.children.length-1].style.borderRight=f,v.children[v.children.length-1].style.paddingRight="0.4em"}}return e.addEqnNum&&(l="left "+(l.length>0?l:"center ")+"right "),l&&a.setAttribute("columnalign",l.trim()),e.envClasses.includes("small")&&(a=new _.MathNode("mstyle",[a]),a.setAttribute("scriptlevel","1")),a},ti=function(e,t){e.envName.indexOf("ed")===-1&&Tr(e);const r=[],n=ht(e.parser,{cols:r,addEqnNum:e.envName==="align"||e.envName==="alignat",emptySingleRow:!0,envClasses:["abut","jot"],maxNumCols:e.envName==="split"?2:void 0,leqno:e.parser.settings.leqno},"display");let s,a=0;const l=e.envName.indexOf("at")>-1;if(t[0]&&l){let u="";for(let c=0;c<t[0].body.length;c++){const d=W(t[0].body[c],"textord");u+=d.text}if(isNaN(u))throw new O("The alignat enviroment requires a numeric first argument.");s=Number(u),a=s*2}n.body.forEach(function(u){if(l){const c=u.length/2;if(s<c)throw new O(`Too many math in a row: expected ${s}, but got ${c}`,u[0])}else a<u.length&&(a=u.length)});for(let u=0;u<a;++u){let c="r";u%2===1&&(c="l"),r[u]={type:"align",align:c}}return e.envName==="split"||(l?n.envClasses.push("alignat"):n.envClasses[0]="align"),n};Ye({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){const r=(fn(t[0])?[t[0]]:W(t[0],"ordgroup").body).map(function(l){const u=Is(l).text;if("lcr".indexOf(u)!==-1)return{type:"align",align:u};if(u==="|")return{type:"separator",separator:"|"};if(u===":")return{type:"separator",separator:":"};throw new O("Unknown column alignment: "+u,l)}),[n,s]=Jo(e.parser.gullet.macros),a={cols:r,envClasses:["array"],maxNumCols:r.length,arraystretch:n,arraycolsep:s};return ht(e.parser,a,ei(e.envName))},mathmlBuilder:Ke});Ye({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){const t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")];let r="c";const n={envClasses:[],cols:[]};if(e.envName.charAt(e.envName.length-1)==="*"){const u=e.parser;if(u.consumeSpaces(),u.fetch().text==="["){if(u.consume(),u.consumeSpaces(),r=u.fetch().text,"lcr".indexOf(r)===-1)throw new O("Expected l or c or r",u.nextToken);u.consume(),u.consumeSpaces(),u.expect("]"),u.consume(),n.cols=[]}}const s=ht(e.parser,n,"text");s.cols=new Array(s.body[0].length).fill({type:"align",align:r});const[a,l]=Jo(e.parser.gullet.macros);return t?{type:"leftright",mode:e.mode,body:[s],left:t[0],right:t[1],rightColor:void 0,arraystretch:a,arraycolsep:l}:s},mathmlBuilder:Ke});Ye({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){const t={type:"small"},r=ht(e.parser,t,"script");return r.envClasses=["small"],r},mathmlBuilder:Ke});Ye({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){const r=(fn(t[0])?[t[0]]:W(t[0],"ordgroup").body).map(function(s){const a=Is(s).text;if("lc".indexOf(a)!==-1)return{type:"align",align:a};throw new O("Unknown column alignment: "+a,s)});if(r.length>1)throw new O("{subarray} can contain only one column");let n={cols:r,envClasses:["small"]};if(n=ht(e.parser,n,"script"),n.body.length>0&&n.body[0].length>1)throw new O("{subarray} can contain only one column");return n},mathmlBuilder:Ke});Ye({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){const t={cols:[],envClasses:["cases"]},r=ht(e.parser,t,ei(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},mathmlBuilder:Ke});Ye({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:ti,mathmlBuilder:Ke});Ye({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:ti,mathmlBuilder:Ke});Ye({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){e.envName!=="gathered"&&Tr(e);const t={cols:[],envClasses:["abut","jot"],addEqnNum:e.envName==="gather",emptySingleRow:!0,leqno:e.parser.settings.leqno};return ht(e.parser,t,"display")},mathmlBuilder:Ke});Ye({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){Tr(e);const t={addEqnNum:e.envName==="equation",emptySingleRow:!0,singleRow:!0,maxNumCols:1,envClasses:["align"],leqno:e.parser.settings.leqno};return ht(e.parser,t,"display")},mathmlBuilder:Ke});Ye({type:"array",names:["multline","multline*"],props:{numArgs:0},handler(e){Tr(e);const t={addEqnNum:e.envName==="multline",maxNumCols:1,envClasses:["jot","multline"],leqno:e.parser.settings.leqno};return ht(e.parser,t,"display")},mathmlBuilder:Ke});Ye({type:"array",names:["CD"],props:{numArgs:0},handler(e){return Tr(e),uc(e.parser)},mathmlBuilder:Ke});B({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new O(`${e.funcName} valid only within array environment`)}});const ya=Zo;B({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler({parser:e,funcName:t},r){const n=r[0];if(n.type!=="ordgroup")throw new O("Invalid environment name",n);let s="";for(let a=0;a<n.body.length;++a)s+=W(n.body[a],"textord").text;if(t==="\\begin"){if(!Object.prototype.hasOwnProperty.call(ya,s))throw new O("No such environment: "+s,n);const a=ya[s],{args:l,optArgs:u}=e.parseArguments("\\begin{"+s+"}",a),c={mode:e.mode,envName:s,parser:e},d=a.handler(c,l,u);e.expect("\\end",!1);const p=e.nextToken,x=W(e.parseFunction(),"environment");if(x.name!==s)throw new O(`Mismatch: \\begin{${s}} matched by \\end{${x.name}}`,p);return d}return{type:"environment",mode:e.mode,name:s,nameGroup:n}}});B({type:"envTag",names:["\\env@tag"],props:{numArgs:1,argTypes:["math"]},handler({parser:e},t){return{type:"envTag",mode:e.mode,body:t[0]}},mathmlBuilder(e,t){return new _.MathNode("mrow")}});B({type:"noTag",names:["\\env@notag"],props:{numArgs:0},handler({parser:e}){return{type:"noTag",mode:e.mode}},mathmlBuilder(e,t){return new _.MathNode("mrow")}});const _c=(e,t)=>{if(t!=="mathrm"||e.body.type!=="ordgroup"||e.body.body.length===1||e.body.body[0].type!=="mathord")return!1;for(let r=1;r<e.body.body.length;r++){const n=e.body.body[r].type;if(!(n==="mathord"||n==="textord"&&!isNaN(e.body.body[r].text)))return!1}return!0},ri=(e,t)=>{const r=e.font,n=t.withFont(r),s=ue(e.body,n);if(s.children.length===0)return s;if(r==="boldsymbol"&&["mo","mpadded","mrow"].includes(s.type))return s.style.fontWeight="bold",s;if(_c(e,r)){const u=s.children[0].children[0];delete u.attributes.mathvariant;for(let d=1;d<s.children.length;d++)u.children[0].text+=s.children[d].type==="mn"?s.children[d].children[0].text:s.children[d].children[0].children[0].text;const c=new _.MathNode("mtext",new _.TextNode("​"));return new _.MathNode("mrow",[c,u])}let a=s.children[0].type==="mo";for(let u=1;u<s.children.length;u++)s.children[u].type==="mo"&&r==="boldsymbol"&&(s.children[u].style.fontWeight="bold"),s.children[u].type!=="mi"&&(a=!1),(s.children[u].attributes&&s.children[u].attributes.mathvariant||"")!=="normal"&&(a=!1);if(!a)return s;const l=s.children[0];for(let u=1;u<s.children.length;u++)l.children.push(s.children[u].children[0]);if(l.attributes.mathvariant&&l.attributes.mathvariant==="normal"){const u=new _.MathNode("mtext",new _.TextNode("​"));return new _.MathNode("mrow",[u,l])}return l},va={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};B({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\up@greek","\\boldsymbol","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bm","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const n=gr(r[0]);let s=t;return s in va&&(s=va[s]),{type:"font",mode:e.mode,font:s.slice(1),body:n}},mathmlBuilder:ri});B({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:({parser:e,funcName:t,breakOnTokenText:r},n)=>{const{mode:s}=e,a=e.parseExpression(!0,r,!0),l=`math${t.slice(1)}`;return{type:"font",mode:s,font:l,body:{type:"ordgroup",mode:e.mode,body:a}}},mathmlBuilder:ri});const wa=["display","text","script","scriptscript"],kc={auto:-1,display:0,text:0,script:1,scriptscript:2},Es=(e,t)=>{const r=e.scriptLevel==="auto"?t.incrementLevel():e.scriptLevel==="display"?t.withLevel(ye.TEXT):e.scriptLevel==="text"?t.withLevel(ye.SCRIPT):t.withLevel(ye.SCRIPTSCRIPT);let n=new _.MathNode("mfrac",[ue(e.numer,r),ue(e.denom,r)]);if(!e.hasBarLine)n.setAttribute("linethickness","0px");else if(e.barSize){const s=rt(e.barSize,t);n.setAttribute("linethickness",s.number+s.unit)}if(e.leftDelim!=null||e.rightDelim!=null){const s=[];if(e.leftDelim!=null){const a=new _.MathNode("mo",[new _.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),s.push(a)}if(s.push(n),e.rightDelim!=null){const a=new _.MathNode("mo",[new _.TextNode(e.rightDelim.replace("\\",""))]);a.setAttribute("fence","true"),s.push(a)}n=Cs(s)}return e.scriptLevel!=="auto"&&(n=new _.MathNode("mstyle",[n]),n.setAttribute("displaystyle",String(e.scriptLevel==="display")),n.setAttribute("scriptlevel",kc[e.scriptLevel])),n};B({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const n=r[0],s=r[1];let a=!1,l=null,u=null,c="auto";switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":a=!0;break;case"\\\\atopfrac":a=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":l="(",u=")";break;case"\\\\bracefrac":l="\\{",u="\\}";break;case"\\\\brackfrac":l="[",u="]";break;default:throw new Error("Unrecognized genfrac command")}switch(t){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:e.mode,continued:!1,numer:n,denom:s,hasBarLine:a,leftDelim:l,rightDelim:u,scriptLevel:c,barSize:null}},mathmlBuilder:Es});B({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:({parser:e,funcName:t},r)=>{const n=r[0],s=r[1];return{type:"genfrac",mode:e.mode,continued:!0,numer:n,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,scriptLevel:"display",barSize:null}}});B({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler({parser:e,funcName:t,token:r}){let n;switch(t){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:n,token:r}}});const _a=function(e){let t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};B({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler({parser:e},t){const r=t[4],n=t[5],s=gr(t[0]),a=s.type==="atom"&&s.family==="open"?_a(s.text):null,l=gr(t[1]),u=l.type==="atom"&&l.family==="close"?_a(l.text):null,c=W(t[2],"size");let d,p=null;c.isBlank?d=!0:(p=c.value,d=p.number>0);let x="auto",f=t[3];if(f.type==="ordgroup"){if(f.body.length>0){const v=W(f.body[0],"textord");x=wa[Number(v.text)]}}else f=W(f,"textord"),x=wa[Number(f.text)];return{type:"genfrac",mode:e.mode,numer:r,denom:n,continued:!1,hasBarLine:d,barSize:p,leftDelim:a,rightDelim:u,scriptLevel:x}},mathmlBuilder:Es});B({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler({parser:e,funcName:t,token:r},n){return{type:"infix",mode:e.mode,replaceWith:"\\\\abovefrac",barSize:W(n[0],"size").value,token:r}}});B({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:({parser:e,funcName:t},r)=>{const n=r[0],s=Ou(W(r[1],"infix").barSize),a=r[2],l=s.number>0;return{type:"genfrac",mode:e.mode,numer:n,denom:a,continued:!1,hasBarLine:l,barSize:s,leftDelim:null,rightDelim:null,scriptLevel:"auto"}},mathmlBuilder:Es});B({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["hbox"],allowedInArgument:!0,allowedInText:!1},handler({parser:e},t){return{type:"hbox",mode:e.mode,body:ge(t[0])}},mathmlBuilder(e,t){const r=t.withLevel(ye.TEXT),n=dt(e.body,r);return Ms(n)}});const Ac=(e,t)=>{const r=pn.mathMLnode(e.label);return r.style["math-depth"]=0,new _.MathNode(e.isOver?"mover":"munder",[ue(e.base,t),r])};B({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler({parser:e,funcName:t},r){return{type:"horizBrace",mode:e.mode,label:t,isOver:/^\\over/.test(t),base:r[0]}},mathmlBuilder:Ac});B({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:({parser:e,token:t},r)=>{const n=r[1],s=W(r[0],"url").url;if(!e.settings.isTrusted({command:"\\href",url:s}))throw new O('Function "\\href" is not trusted',t);return{type:"href",mode:e.mode,href:s,body:ge(n)}},mathmlBuilder:(e,t)=>{let r=dt(e.body,t);return r instanceof Me||(r=new Me("mrow",[r])),r.setAttribute("href",e.href),r}});B({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:({parser:e,token:t},r)=>{const n=W(r[0],"url").url;if(!e.settings.isTrusted({command:"\\url",url:n}))throw new O('Function "\\url" is not trusted',t);const s=[];for(let l=0;l<n.length;l++){let u=n[l];u==="~"&&(u="\\textasciitilde"),s.push({type:"textord",mode:"text",text:u})}const a={type:"text",mode:e.mode,font:"\\texttt",body:s};return{type:"href",mode:e.mode,href:n,body:ge(a)}}});B({type:"html",names:["\\class","\\id","\\style","\\data"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:({parser:e,funcName:t,token:r},n)=>{const s=W(n[0],"raw").string,a=n[1];if(e.settings.strict)throw new O(`Function "${t}" is disabled in strict mode`,r);let l;const u={};switch(t){case"\\class":u.class=s,l={command:"\\class",class:s};break;case"\\id":u.id=s,l={command:"\\id",id:s};break;case"\\style":u.style=s,l={command:"\\style",style:s};break;case"\\data":{const c=s.split(",");for(let d=0;d<c.length;d++){const p=c[d].split("=");if(p.length!==2)throw new O("Error parsing key-value for \\data");u["data-"+p[0].trim()]=p[1].trim()}l={command:"\\data",attributes:u};break}default:throw new Error("Unrecognized html command")}if(!e.settings.isTrusted(l))throw new O(`Function "${t}" is not trusted`,r);return{type:"html",mode:e.mode,attributes:u,body:ge(a)}},mathmlBuilder:(e,t)=>{const r=dt(e.body,t),n=[];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/)),r.classes=n;for(const s in e.attributes)s!=="class"&&Object.prototype.hasOwnProperty.call(e.attributes,s)&&r.setAttribute(s,e.attributes[s]);return r}});const In=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};{const t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new O("Invalid size: '"+e+"' in \\includegraphics");const r={number:+(t[1]+t[2]),unit:t[3]};if(!Go(r))throw new O("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r}};B({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:({parser:e,token:t},r,n)=>{let s={number:0,unit:"em"},a={number:.9,unit:"em"},l={number:0,unit:"em"},u="";if(n[0]){const d=W(n[0],"raw").string.split(",");for(let p=0;p<d.length;p++){const x=d[p].split("=");if(x.length===2){const f=x[1].trim();switch(x[0].trim()){case"alt":u=f;break;case"width":s=In(f);break;case"height":a=In(f);break;case"totalheight":l=In(f);break;default:throw new O("Invalid key: '"+x[0]+"' in \\includegraphics.")}}}}const c=W(r[0],"url").url;if(u===""&&(u=c,u=u.replace(/^.*[\\/]/,""),u=u.substring(0,u.lastIndexOf("."))),!e.settings.isTrusted({command:"\\includegraphics",url:c}))throw new O('Function "\\includegraphics" is not trusted',t);return{type:"includegraphics",mode:e.mode,alt:u,width:s,height:a,totalheight:l,src:c}},mathmlBuilder:(e,t)=>{const r=rt(e.height,t),n={number:0,unit:"em"};e.totalheight.number>0&&e.totalheight.unit===r.unit&&e.totalheight.number>r.number&&(n.number=e.totalheight.number-r.number,n.unit=r.unit);let s=0;e.width.number>0&&(s=rt(e.width,t));const a={height:r.number+n.number+"em"};s.number>0&&(a.width=s.number+s.unit),n.number>0&&(a.verticalAlign=-n.number+n.unit);const l=new zu(e.src,e.alt,a);return l.height=r,l.depth=n,new _.MathNode("mtext",[l])}});B({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler({parser:e,funcName:t,token:r},n){const s=W(n[0],"size");if(e.settings.strict){const a=t[1]==="m",l=s.value.unit==="mu";if(a){if(!l)throw new O(`LaTeX's ${t} supports only mu units, not ${s.value.unit} units`,r);if(e.mode!=="math")throw new O(`LaTeX's ${t} works only in math mode`,r)}else if(l)throw new O(`LaTeX's ${t} doesn't support mu units`,r)}return{type:"kern",mode:e.mode,dimension:s.value}},mathmlBuilder(e,t){const r=rt(e.dimension,t),n=r.unit==="em"?ni(r.number):"";if(e.mode==="text"&&n.length>0){const s=new _.TextNode(n);return new _.MathNode("mtext",[s])}else{const s=new _.MathNode("mspace");return s.setAttribute("width",r.number+r.unit),r.number<0&&(s.style.marginLeft=r.number+r.unit),s}}});const ni=function(e){return e>=.05555&&e<=.05556?" ":e>=.1666&&e<=.1667?" ":e>=.2222&&e<=.2223?" ":e>=.2777&&e<=.2778?"  ":""},si=/[^A-Za-z_0-9-]/g;B({type:"label",names:["\\label"],props:{numArgs:1,argTypes:["raw"]},handler({parser:e},t){return{type:"label",mode:e.mode,string:t[0].string.replace(si,"")}},mathmlBuilder(e,t){const r=new _.MathNode("mrow",[],["tml-label"]);return e.string.length>0&&r.setAttribute("id",e.string),r}});const Sc=["\\clap","\\llap","\\rlap"];B({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap","\\clap","\\llap","\\rlap"],props:{numArgs:1,allowedInText:!0},handler:({parser:e,funcName:t,token:r},n)=>{if(Sc.includes(t)){if(e.settings.strict&&e.mode!=="text")throw new O(`{${t}} can be used only in text mode.
 Try \\math${t.slice(1)}`,r);t=t.slice(1)}else t=t.slice(5);const s=n[0];return{type:"lap",mode:e.mode,alignment:t,body:s}},mathmlBuilder:(e,t)=>{let r;if(e.alignment==="llap"){const a=Oe(ge(e.body),t),l=new _.MathNode("mphantom",a);r=new _.MathNode("mpadded",[l]),r.setAttribute("width","0px")}const n=ue(e.body,t);let s;if(e.alignment==="llap"?(n.style.position="absolute",n.style.right="0",n.style.bottom="0",s=new _.MathNode("mpadded",[r,n])):s=new _.MathNode("mpadded",[n]),e.alignment==="rlap")e.body.body.length>0&&e.body.body[0].type==="genfrac"&&s.setAttribute("lspace","0.16667em");else{const a=e.alignment==="llap"?"-1":"-0.5";s.setAttribute("lspace",a+"width"),e.alignment==="llap"?s.style.position="relative":(s.style.display="flex",s.style.justifyContent="center")}return s.setAttribute("width","0px"),s}});B({type:"ordgroup",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler({funcName:e,parser:t},r){const n=t.mode;t.switchMode("math");const s=e==="\\("?"\\)":"$",a=t.parseExpression(!1,s);return t.expect(s),t.switchMode(n),{type:"ordgroup",mode:t.mode,body:a}}});B({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new O(`Mismatched ${e.funcName}`,t)}});const Nc=(e,t)=>{switch(t.level){case ye.DISPLAY:return e.display;case ye.TEXT:return e.text;case ye.SCRIPT:return e.script;case ye.SCRIPTSCRIPT:return e.scriptscript;default:return e.text}};B({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:({parser:e},t)=>({type:"mathchoice",mode:e.mode,display:ge(t[0]),text:ge(t[1]),script:ge(t[2]),scriptscript:ge(t[3])}),mathmlBuilder:(e,t)=>{const r=Nc(e,t);return dt(r,t)}});const Tc=["text","textord","mathord","atom"],At=e=>{const t=new _.MathNode("mspace");return t.setAttribute("width",e+"em"),t};function ai(e,t){let r;const n=Oe(e.body,t);if(e.mclass==="minner")r=new _.MathNode("mpadded",n);else if(e.mclass==="mord")e.isCharacterBox||n[0].type==="mathord"?(r=n[0],r.type="mi",r.children.length===1&&r.children[0].text&&r.children[0].text==="∇"&&r.setAttribute("mathvariant","normal")):r=new _.MathNode("mi",n);else{r=new _.MathNode("mrow",n),e.mustPromote?(r=n[0],r.type="mo",e.isCharacterBox&&e.body[0].text&&/[A-Za-z]/.test(e.body[0].text)&&r.setAttribute("mathvariant","italic")):r=new _.MathNode("mrow",n);const s=t.level<2;r.type==="mrow"?s&&(e.mclass==="mbin"?(r.children.unshift(At(.2222)),r.children.push(At(.2222))):e.mclass==="mrel"?(r.children.unshift(At(.2778)),r.children.push(At(.2778))):e.mclass==="mpunct"?r.children.push(At(.1667)):e.mclass==="minner"&&(r.children.unshift(At(.0556)),r.children.push(At(.0556)))):e.mclass==="mbin"?(r.attributes.lspace=s?"0.2222em":"0",r.attributes.rspace=s?"0.2222em":"0"):e.mclass==="mrel"?(r.attributes.lspace=s?"0.2778em":"0",r.attributes.rspace=s?"0.2778em":"0"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace=s?"0.1667em":"0"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&s&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em"),e.mclass==="mopen"||e.mclass==="mclose"||(delete r.attributes.stretchy,delete r.attributes.form)}return r}B({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler({parser:e,funcName:t},r){const n=r[0],s=ae.isCharacterBox(n);let a=!0;const l={type:"mathord",text:"",mode:e.mode},u=n.body?n.body:[n];for(const c of u)if(Tc.includes(c.type))we[e.mode][c.text]?l.text+=we[e.mode][c.text].replace:c.text?l.text+=c.text:c.body&&c.body.map(d=>{l.text+=d.text});else{a=!1;break}return{type:"mclass",mode:e.mode,mclass:"m"+t.slice(5),body:ge(a?l:n),isCharacterBox:s,mustPromote:a}},mathmlBuilder:ai});const qc=e=>{const t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};B({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler({parser:e},t){return{type:"mclass",mode:e.mode,mclass:qc(t[0]),body:ge(t[1]),isCharacterBox:ae.isCharacterBox(t[1])}}});B({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler({parser:e,funcName:t},r){const n=r[1],s=r[0],a={type:"op",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,stack:!0,suppressBaseShift:t!=="\\stackrel",body:ge(n)};return{type:"supsub",mode:s.mode,base:a,sup:t==="\\underset"?null:s,sub:t==="\\underset"?s:null}},mathmlBuilder:ai});const zr=(e,t,r)=>{if(!e)return r;const n=ue(e,t);return n.type==="mrow"&&n.children.length===0?r:n};B({type:"multiscript",names:["\\sideset","\\pres@cript"],props:{numArgs:3},handler({parser:e,funcName:t,token:r},n){if(n[2].body.length===0)throw new O(t+"cannot parse an empty base.");const s=n[2].body[0];if(e.settings.strict&&t==="\\sideset"&&!s.symbol)throw new O("The base of \\sideset must be a big operator. Try \\prescript.");if(n[0].body.length>0&&n[0].body[0].type!=="supsub"||n[1].body.length>0&&n[1].body[0].type!=="supsub")throw new O("\\sideset can parse only subscripts and superscripts in its first two arguments",r);const a=n[0].body.length>0?n[0].body[0]:null,l=n[1].body.length>0?n[1].body[0]:null;return!a&&!l?s:a?{type:"multiscript",mode:e.mode,isSideset:t==="\\sideset",prescripts:a,postscripts:l,base:s}:{type:"styling",mode:e.mode,scriptLevel:"text",body:[{type:"supsub",mode:e.mode,base:s,sup:l.sup,sub:l.sub}]}},mathmlBuilder(e,t){const r=ue(e.base,t),n=new _.MathNode("mprescripts"),s=new _.MathNode("none");let a=[];const l=zr(e.prescripts.sub,t,s),u=zr(e.prescripts.sup,t,s);if(e.isSideset&&(l.setAttribute("style","text-align: left;"),u.setAttribute("style","text-align: left;")),e.postscripts){const c=zr(e.postscripts.sub,t,s),d=zr(e.postscripts.sup,t,s);a=[r,c,d,n,l,u]}else a=[r,n,l,u];return new _.MathNode("mmultiscripts",a)}});B({type:"not",names:["\\not"],props:{numArgs:1,primitive:!0,allowedInText:!1},handler({parser:e},t){const r=ae.isCharacterBox(t[0]);let n;return r?(n=ge(t[0]),n[0].text.charAt(0)==="\\"&&(n[0].text=we.math[n[0].text].replace),n[0].text=n[0].text.slice(0,1)+"̸"+n[0].text.slice(1)):n=[{type:"textord",mode:"math",text:"̸"},{type:"kern",mode:"math",dimension:{number:-.6,unit:"em"}},t[0]],{type:"not",mode:e.mode,body:n,isCharacterBox:r}},mathmlBuilder(e,t){return e.isCharacterBox?Oe(e.body,t,!0)[0]:dt(e.body,t)}});const Mc=["textord","mathord","atom"],Cc=["\\smallint"],Ls=["textord","mathord","ordgroup","close","leftright","font"],ka=e=>{e.attributes.lspace="0.1667em",e.attributes.rspace="0.1667em"},qr=(e,t)=>{let r;if(e.symbol)r=new Me("mo",[Re(e.name,e.mode)]),Cc.includes(e.name)?r.setAttribute("largeop","false"):e.limits?r.setAttribute("stretchy","true"):r.setAttribute("movablelimits","false"),e.fromMathOp&&ka(r);else if(e.body)r=new Me("mo",Oe(e.body,t)),e.fromMathOp&&ka(r);else if(r=new Me("mi",[new zo(e.name.slice(1))]),!e.parentIsSupSub){const n=new Me("mo",[Re("⁡","text")]),s=[r,n];if(e.needsLeadingSpace){const a=new Me("mspace");a.setAttribute("width","0.1667em"),s.unshift(a)}if(!e.isFollowedByDelimiter){const a=new Me("mspace");a.setAttribute("width","0.1667em"),s.push(a)}r=new Me("mrow",s)}return r},Ic={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨅":"\\bigsqcap","⨆":"\\bigsqcup","⨃":"\\bigcupdot","⨇":"\\bigdoublevee","⨈":"\\bigdoublewedge","⨉":"\\bigtimes"};B({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcupplus","\\bigcupdot","\\bigcap","\\bigcup","\\bigdoublevee","\\bigdoublewedge","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcap","\\bigsqcup","\\bigtimes","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:({parser:e,funcName:t},r)=>{let n=t;return n.length===1&&(n=Ic[n]),{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!0,stack:!1,name:n}},mathmlBuilder:qr});B({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:({parser:e},t)=>{const r=t[0],n=r.body?r.body:[r],s=n.length===1&&Mc.includes(n[0].type);return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:s,fromMathOp:!0,stack:!1,name:s?n[0].text:null,body:s?null:ge(r)}},mathmlBuilder:qr});const Oc={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint","∱":"\\intclockwise","∲":"\\varointclockwise","⨌":"\\iiiint","⨍":"\\intbar","⨎":"\\intBar","⨏":"\\fint","⨒":"\\rppolint","⨓":"\\scpolint","⨕":"\\pointint","⨖":"\\sqint","⨗":"\\intlarhk","⨘":"\\intx","⨙":"\\intcap","⨚":"\\intcup"};B({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\sgn","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler({parser:e,funcName:t}){const r=e.prevAtomType,n=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:mn(n),needsLeadingSpace:r.length>0&&Ls.includes(r),name:t}},mathmlBuilder:qr});B({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler({parser:e,funcName:t}){const r=e.prevAtomType,n=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:mn(n),needsLeadingSpace:r.length>0&&Ls.includes(r),name:t}},mathmlBuilder:qr});B({type:"op",names:["\\int","\\iint","\\iiint","\\iiiint","\\oint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\intbar","\\intBar","\\fint","\\rppolint","\\scpolint","\\pointint","\\sqint","\\intlarhk","\\intx","\\intcap","\\intcup","∫","∬","∭","∮","∯","∰","∱","∲","⨌","⨍","⨎","⨏","⨒","⨓","⨕","⨖","⨗","⨘","⨙","⨚"],props:{numArgs:0},handler({parser:e,funcName:t}){let r=t;return r.length===1&&(r=Oc[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,stack:!1,name:r}},mathmlBuilder:qr});const Pc=(e,t)=>{let r=Oe(e.body,t.withFont("mathrm")),n=!0;for(let a=0;a<r.length;a++){let l=r[a];if(l instanceof _.MathNode)switch(l.type==="mrow"&&l.children.length===1&&l.children[0]instanceof _.MathNode&&(l=l.children[0]),l.type){case"mi":case"mn":case"ms":case"mtext":break;case"mspace":if(l.attributes.width){const u=l.attributes.width.replace("em",""),c=ni(Number(u));c===""?n=!1:r[a]=new _.MathNode("mtext",[new _.TextNode(c)])}break;case"mo":{const u=l.children[0];l.children.length===1&&u instanceof _.TextNode?u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){const a=r.map(l=>l.toText()).join("");r=[new _.TextNode(a)]}else if(r.length===1&&["mover","munder"].includes(r[0].type)&&(r[0].children[0].type==="mi"||r[0].children[0].type==="mtext")){if(r[0].children[0].type="mi",e.parentIsSupSub)return new _.MathNode("mrow",r);{const a=new _.MathNode("mo",[Re("⁡","text")]);return _.newDocumentFragment([r[0],a])}}let s;if(n?(s=new _.MathNode("mi",r),r[0].text.length===1&&s.setAttribute("mathvariant","normal")):s=new _.MathNode("mrow",r),!e.parentIsSupSub){const a=new _.MathNode("mo",[Re("⁡","text")]),l=[s,a];if(e.needsLeadingSpace){const u=new _.MathNode("mspace");u.setAttribute("width","0.1667em"),l.unshift(u)}if(!e.isFollowedByDelimiter){const u=new _.MathNode("mspace");u.setAttribute("width","0.1667em"),l.push(u)}return _.newDocumentFragment(l)}return s};B({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const n=r[0],s=e.prevAtomType,a=e.gullet.future().text;return{type:"operatorname",mode:e.mode,body:ge(n),alwaysHandleSupSub:t==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1,isFollowedByDelimiter:mn(a),needsLeadingSpace:s.length>0&&Ls.includes(s)}},mathmlBuilder:Pc});h("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Et({type:"ordgroup",mathmlBuilder(e,t){return dt(e.body,t,e.semisimple)}});B({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"phantom",mode:e.mode,body:ge(r)}},mathmlBuilder:(e,t)=>{const r=Oe(e.body,t);return new _.MathNode("mphantom",r)}});B({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"hphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{const r=Oe(ge(e.body),t),n=new _.MathNode("mphantom",r),s=new _.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});B({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"vphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{const r=Oe(ge(e.body),t),n=new _.MathNode("mphantom",r),s=new _.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});B({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler({parser:e},t){return{type:"pmb",mode:e.mode,body:ge(t[0])}},mathmlBuilder(e,t){const r=Oe(e.body,t),n=qs(r);return n.setAttribute("style","font-weight:bold"),n}});const oi=(e,t)=>{const r=t.withLevel(ye.TEXT),n=new _.MathNode("mpadded",[ue(e.body,r)]),s=rt(e.dy,t);return n.setAttribute("voffset",s.number+s.unit),s.number>0?n.style.padding=s.number+s.unit+" 0 0 0":n.style.padding="0 0 "+Math.abs(s.number)+s.unit+" 0",n};B({type:"raise",names:["\\raise","\\lower"],props:{numArgs:2,argTypes:["size","primitive"],primitive:!0},handler({parser:e,funcName:t},r){const n=W(r[0],"size").value;t==="\\lower"&&(n.number*=-1);const s=r[1];return{type:"raise",mode:e.mode,dy:n,body:s}},mathmlBuilder:oi});B({type:"raise",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler({parser:e,funcName:t},r){const n=W(r[0],"size").value,s=r[1];return{type:"raise",mode:e.mode,dy:n,body:s}},mathmlBuilder:oi});B({type:"ref",names:["\\ref","\\eqref"],props:{numArgs:1,argTypes:["raw"]},handler({parser:e,funcName:t},r){return{type:"ref",mode:e.mode,funcName:t,string:r[0].string.replace(si,"")}},mathmlBuilder(e,t){const r=e.funcName==="\\ref"?["tml-ref"]:["tml-ref","tml-eqref"],n=new _.MathNode("mtext",[new _.TextNode("")],r);return n.setAttribute("href","#"+e.string),n}});B({type:"reflect",names:["\\reflectbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler({parser:e},t){return{type:"reflect",mode:e.mode,body:t[0]}},mathmlBuilder(e,t){const r=ue(e.body,t);return r.style.transform="scaleX(-1)",r}});B({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler({parser:e}){return{type:"internal",mode:e.mode}}});B({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler({parser:e},t,r){const n=r[0],s=W(t[0],"size"),a=W(t[1],"size");return{type:"rule",mode:e.mode,shift:n&&W(n,"size").value,width:s.value,height:a.value}},mathmlBuilder(e,t){const r=rt(e.width,t),n=rt(e.height,t),s=e.shift?rt(e.shift,t):{number:0,unit:"em"},a=t.color&&t.getColor()||"black",l=new _.MathNode("mspace");if(r.number>0&&n.number>0&&l.setAttribute("mathbackground",a),l.setAttribute("width",r.number+r.unit),l.setAttribute("height",n.number+n.unit),s.number===0)return l;const u=new _.MathNode("mpadded",[l]);return s.number>=0?u.setAttribute("height","+"+s.number+s.unit):(u.setAttribute("height",s.number+s.unit),u.setAttribute("depth","+"+-s.number+s.unit)),u.setAttribute("voffset",s.number+s.unit),u}});const Aa={"\\tiny":.5,"\\sixptsize":.6,"\\Tiny":.6,"\\scriptsize":.7,"\\footnotesize":.8,"\\small":.9,"\\normalsize":1,"\\large":1.2,"\\Large":1.44,"\\LARGE":1.728,"\\huge":2.074,"\\Huge":2.488};B({type:"sizing",names:["\\tiny","\\sixptsize","\\Tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],props:{numArgs:0,allowedInText:!0},handler:({breakOnTokenText:e,funcName:t,parser:r},n)=>{r.settings.strict&&r.mode==="math"&&console.log(`Temml strict-mode warning: Command ${t} is invalid in math mode.`);const s=r.parseExpression(!1,e,!0);return{type:"sizing",mode:r.mode,funcName:t,body:s}},mathmlBuilder:(e,t)=>{const r=t.withFontSize(Aa[e.funcName]),n=Oe(e.body,r),s=qs(n),a=(Aa[e.funcName]/t.fontSize).toFixed(4);return s.setAttribute("mathsize",a+"em"),s}});B({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:({parser:e},t,r)=>{let n=!1,s=!1;const a=r[0]&&W(r[0],"ordgroup");if(a){let u="";for(let c=0;c<a.body.length;++c)if(u=a.body[c].text,u==="t")n=!0;else if(u==="b")s=!0;else{n=!1,s=!1;break}}else n=!0,s=!0;const l=t[0];return{type:"smash",mode:e.mode,body:l,smashHeight:n,smashDepth:s}},mathmlBuilder:(e,t)=>{const r=new _.MathNode("mpadded",[ue(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});B({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e},t,r){const n=r[0],s=t[0];return{type:"sqrt",mode:e.mode,body:s,index:n}},mathmlBuilder(e,t){const{body:r,index:n}=e;return n?new _.MathNode("mroot",[ue(r,t),ue(n,t.incrementLevel())]):new _.MathNode("msqrt",[ue(r,t)])}});const $c={display:0,text:1,script:2,scriptscript:3},Ec={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]};B({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({breakOnTokenText:e,funcName:t,parser:r},n){const s=r.parseExpression(!0,e,!0),a=t.slice(1,t.length-5);return{type:"styling",mode:r.mode,scriptLevel:a,body:s}},mathmlBuilder(e,t){const r=t.withLevel($c[e.scriptLevel]),n=Oe(e.body,r),s=qs(n),a=Ec[e.scriptLevel];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});const Lc=/^m(over|under|underover)$/;Et({type:"supsub",mathmlBuilder(e,t){let r=!1,n,s,a=!1,l=!1,u=!1;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(r=!0,n=e.base.isOver)),e.base&&!e.base.stack&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0,a=!e.base.symbol,l=a&&!e.isFollowedByDelimiter,u=e.base.needsLeadingSpace);const c=e.base&&e.base.stack?[ue(e.base.body[0],t)]:[ue(e.base,t)],d=t.inSubOrSup();if(e.sub&&c.push(ue(e.sub,d)),e.sup){const f=ue(e.sup,d),v=f.type==="mrow"?f.children[0]:f;v&&v.type==="mo"&&v.classes.includes("tml-prime")&&e.base&&e.base.text&&e.base.text==="f"&&v.classes.push("prime-pad"),c.push(f)}let p;if(r)p=n?"mover":"munder";else if(e.sub)if(e.sup){const f=e.base;f&&(f.type==="op"&&f.limits||f.type==="multiscript")&&(t.level===ye.DISPLAY||f.alwaysHandleSupSub)||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(t.level===ye.DISPLAY||f.limits)?p="munderover":p="msubsup"}else{const f=e.base;f&&f.type==="op"&&f.limits&&(t.level===ye.DISPLAY||f.alwaysHandleSupSub)||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(f.limits||t.level===ye.DISPLAY)?p="munder":p="msub"}else{const f=e.base;f&&f.type==="op"&&f.limits&&(t.level===ye.DISPLAY||f.alwaysHandleSupSub)||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(f.limits||t.level===ye.DISPLAY)?p="mover":p="msup"}let x=new _.MathNode(p,c);if(a){const f=new _.MathNode("mo",[Re("⁡","text")]);if(u){const v=new _.MathNode("mspace");v.setAttribute("width","0.1667em"),x=_.newDocumentFragment([v,x,f])}else x=_.newDocumentFragment([x,f]);if(l){const v=new _.MathNode("mspace");v.setAttribute("width","0.1667em"),x.children.push(v)}}else Lc.test(p)&&(x=new _.MathNode("mrow",[x]));return x}});const Bc=["\\shortmid","\\nshortmid","\\shortparallel","\\nshortparallel","\\smallsetminus"],Dc=["\\Rsh","\\Lsh","\\restriction"],zc=e=>{if(e.length===1){const t=e.codePointAt(0);return 8591<t&&t<8704}return e.indexOf("arrow")>-1||e.indexOf("harpoon")>-1||Dc.includes(e)};Et({type:"atom",mathmlBuilder(e,t){const r=new _.MathNode("mo",[Re(e.text,e.mode)]);return e.family==="punct"?r.setAttribute("separator","true"):e.family==="open"||e.family==="close"?e.family==="open"?(r.setAttribute("form","prefix"),r.setAttribute("stretchy","false")):e.family==="close"&&(r.setAttribute("form","postfix"),r.setAttribute("stretchy","false")):e.text==="\\mid"?(r.setAttribute("lspace","0.22em"),r.setAttribute("rspace","0.22em"),r.setAttribute("stretchy","false")):e.family==="rel"&&zc(e.text)?r.setAttribute("stretchy","false"):Bc.includes(e.text)?r.setAttribute("mathsize","70%"):e.text===":"&&(r.attributes.lspace="0.2222em",r.attributes.rspace="0.2222em"),r}});const Sa={mathbf:"bold",mathrm:"normal",textit:"italic",mathit:"italic",mathnormal:"italic",mathbb:"double-struck",mathcal:"script",mathfrak:"fraktur",mathscr:"script",mathsf:"sans-serif",mathtt:"monospace"},ii=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsc")return"normal";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"sans-serif-bold":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";const r=t.font;if(!r||r==="mathnormal")return null;const n=e.mode;switch(r){case"mathit":return"italic";case"mathrm":{const a=e.text.codePointAt(0);return 939<a&&a<975?"italic":"normal"}case"greekItalic":return"italic";case"up@greek":return"normal";case"boldsymbol":case"mathboldsymbol":return"bold-italic";case"mathbf":return"bold";case"mathbb":return"double-struck";case"mathfrak":return"fraktur";case"mathscr":case"mathcal":return"script";case"mathsf":return"sans-serif";case"mathtt":return"monospace"}let s=e.text;return we[n][s]&&we[n][s].replace&&(s=we[n][s].replace),Object.prototype.hasOwnProperty.call(Sa,r)?Sa[r]:null},Na=Object.freeze({B:8426,E:8427,F:8427,H:8387,I:8391,L:8390,M:8422,R:8393,e:8394,g:8355,o:8389}),jc=Object.freeze({C:8426,H:8388,I:8392,R:8394,Z:8398}),Rc=Object.freeze({C:8383,H:8389,N:8391,P:8393,Q:8393,R:8395,Z:8394}),li=Object.freeze({"ϵ":119527,ϑ:119564,ϰ:119534,φ:119577,ϱ:119535,ϖ:119563}),Fc=Object.freeze({"ϵ":119643,ϑ:119680,ϰ:119650,φ:119693,ϱ:119651,ϖ:119679}),Ta=Object.freeze({"ϵ":119701,ϑ:119738,ϰ:119708,φ:119751,ϱ:119709,ϖ:119737}),Gc=Object.freeze({"ϵ":119759,ϑ:119796,ϰ:119766,φ:119809,ϱ:119767,ϖ:119795}),Uc=Object.freeze({upperCaseLatin:{normal:e=>0,bold:e=>119743,italic:e=>119795,"bold-italic":e=>119847,script:e=>Na[e]||119899,"script-bold":e=>119951,fraktur:e=>jc[e]||120003,"fraktur-bold":e=>120107,"double-struck":e=>Rc[e]||120055,"sans-serif":e=>120159,"sans-serif-bold":e=>120211,"sans-serif-italic":e=>120263,"sans-serif-bold-italic":e=>120380,monospace:e=>120367},lowerCaseLatin:{normal:e=>0,bold:e=>119737,italic:e=>e==="h"?8358:119789,"bold-italic":e=>119841,script:e=>Na[e]||119893,"script-bold":e=>119945,fraktur:e=>119997,"fraktur-bold":e=>120101,"double-struck":e=>120049,"sans-serif":e=>120153,"sans-serif-bold":e=>120205,"sans-serif-italic":e=>120257,"sans-serif-bold-italic":e=>120309,monospace:e=>120361},upperCaseGreek:{normal:e=>0,bold:e=>119575,italic:e=>119633,"bold-italic":e=>119575,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119749,"sans-serif-bold":e=>119749,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119807,monospace:e=>0},lowerCaseGreek:{normal:e=>0,bold:e=>119569,italic:e=>119627,"bold-italic":e=>e==="ϕ"?119678:119685,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119743,"sans-serif-bold":e=>119743,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119801,monospace:e=>0},varGreek:{normal:e=>0,bold:e=>li[e]||-51,italic:e=>0,"bold-italic":e=>Fc[e]||58,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>Ta[e]||116,"sans-serif-bold":e=>Ta[e]||116,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>Gc[e]||174,monospace:e=>0},numeral:{normal:e=>0,bold:e=>120734,italic:e=>0,"bold-italic":e=>0,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>120744,"sans-serif":e=>120754,"sans-serif-bold":e=>120764,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>0,monospace:e=>120774}}),or=(e,t)=>{const r=e.codePointAt(0),n=64<r&&r<91?"upperCaseLatin":96<r&&r<123?"lowerCaseLatin":912<r&&r<938?"upperCaseGreek":944<r&&r<970||e==="ϕ"?"lowerCaseGreek":120545<r&&r<120572||li[e]?"varGreek":47<r&&r<58?"numeral":"other";return n==="other"?e:String.fromCodePoint(r+Uc[n][t](e))},Vc=Object.freeze({a:"ᴀ",b:"ʙ",c:"ᴄ",d:"ᴅ",e:"ᴇ",f:"ꜰ",g:"ɢ",h:"ʜ",i:"ɪ",j:"ᴊ",k:"ᴋ",l:"ʟ",m:"ᴍ",n:"ɴ",o:"ᴏ",p:"ᴘ",q:"ǫ",r:"ʀ",s:"s",t:"ᴛ",u:"ᴜ",v:"ᴠ",w:"ᴡ",x:"x",y:"ʏ",z:"ᴢ"}),Wc=/^\d(?:[\d,.]*\d)?$/,Hc=/[A-Ba-z]/,Zc=new Set(["\\prime","\\dprime","\\trprime","\\qprime","\\backprime","\\backdprime","\\backtrprime"]),Xc=(e,t,r)=>{const n=new _.MathNode(r,[e]),s=new _.MathNode("mstyle",[n]);return s.style["font-style"]="italic",s.style["font-family"]="Cambria, 'Times New Roman', serif",t==="bold-italic"&&(s.style["font-weight"]="bold"),s};Et({type:"mathord",mathmlBuilder(e,t){const r=Re(e.text,e.mode,t),n=r.text.codePointAt(0),s=912<n&&n<938?"normal":"italic",a=ii(e,t)||s;if(a==="script")return r.text=or(r.text,a),new _.MathNode("mi",[r],[t.font]);a!=="italic"&&(r.text=or(r.text,a));let l=new _.MathNode("mi",[r]);return a==="normal"&&(l.setAttribute("mathvariant","normal"),r.text.length===1&&(l=new _.MathNode("mrow",[l]))),l}});Et({type:"textord",mathmlBuilder(e,t){let r=e.text;const n=r.codePointAt(0);t.fontFamily==="textsc"&&96<n&&n<123&&(r=Vc[r]);const s=Re(r,e.mode,t),a=ii(e,t)||"normal";let l;if(Wc.test(e.text)){const u=e.mode==="text"?"mtext":"mn";if(a==="italic"||a==="bold-italic")return Xc(s,a,u);a!=="normal"&&(s.text=s.text.split("").map(c=>or(c,a)).join("")),l=new _.MathNode(u,[s])}else if(e.mode==="text")a!=="normal"&&(s.text=or(s.text,a)),l=new _.MathNode("mtext",[s]);else if(Zc.has(e.text))l=new _.MathNode("mo",[s]),l.classes.push("tml-prime");else{const u=s.text;a!=="italic"&&(s.text=or(s.text,a)),l=new _.MathNode("mi",[s]),s.text===u&&Hc.test(u)&&l.setAttribute("mathvariant","italic")}return l}});const Yc={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Kc={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Et({type:"spacing",mathmlBuilder(e,t){let r;if(Object.prototype.hasOwnProperty.call(Kc,e.text))r=new _.MathNode("mtext",[new _.TextNode(" ")]);else if(Object.prototype.hasOwnProperty.call(Yc,e.text))r=new _.MathNode("mo"),e.text==="\\nobreak"&&r.setAttribute("linebreak","nobreak");else throw new O(`Unknown type of space "${e.text}"`);return r}});Et({type:"tag"});const qa={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm","\\textsc":"textsc"},Ma={"\\textbf":"textbf","\\textmd":"textmd"},Qc={"\\textit":"textit","\\textup":"textup"},Jc=(e,t)=>{const r=e.font;if(r){if(qa[r])return t.withTextFontFamily(qa[r]);if(Ma[r])return t.withTextFontWeight(Ma[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(Qc[r])};B({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textsc","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:e,funcName:t},r){const n=r[0];return{type:"text",mode:e.mode,body:ge(n),font:t}},mathmlBuilder(e,t){const r=Jc(e,t),n=dt(e.body,r);return Ms(n)}});B({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new O("\\verb ended by end of line instead of matching delimiter")},mathmlBuilder(e,t){const r=new _.TextNode(ed(e)),n=new _.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});const ed=e=>e.body.replace(/ /g,e.star?"␣":" "),Mt=Bo;class ze{constructor(t,r,n){this.lexer=t,this.start=r,this.end=n}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new ze(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class nt{constructor(t,r){this.text=t,this.loc=r}range(t,r){return new nt(r,ze.range(this,t))}}const ui=`[ \r
	]`,td="\\\\[a-zA-Z@]+",rd="\\\\[^\uD800-\uDFFF]",nd=`(${td})${ui}*`,sd=`\\\\(
|[ \r	]+
?)[ \r	]*`,us="[̀-ͯ]",Ca=new RegExp(`${us}+$`),ad=`(${ui}+)|${sd}|([!-\\[\\]-‧‪-퟿豈-￿]${us}*|[\uD800-\uDBFF][\uDC00-\uDFFF]${us}*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|${nd}|${rd})`;class Ia{constructor(t,r){this.input=t,this.settings=r,this.tokenRegex=new RegExp(ad,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){const t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new nt("EOF",new ze(this,r,r));const n=this.tokenRegex.exec(t);if(n===null||n.index!==r)throw new O(`Unexpected character: '${t[r]}'`,new nt(t[r],new ze(this,r,r+1)));const s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){const a=t.indexOf(`
`,this.tokenRegex.lastIndex);if(a===-1){if(this.tokenRegex.lastIndex=t.length,this.settings.strict)throw new O("% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode")}else this.tokenRegex.lastIndex=a+1;return this.lex()}return new nt(s,new ze(this,r,this.tokenRegex.lastIndex))}}class od{constructor(t={},r={}){this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new O("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const t=this.undefStack.pop();for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]===void 0?delete this.current[r]:this.current[r]=t[r])}has(t){return Object.prototype.hasOwnProperty.call(this.current,t)||Object.prototype.hasOwnProperty.call(this.builtins,t)}get(t){return Object.prototype.hasOwnProperty.call(this.current,t)?this.current[t]:this.builtins[t]}set(t,r,n=!1){if(n){for(let s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{const s=this.undefStack[this.undefStack.length-1];s&&!Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=this.current[t])}this.current[t]=r}}const ci={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class id{constructor(t,r,n){this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new od(xc,r.macros),this.mode=n,this.stack=[]}feed(t){this.lexer=new Ia(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){let r,n,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:r,end:n}=this.consumeArg());return this.pushToken(new nt("EOF",n.loc)),this.pushTokens(s),r.range(n,"")}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(t){const r=[],n=t&&t.length>0;n||this.consumeSpaces();const s=this.future();let a,l=0,u=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++l;else if(a.text==="}"){if(--l,l===-1)throw new O("Extra }",a)}else if(a.text==="EOF")throw new O("Unexpected end of input in a macro argument, expected '"+(t&&n?t[u]:"}")+"'",a);if(t&&n)if((l===0||l===1&&t[u]==="{")&&a.text===t[u]){if(++u,u===t.length){r.splice(-u,u);break}}else u=0}while(l!==0||n);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:a}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new O("The length of delimiters doesn't match the number of args!");const s=r[0];for(let a=0;a<s.length;a++){const l=this.popToken();if(s[a]!==l.text)throw new O("Use of the macro doesn't match its definition",l)}}const n=[];for(let s=0;s<t;s++)n.push(this.consumeArg(r&&r[s+1]).tokens);return n}expandOnce(t){const r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(s==null||t&&s.unexpandable){if(t&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new O("Undefined control sequence: "+n);return this.pushToken(r),!1}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new O("Too many expansions: infinite loop or need to increase maxExpand setting");let a=s.tokens;const l=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){a=a.slice();for(let u=a.length-1;u>=0;--u){let c=a[u];if(c.text==="#"){if(u===0)throw new O("Incomplete placeholder at end of macro body",c);if(c=a[--u],c.text==="#")a.splice(u+1,1);else if(/^[1-9]$/.test(c.text))a.splice(u,2,...l[+c.text-1]);else throw new O("Not a valid argument number",c)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){const t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new nt(t)]):void 0}expandTokens(t){const r=[],n=this.stack.length;for(this.pushTokens(t);this.stack.length>n;)if(this.expandOnce(!0)===!1){const s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return r}expandMacroAsText(t){const r=this.expandMacro(t);return r&&r.map(n=>n.text).join("")}_getExpansion(t){const r=this.macros.get(t);if(r==null)return r;if(t.length===1){const s=this.lexer.catcodes[t];if(s!=null&&s!==13)return}const n=typeof r=="function"?r(this):r;if(typeof n=="string"){let s=0;if(n.indexOf("#")!==-1){const c=n.replace(/##/g,"");for(;c.indexOf("#"+(s+1))!==-1;)++s}const a=new Ia(n,this.settings),l=[];let u=a.lex();for(;u.text!=="EOF";)l.push(u),u=a.lex();return l.reverse(),{tokens:l,numArgs:s}}return n}isDefined(t){return this.macros.has(t)||Object.prototype.hasOwnProperty.call(Mt,t)||Object.prototype.hasOwnProperty.call(we.math,t)||Object.prototype.hasOwnProperty.call(we.text,t)||Object.prototype.hasOwnProperty.call(ci,t)}isExpandable(t){const r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Object.prototype.hasOwnProperty.call(Mt,t)&&!Mt[t].primitive}}const Oa=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,jr=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),Pa=Object.freeze({"𝒜":"A",ℬ:"B","𝒞":"C","𝒟":"D",ℰ:"E",ℱ:"F","𝒢":"G",ℋ:"H",ℐ:"I","𝒥":"J","𝒦":"K",ℒ:"L",ℳ:"M","𝒩":"N","𝒪":"O","𝒫":"P","𝒬":"Q",ℛ:"R","𝒮":"S","𝒯":"T","𝒰":"U","𝒱":"V","𝒲":"W","𝒳":"X","𝒴":"Y","𝒵":"Z"});var On={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},$a={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",č:"č",ĉ:"ĉ",ċ:"ċ",ď:"ď",ḋ:"ḋ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ĺ:"ĺ",ľ:"ľ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ď:"Ď",Ḋ:"Ḋ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ĺ:"Ĺ",Ľ:"Ľ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ť:"Ť",Ṫ:"Ṫ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};const ld=["bin","op","open","punct","rel"],ud=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/;class gn{constructor(t,r,n=!1){this.mode="math",this.gullet=new id(t,r,this.mode),this.settings=r,this.isPreamble=n,this.leftrightDepth=0,this.prevAtomType=""}expect(t,r=!0){if(this.fetch().text!==t)throw new O(`Expected '${t}', got '${this.fetch().text}'`,this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");const t=this.parseExpression(!1);if(this.expect("EOF"),this.isPreamble){const n=Object.create(null);return Object.entries(this.gullet.macros.current).forEach(([s,a])=>{n[s]=a}),this.gullet.endGroup(),n}const r=this.gullet.macros.get("\\df@tag");return this.gullet.endGroup(),r&&(this.gullet.macros.current["\\df@tag"]=r),t}static get endOfExpression(){return["}","\\endgroup","\\end","\\right","\\endtoggle","&"]}subparse(t){const r=this.nextToken;this.consume(),this.gullet.pushToken(new nt("}")),this.gullet.pushTokens(t);const n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(t,r,n){const s=[];for(;;){this.mode==="math"&&this.consumeSpaces();const a=this.fetch();if(gn.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||n&&a.text==="\\middle"||t&&Mt[a.text]&&Mt[a.text].infix)break;const l=this.parseAtom(r);if(l){if(l.type==="internal")continue}else break;s.push(l),this.prevAtomType=l.type==="atom"?l.family:l.type}return this.mode==="text"&&this.formLigatures(s),this.handleInfixNodes(s)}handleInfixNodes(t){let r=-1,n;for(let s=0;s<t.length;s++)if(t[s].type==="infix"){if(r!==-1)throw new O("only one infix operator per group",t[s].token);r=s,n=t[s].replaceWith}if(r!==-1&&n){let s,a;const l=t.slice(0,r),u=t.slice(r+1);l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l},u.length===1&&u[0].type==="ordgroup"?a=u[0]:a={type:"ordgroup",mode:this.mode,body:u};let c;return n==="\\\\abovefrac"?c=this.callFunction(n,[s,t[r],a],[]):c=this.callFunction(n,[s,a],[]),[c]}else return t}handleSupSubscript(t){const r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();const s=this.parseGroup(t);if(!s)throw new O("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(t){const r=[];for(let s=0;s<t.length;s++)r.push({type:"textord",mode:"text",text:t[s]});const n={type:"text",mode:this.mode,body:r};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]}}parseAtom(t){const r=this.parseGroup("atom",t);if(this.mode==="text")return r;let n,s;for(;;){this.consumeSpaces();const a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){const l=a.text==="\\limits";r.limits=l,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new O("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new O("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(s)throw new O("Double subscript",a);s=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new O("Double superscript",a);const l={type:"textord",mode:this.mode,text:"\\prime"},u=[l];for(this.consume();this.fetch().text==="'";)u.push(l),this.consume();this.fetch().text==="^"&&u.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:u}}else if(jr[a.text]){const l=Oa.test(a.text),u=[];for(u.push(new nt(jr[a.text])),this.consume();;){const d=this.fetch().text;if(!jr[d]||Oa.test(d)!==l)break;u.unshift(new nt(jr[d])),this.consume()}const c=this.subparse(u);l?s={type:"ordgroup",mode:"math",body:c}:n={type:"ordgroup",mode:"math",body:c}}else break}if(n||s){if(r&&r.type==="multiscript"&&!r.postscripts)return r.postscripts={sup:n,sub:s},r;{const a=!r||r.type!=="op"&&r.type!=="operatorname"?void 0:mn(this.nextToken.text);return{type:"supsub",mode:this.mode,base:r,sup:n,sub:s,isFollowedByDelimiter:a}}}else return r}parseFunction(t,r){const n=this.fetch(),s=n.text,a=Mt[s];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new O("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new O("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new O("Can't use function '"+s+"' in math mode",n);const l=this.prevAtomType,{args:u,optArgs:c}=this.parseArguments(s,a);return this.prevAtomType=l,this.callFunction(s,u,c,n,t)}callFunction(t,r,n,s,a){const l={funcName:t,parser:this,token:s,breakOnTokenText:a},u=Mt[t];if(u&&u.handler)return u.handler(l,r,n);throw new O(`No function handler for ${t}`)}parseArguments(t,r){const n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};const s=[],a=[];for(let l=0;l<n;l++){let u=r.argTypes&&r.argTypes[l];const c=l<r.numOptionalArgs;(r.primitive&&u==null||r.type==="sqrt"&&l===1&&a[0]==null)&&(u="primitive");const d=this.parseGroupOfType(`argument to '${t}'`,u,c);if(c)a.push(d);else if(d!=null)s.push(d);else throw new O("Null argument, please report this as a bug")}return{args:s,optArgs:a}}parseGroupOfType(t,r,n){switch(r){case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{const s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],scriptLevel:"text"}:null}case"raw":{const s=this.parseStringGroup("raw",n);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(n)throw new O("A primitive argument cannot be optional");const s=this.parseGroup(t);if(s==null)throw new O("Expected group as "+t,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new O("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;;){const t=this.fetch().text;if(t===" "||t===" "||t==="︎")this.consume();else break}}parseStringGroup(t,r){const n=this.gullet.scanArgument(r);if(n==null)return null;let s="",a;for(;(a=this.fetch()).text!=="EOF";)s+=a.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(t,r){const n=this.fetch();let s=n,a="",l;for(;(l=this.fetch()).text!=="EOF"&&t.test(a+l.text);)s=l,a+=s.text,this.consume();if(a==="")throw new O("Invalid "+r+": '"+n.text+"'",n);return n.range(s,a)}parseSizeGroup(t){let r,n=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",n=!0);const s=ud.exec(r.text);if(!s)throw new O("Invalid size: '"+r.text+"'",r);const a={number:+(s[1]+s[2]),unit:s[3]};if(!Go(a))throw new O("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;let n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return n=r.text.replace(/{\u2044}/g,"/"),{type:"url",mode:this.mode,url:n}}parseArgumentGroup(t,r){const n=this.gullet.scanArgument(t);if(n==null)return null;const s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();const a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const l={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(s),l}parseGroup(t,r){const n=this.fetch(),s=n.text;let a;if(s==="{"||s==="\\begingroup"||s==="\\toggle"){this.consume();const l=s==="{"?"}":s==="\\begingroup"?"\\endgroup":"\\endtoggle";this.gullet.beginGroup();const u=this.parseExpression(!1,l),c=this.fetch();this.expect(l),this.gullet.endGroup(),a={type:c.text==="\\endtoggle"?"toggle":"ordgroup",mode:this.mode,loc:ze.range(n,c),body:u,semisimple:s==="\\begingroup"||void 0}}else a=this.parseFunction(r,t)||this.parseSymbol(),a==null&&s[0]==="\\"&&!Object.prototype.hasOwnProperty.call(ci,s)&&(a=this.formatUnsupportedCmd(s),this.consume());return a}formLigatures(t){let r=t.length-1;for(let n=0;n<r;++n){const s=t[n],a=s.text;a==="-"&&t[n+1].text==="-"&&(n+1<r&&t[n+2].text==="-"?(t.splice(n,3,{type:"textord",mode:"text",loc:ze.range(s,t[n+2]),text:"---"}),r-=2):(t.splice(n,2,{type:"textord",mode:"text",loc:ze.range(s,t[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&t[n+1].text===a&&(t.splice(n,2,{type:"textord",mode:"text",loc:ze.range(s,t[n+1]),text:a+a}),r-=1)}}parseSymbol(){const t=this.fetch();let r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();let a=r.slice(5);const l=a.charAt(0)==="*";if(l&&(a=a.slice(1)),a.length<2||a.charAt(0)!==a.slice(-1))throw new O(`\\verb assertion failed --
                    please report what input caused this bug`);return a=a.slice(1,-1),{type:"verb",mode:"text",body:a,star:l}}if(Object.prototype.hasOwnProperty.call($a,r[0])&&this.mode==="math"&&!we[this.mode][r[0]]){if(this.settings.strict&&this.mode==="math")throw new O(`Accented Unicode text character "${r[0]}" used in math mode`,t);r=$a[r[0]]+r.slice(1)}const n=this.mode==="math"?Ca.exec(r):null;n&&(r=r.substring(0,n.index),r==="i"?r="ı":r==="j"&&(r="ȷ"));let s;if(we[this.mode][r]){let a=we[this.mode][r].group;a==="bin"&&ld.includes(this.prevAtomType)&&(a="open");const l=ze.range(t);let u;if(Object.prototype.hasOwnProperty.call(Uu,a)){const c=a;u={type:"atom",mode:this.mode,family:c,loc:l,text:r}}else{if(Pa[r]){this.consume();const c=this.fetch().text.charCodeAt(0),d=c===65025?"mathscr":"mathcal";return(c===65024||c===65025)&&this.consume(),{type:"font",mode:"math",font:d,body:{type:"mathord",mode:"math",loc:l,text:Pa[r]}}}u={type:a,mode:this.mode,loc:l,text:r}}s=u}else if(r.charCodeAt(0)>=128||Ca.exec(r)){if(this.settings.strict&&this.mode==="math")throw new O(`Unicode text character "${r[0]}" used in math mode`,t);s={type:"textord",mode:"text",loc:ze.range(t),text:r}}else return null;if(this.consume(),n)for(let a=0;a<n[0].length;a++){const l=n[0][a];if(!On[l])throw new O(`Unknown accent ' ${l}'`,t);const u=On[l][this.mode]||On[l].text;if(!u)throw new O(`Accent ${l} unsupported in ${this.mode} mode`,t);s={type:"accent",mode:this.mode,loc:ze.range(t),label:u,isStretchy:!1,base:s}}return s}}const di=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("Temml can only parse string typed expression");const r=new gn(e,t);delete r.gullet.macros.current["\\df@tag"];let n=r.parse();if(!(n.length>0&&n[0].type&&n[0].type==="array"&&n[0].addEqnNum)&&r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new O("\\tag works only in display mode");r.gullet.feed("\\df@tag"),n=[{type:"tag",mode:"text",body:n,tag:r.parse()}]}return n},cd=[2,2,3,3];class Bs{constructor(t){this.level=t.level,this.color=t.color,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontSize=t.fontSize||1,this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.maxSize=t.maxSize}extend(t){const r={level:this.level,color:this.color,font:this.font,fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return new Bs(r)}withLevel(t){return this.extend({level:t})}incrementLevel(){return this.extend({level:Math.min(this.level+1,3)})}inSubOrSup(){return this.extend({level:cd[this.level]})}withColor(t){return this.extend({color:t})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withFontSize(t){return this.extend({fontSize:t})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}getColor(){return this.color}}const dd="0.10.29";function hd(e){const t={};let r=0;const n=e.getElementsByClassName("tml-tageqn");for(const s of n){const a=s.getElementsByClassName("tml-eqn");a.length>0&&(r+=1,a[0].id="tml-eqn-"+r);const l=s.getElementsByClassName("tml-label");if(l.length!==0)if(a.length>0)t[l[0].id]=String(r);else{const u=s.getElementsByClassName("tml-tag");u.length>0&&(t[l[0].id]=u[0].textContent)}}[...e.getElementsByClassName("tml-ref")].forEach(s=>{let a=t[s.getAttribute("href").slice(1)];s.className.indexOf("tml-eqref")===-1&&(a=a.replace(/^\(/,""),a=a.replace(/\($/,"")),a.charAt(0)!=="("&&(a="("+a),a.slice(-1)!==")"&&(a=a+")"),s.textContent=a})}let hi=function(e,t,r={}){t.textContent="";const n=t.tagName.toLowerCase()==="math";n&&(r.wrap="none");const s=Ds(e,r);n?(t.textContent="",s.children.forEach(a=>{t.appendChild(a.toNode())})):s.children.length>1?(t.textContent="",s.children.forEach(a=>{t.appendChild(a.toNode())})):t.appendChild(s.toNode())};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: Temml doesn't work in quirks mode. Make sure your website has a suitable doctype."),hi=function(){throw new O("Temml doesn't work in quirks mode.")});const pd=function(e,t){return Ds(e,t).toMarkup()},fd=function(e,t){const r=new Ns(t);return di(e,r)},md=function(e,t){const r=new Ns(t);if(r.macros={},!(typeof e=="string"||e instanceof String))throw new TypeError("Temml can only parse string typed expression");const n=new gn(e,r,!0);return delete n.gullet.macros.current["\\df@tag"],n.parse()},gd=function(e,t,r){if(r.throwOnError||!(e instanceof O))throw e;const n=new Do(["temml-error"],[new Du(t+`
`+e.toString())]);return n.style.color=r.errorColor,n.style.whiteSpace="pre-line",n},Ds=function(e,t){const r=new Ns(t);try{const n=di(e,r),s=new Bs({level:r.displayMode?ye.DISPLAY:ye.TEXT,maxSize:r.maxSize});return Ju(n,e,s,r)}catch(n){return gd(n,e,r)}};var bd={version:dd,render:hi,renderToString:pd,postProcess:hd,ParseError:O,definePreamble:md,__parse:fd,__renderToMathMLTree:Ds,__defineSymbol:o,__defineMacro:h},xd={},bn={},Mr={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.Warning=void 0;class yd{constructor(t,r){this.message=t,typeof r=="number"?this.offset=r:r&&"line"in r&&(this.sourceLoc=r,this.offset=r.offset)}render(){let t=this.message;return this.sourceLoc?t+=` at line ${this.sourceLoc.line}, col ${this.sourceLoc.col}`:this.offset&&(t+=` at offset ${this.offset}`),t}}_t.Warning=yd;var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.AttributeParser=void 0;var R;(function(e){e[e.SCANNING=0]="SCANNING",e[e.SCANNING_ID=1]="SCANNING_ID",e[e.SCANNING_CLASS=2]="SCANNING_CLASS",e[e.SCANNING_KEY=3]="SCANNING_KEY",e[e.SCANNING_VALUE=4]="SCANNING_VALUE",e[e.SCANNING_BARE_VALUE=5]="SCANNING_BARE_VALUE",e[e.SCANNING_QUOTED_VALUE=6]="SCANNING_QUOTED_VALUE",e[e.SCANNING_QUOTED_VALUE_CONTINUATION=7]="SCANNING_QUOTED_VALUE_CONTINUATION",e[e.SCANNING_ESCAPED=8]="SCANNING_ESCAPED",e[e.SCANNING_ESCAPED_IN_CONTINUATION=9]="SCANNING_ESCAPED_IN_CONTINUATION",e[e.SCANNING_COMMENT=10]="SCANNING_COMMENT",e[e.FAIL=11]="FAIL",e[e.DONE=12]="DONE",e[e.START=13]="START"})(R||(R={}));const vd=/^[a-zA-Z0-9_:-]/,wd=function(e){return vd.exec(e)!==null},Pe=[];Pe[R.START]=function(e,t){return e.subject.charAt(t)==="{"?R.SCANNING:R.FAIL};Pe[R.FAIL]=function(e,t){return R.FAIL};Pe[R.DONE]=function(e,t){return R.DONE};Pe[R.SCANNING]=function(e,t){const r=e.subject.charAt(t);return r===`
`||r==="\r"?R.SCANNING:r===" "||r==="	"?(e.addEvent(t,t,"attr_space"),R.SCANNING):r==="}"?R.DONE:r==="#"?(e.begin=t,e.addEvent(t,t,"attr_id_marker"),R.SCANNING_ID):r==="%"?(e.begin=t,R.SCANNING_COMMENT):r==="."?(e.begin=t,e.addEvent(t,t,"attr_class_marker"),R.SCANNING_CLASS):wd(r)?(e.begin=t,R.SCANNING_KEY):R.FAIL};Pe[R.SCANNING_COMMENT]=function(e,t){const r=e.subject.charAt(t);return r==="%"?(e.begin&&t>e.begin&&e.addEvent(e.begin,t,"comment"),R.SCANNING):r=="}"?R.DONE:R.SCANNING_COMMENT};Pe[R.SCANNING_ID]=function(e,t){const r=e.subject.charAt(t);return/^[^\]\[~!@#$%^&*(){}`,.<>\\|=+/?\s]/.exec(r)!==null?R.SCANNING_ID:r==="}"?(e.begin&&e.lastpos&&e.lastpos>e.begin&&e.addEvent(e.begin+1,e.lastpos,"id"),e.begin=null,R.DONE):/^\s/.exec(r)!==null?(e.begin&&e.lastpos&&e.lastpos>e.begin&&e.addEvent(e.begin+1,e.lastpos,"id"),r==="\r"||r===`
`||e.addEvent(t,t,"attr_space"),e.begin=null,R.SCANNING):R.FAIL};Pe[R.SCANNING_CLASS]=function(e,t){const r=e.subject.charAt(t);return/^\w/.exec(r)!==null||r==="_"||r==="-"||r===":"?R.SCANNING_CLASS:r==="}"?(e.begin&&e.lastpos&&e.lastpos>e.begin&&e.addEvent(e.begin+1,e.lastpos,"class"),e.begin=null,R.DONE):/^\s/.exec(r)!==null?(e.begin&&e.lastpos&&e.lastpos>e.begin&&e.addEvent(e.begin+1,e.lastpos,"class"),r==="\r"||r===`
`||e.addEvent(t,t,"attr_space"),e.begin=null,R.SCANNING):R.FAIL};Pe[R.SCANNING_KEY]=function(e,t){const r=e.subject.charAt(t);return r==="="&&e.begin&&e.lastpos?(e.addEvent(e.begin,e.lastpos,"key"),e.addEvent(t,t,"attr_equal_marker"),e.begin=null,R.SCANNING_VALUE):/^[a-zA-Z0-9_:-]/.exec(r)!==null?R.SCANNING_KEY:R.FAIL};Pe[R.SCANNING_VALUE]=function(e,t){const r=e.subject.charAt(t);return r==='"'?(e.begin=t,e.addEvent(t,t,"attr_quote_marker"),R.SCANNING_QUOTED_VALUE):/^[a-zA-Z0-9_:-]/.exec(r)!==null?(e.begin=t,R.SCANNING_BARE_VALUE):R.FAIL};Pe[R.SCANNING_BARE_VALUE]=function(e,t){const r=e.subject.charAt(t);return/^[a-zA-Z0-9_:-]/.exec(r)!==null?R.SCANNING_BARE_VALUE:r==="}"&&e.begin&&e.lastpos?(e.addEvent(e.begin,e.lastpos,"value"),e.begin=null,R.DONE):/^\s/.exec(r)&&e.begin&&e.lastpos?(e.addEvent(e.begin,e.lastpos,"value"),r==="\r"||r===`
`||e.addEvent(t,t,"attr_space"),e.begin=null,R.SCANNING):R.FAIL};Pe[R.SCANNING_ESCAPED]=function(e,t){return R.SCANNING_QUOTED_VALUE};Pe[R.SCANNING_ESCAPED_IN_CONTINUATION]=function(e,t){return R.SCANNING_QUOTED_VALUE_CONTINUATION};Pe[R.SCANNING_QUOTED_VALUE]=function(e,t){const r=e.subject.charAt(t);return r==='"'&&e.begin&&e.lastpos?(e.addEvent(e.begin+1,e.lastpos,"value"),e.addEvent(t,t,"attr_quote_marker"),e.begin=null,R.SCANNING):r===`
`&&e.begin&&e.lastpos?(e.addEvent(e.begin+1,t,"value"),e.begin=null,R.SCANNING_QUOTED_VALUE_CONTINUATION):r==="\\"?R.SCANNING_ESCAPED:R.SCANNING_QUOTED_VALUE};Pe[R.SCANNING_QUOTED_VALUE_CONTINUATION]=function(e,t){const r=e.subject.charAt(t);return e.begin===null&&(e.begin=t),r==='"'&&e.begin&&e.lastpos?(e.addEvent(t,t,"attr_quote_marker"),e.addEvent(e.begin,e.lastpos,"value"),e.begin=null,R.SCANNING):r===`
`&&e.begin&&e.lastpos?(e.addEvent(e.begin,t,"value"),e.begin=null,R.SCANNING_QUOTED_VALUE_CONTINUATION):r==="\\"?R.SCANNING_ESCAPED_IN_CONTINUATION:R.SCANNING_QUOTED_VALUE_CONTINUATION};class _d{constructor(t){this.subject=t,this.state=R.START,this.begin=null,this.lastpos=null,this.matches=[]}addEvent(t,r,n){this.matches.push({startpos:t,endpos:r,annot:n})}feed(t,r){let n=t;for(;n<=r;){if(this.state=Pe[this.state](this,n),this.state===R.DONE)return{status:"done",position:n};if(this.state===R.FAIL)return this.lastpos=n,{status:"fail",position:n};this.lastpos=n,n=n+1}return{status:"continue",position:r}}}Cr.AttributeParser=_d;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.find=Ot.pattern=void 0;const kd=function(e){return new RegExp(e,"yd")};Ot.pattern=kd;const Ad=function(e,t,r,n){t.lastIndex=r;let s;n!==void 0?s=e.substring(0,n+1):s=e;const a=t.exec(s);if(a!==null){const l=[];if(a.indices.length>1)for(let u=1;u<a.indices.length;u++){const[c,d]=a.indices[u];l.push(s.substring(c,d))}return{startpos:a.indices[0][0],endpos:a.indices[0][1]-1,captures:l}}else return null};Ot.find=Ad;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.InlineParser=void 0;const Sd=Cr,Nd=_t,oe=Ot,Ea=9,cs=10,ds=13,Pn=32,La=33,Ba=34,Da=39,$n=40,Td=41,qd=42,Md=43,En=45,Cd=46,Id=58,Od=60,Pd=61,Ln=91,Bn=92,$d=93,Ed=94,Ld=95,Bd=96,Vr=123,an=125,Dd=126,za=/[\r\n"'()*+.:<=[\\\]^_`${}~-]/g,ja=function(e,t,r){za.lastIndex=t;const n=za.exec(e);return n&&n.index<=r?n.index:null},Ra=(0,oe.pattern)(`[^ 	\r
]`),zd=(0,oe.pattern)("[ \\t]*\\r?\\n"),jd=(0,oe.pattern)("['!\"#$%&\\\\'()\\*+,\\-\\.\\/:;<=>?@\\[\\]\\^_`{|}~']"),Rd=(0,oe.pattern)("\\<([^<>\\s]+)\\>"),Fd=(0,oe.pattern)(`[_*~^+='"-]`),Gd=(0,oe.pattern)(":[\\w_+-]+:"),Ud=(0,oe.pattern)("\\.\\."),Vd=(0,oe.pattern)("`*"),Wd=(0,oe.pattern)("`+"),Hd=(0,oe.pattern)("\\$\\$"),Zd=(0,oe.pattern)("\\$"),Xd=(0,oe.pattern)("\\\\"),Yd=(0,oe.pattern)("\\{=[^\\s{}`]+\\}"),Kd=(0,oe.pattern)("\\^([^\\]]+)\\]"),Dn=function(e,t){return t>0&&e.subject.codePointAt(t-1)===Vr||e.subject.codePointAt(t+1)===an},tr=function(){return!0},at=function(e,t,r,n){return function(s,a,l){const u=s.subject;let c=(0,oe.find)(u,Ra,a+1)!==null&&n(s,a),d=(0,oe.find)(u,Ra,a-1)!==null;const p=s.matches[s.matches.length-1],x=p&&p.annot==="open_marker",f=a+1<=l&&u.codePointAt(a+1)===an;let v=a,M=a;x&&(c=!0,d=!1,M=a-1),!x&&f&&(d=!0,c=!1,v=a+1),x&&r.match(/^right/)?r=r.replace(/^right/,"left"):f&&r.match(/^left/)&&(r=r.replace(/^left/,"right"));let I=e;f&&(I="{"+I);const L=s.openers[I];if(d&&L&&L.length>0){const w=L[L.length-1];if(w.endpos!==a-1)return s.clearOpeners(w.startpos,a),s.addMatch(w.startpos,w.endpos,"+"+t,w.matchIndex),s.addMatch(a,v,"-"+t),v+1}if(c){let w=e;return x&&(w="{"+w),s.addOpener(w,M,a,r),a+1}else return s.addMatch(a,v,r),v+1}},Qd={[Bd]:function(e,t,r){const n=e.subject,s=(0,oe.find)(n,Vd,t,r);if(s===null)return null;const a=s.endpos;return(0,oe.find)(n,Hd,t-2)&&!(0,oe.find)(n,Xd,t-3)?(e.matches.pop(),e.matches.pop(),e.addMatch(t-2,a,"+display_math"),e.verbatimType="display_math"):(0,oe.find)(n,Zd,t-1)?(e.matches.pop(),e.addMatch(t-1,a,"+inline_math"),e.verbatimType="inline_math"):(e.addMatch(t,a,"+verbatim"),e.verbatimType="verbatim"),e.verbatim=a-t+1,a+1},[Bn]:function(e,t,r){const n=e.subject,s=(0,oe.find)(n,zd,t+1,r);if(s!==null){if(e.matches.length>0){const a=e.matches[e.matches.length-1];if(a.annot==="str"){let l=a.endpos;const u=a.startpos;for(;l>=u&&(n.codePointAt(l)===Pn||n.codePointAt(l)===Ea);)l=l-1;l<u?e.matches.pop():a.endpos=l}}return e.addMatch(t,t,"escape"),e.addMatch(t+1,s.endpos,"hard_break"),s.endpos+1}else{const a=(0,oe.find)(n,jd,t+1,r);return a!==null?(e.addMatch(t,t,"escape"),e.addMatch(a.startpos,a.endpos,"str"),a.endpos+1):t+1<=r&&n.codePointAt(t+1)===Pn?(e.addMatch(t,t,"escape"),e.addMatch(t+1,t+1,"non_breaking_space"),t+2):(e.addMatch(t,t,"str"),t+1)}},[Od]:function(e,t,r){const n=e.subject,s=(0,oe.find)(n,Rd,t,r);if(s===null)return null;const a=s.endpos,l=s.startpos,u=s.captures[0];return u.match(/[^:]@/)?(e.addMatch(l,l,"+email"),e.addMatch(l+1,a-1,"str"),e.addMatch(a,a,"-email"),a+1):u.match(/[a-zA-Z]:/)?(e.addMatch(l,l,"+url"),e.addMatch(l+1,a-1,"str"),e.addMatch(a,a,"-url"),a+1):null},[Dd]:at("~","subscript","str",tr),[Ed]:at("^","superscript","str",tr),[Ld]:at("_","emph","str",tr),[qd]:at("*","strong","str",tr),[Md]:at("+","insert","str",Dn),[Pd]:at("=","mark","str",Dn),[Da]:at("'","single_quoted","right_single_quote",function(e,t){if(t===0)return!0;{const r=e.subject.codePointAt(t-1);return r===Pn||r===Ea||r===ds||r===cs||r===Ba||r===Da||r===En||r===$n||r===Ln}}),[Ba]:at('"',"double_quoted","left_double_quote",tr),[Vr]:function(e,t,r){return(0,oe.find)(e.subject,Fd,t+1,r)?(e.addMatch(t,t,"open_marker"),t+1):e.allowAttributes?(e.attributeParser=new Sd.AttributeParser(e.subject),e.attributeStart=t,e.attributeSlices=[],t):(e.addMatch(t,t,"str"),t+1)},[Id]:function(e,t,r){const n=(0,oe.find)(e.subject,Gd,t,r);return n?(e.addMatch(n.startpos,n.endpos,"symb"),n.endpos+1):(e.addMatch(t,t,"str"),t+1)},[Cd]:function(e,t,r){return(0,oe.find)(e.subject,Ud,t+1,r)?(e.addMatch(t,t+2,"ellipses"),t+3):null},[Ln]:function(e,t,r){const n=(0,oe.find)(e.subject,Kd,t+1,r);return n?(e.addMatch(t,n.endpos,"footnote_reference"),n.endpos+1):(e.addOpener("[",t,t,"str"),t+1)},[$d]:function(e,t,r){const n=e.openers["["],s=e.subject;if(n&&n.length>0){const a=n[n.length-1];if(a.annot==="reference_link")return e.strMatches((a.subendpos||a.endpos)+1,t-1),s.codePointAt(a.startpos-1)===La&&s.codePointAt(a.startpos-2)!==Bn?(e.addMatch(a.startpos-1,a.startpos-1,"image_marker",a.matchIndex-1),e.addMatch(a.startpos,a.endpos,"+imagetext",a.matchIndex),e.addMatch(a.substartpos||a.startpos,a.substartpos||a.startpos,"-imagetext",a.subMatchIndex)):(e.addMatch(a.startpos,a.endpos,"+linktext",a.matchIndex),e.addMatch(a.substartpos||a.startpos,a.substartpos||a.startpos,"-linktext",a.subMatchIndex)),e.addMatch(a.subendpos||a.endpos,a.subendpos||a.endpos,"+reference",a.subMatchIndex+1),e.addMatch(t,t,"-reference"),e.clearOpeners(a.startpos,t),t+1;if(t+1<=r&&s.codePointAt(t+1)===Ln)return a.annot="reference_link",e.addMatch(t,t,"str"),a.subMatchIndex=e.matches.length-1,e.addMatch(t+1,t+1,"str"),a.substartpos=t,a.subendpos=t+1,e.clearOpeners(a.startpos+1,t-1),t+2;if(t+1<=r&&s.codePointAt(t+1)===$n)return e.openers["("]=[],a.annot="explicit_link",e.addMatch(t,t,"str"),a.subMatchIndex=e.matches.length-1,e.addMatch(t+1,t+1,"str"),a.substartpos=t,a.subendpos=t+1,e.destination=!0,e.clearOpeners(a.startpos+1,t-1),t+2;if(t+1<=r&&s.codePointAt(t+1)===Vr)return e.addMatch(a.startpos,a.endpos,"+span",a.matchIndex),e.addMatch(t,t,"-span"),e.clearOpeners(a.startpos,t),t+1}return null},[$n]:function(e,t,r){return e.destination?(e.addOpener("(",t,t,"str"),t+1):null},[Td]:function(e,t,r){if(!e.destination)return null;const n=e.openers["("];if(n&&n.length>0)return n.pop(),e.addMatch(t,t,"str"),t+1;{const s=e.subject,a=e.openers["["],l=a[a.length-1];if(a&&a.length>0&&l.annot==="explicit_link")return e.strMatches((l.subendpos||l.endpos)+1,t-1),s.codePointAt(l.startpos-1)===La&&s.codePointAt(l.startpos-2)!==Bn?(e.addMatch(l.startpos-1,l.startpos-1,"image_marker",l.matchIndex-1),e.addMatch(l.startpos,l.endpos,"+imagetext",l.matchIndex),e.addMatch(l.substartpos||l.startpos,l.substartpos||l.startpos,"-imagetext",l.subMatchIndex)):(e.addMatch(l.startpos,l.endpos,"+linktext",l.matchIndex),e.addMatch(l.substartpos||l.startpos,l.substartpos||l.startpos,"-linktext",l.subMatchIndex)),e.addMatch(l.subendpos||l.endpos,l.subendpos||l.endpos,"+destination",l.subMatchIndex+1),e.addMatch(t,t,"-destination"),e.destination=!1,e.clearOpeners(l.startpos,t),t+1}return null},[En]:function(e,t,r){const n=e.subject;if(n.codePointAt(t-1)===Vr||n.codePointAt(t+1)===an){const c=at("-","delete","str",Dn)(e,t,r);if(c)return c}let s=t,a=0;for(;s<=r&&n.codePointAt(s)===En;)s++,a++;if(n.codePointAt(s)===an&&a--,a===0)return e.addMatch(t,t+1,"str"),t+2;const l=a%3===0,u=a%2===0;for(;a>0;)l?(e.addMatch(t,t+2,"em_dash"),t=t+3,a=a-3):u?(e.addMatch(t,t+1,"en_dash"),t=t+2,a=a-2):a>=3&&(a%2!==0||a>4)?(e.addMatch(t,t+2,"em_dash"),t=t+3,a=a-3):a>=2?(e.addMatch(t,t+1,"en_dash"),t=t+2,a=a-2):(e.addMatch(t,t,"str"),t=t+1,a=a-1);return t}};class Jd{constructor(t,r={}){this.options=r,this.warn=r.warn||(()=>{}),this.subject=t,this.matches=[],this.openers={},this.verbatim=0,this.verbatimType="",this.destination=!1,this.firstpos=-1,this.lastpos=0,this.allowAttributes=!0,this.attributeParser=null,this.attributeStart=null,this.attributeSlices=null,this.matchers=Qd}addMatch(t,r,n,s){const a={startpos:t,endpos:r,annot:n};s!==void 0?this.matches.splice(s,1,a):this.matches.push(a)}inVerbatim(){return this.verbatim>0}singleChar(t){return this.addMatch(t,t,"str"),t+1}reparseAttributes(){const t=this.attributeSlices;if(t!==null){if(this.allowAttributes=!1,this.attributeParser=null,this.attributeStart=null,t!==null)for(const r of t)this.feed(r.startpos,r.endpos);this.allowAttributes=!0,this.attributeSlices=null}}getMatches(){const t=this.subject;this.attributeParser&&this.reparseAttributes();let r=this.matches.length-1;if(this.matches[r]&&this.matches[r].annot==="soft_break"){this.matches.pop();const n=this.matches[this.matches.length-1];if(n&&n.annot==="str"&&t.codePointAt(n.endpos)===32){for(;n.endpos>=n.startpos&&t.codePointAt(n.endpos)===32;)n.endpos=n.endpos-1;n.endpos<n.startpos&&this.matches.pop()}}if(this.matches.length>0&&this.verbatim>0){const n=this.matches[this.matches.length-1];this.warn(new Nd.Warning("Unclosed verbatim",n.endpos)),this.matches.push({startpos:n.endpos,endpos:n.endpos,annot:"-"+this.verbatimType})}return this.matches}addOpener(t,r,n,s){this.openers[t]||(this.openers[t]=[]),this.openers[t].push({matchIndex:this.matches.length,startpos:r,endpos:n,annot:null,subMatchIndex:this.matches.length,substartpos:null,subendpos:null}),this.addMatch(r,n,s)}clearOpeners(t,r){for(const n in this.openers){const s=this.openers[n];let a=s.length-1;for(;s[a];){const l=s[a];if(l.startpos>=t&&l.endpos<=r)s.splice(a,1);else if(l.substartpos&&l.substartpos>=t&&l.subendpos&&l.subendpos<=r)s[a].substartpos=null,s[a].subendpos=null,s[a].annot=null;else break;a--}}}strMatches(t,r){let n=this.matches.length-1;for(;n>0&&this.matches[n].startpos>=t;)n--;for(this.matches[n].startpos<t&&n++;this.matches[n]&&this.matches[n].endpos<=r;){const s=this.matches[n];s.annot!=="escape"&&s.annot!=="str"&&(s.annot="str"),n++}}feed(t,r){const n=this.subject;(this.firstpos===-1||t<this.firstpos)&&(this.firstpos=t),(this.lastpos===0||r>this.lastpos)&&(this.lastpos=r);let s=t;for(;s<=r;)if(this.attributeParser!==null){const a=s,l=ja(n,s,r);let u;l===null?u=r:u=l;const c=this.attributeParser.feed(a,u),d=c.position;if(c.status==="done"){const p=this.attributeStart;p!==null&&this.addMatch(p,p,"+attributes");const x=this.attributeParser.matches;for(const f of x)this.addMatch(f.startpos,f.endpos,f.annot);this.addMatch(d,d,"-attributes"),this.attributeParser=null,this.attributeStart=null,this.attributeSlices=null,s=d+1}else c.status==="fail"?(this.reparseAttributes(),s=a):c.status==="continue"&&(this.attributeSlices===null&&(this.attributeSlices=[]),this.attributeSlices.push({startpos:a,endpos:d}),s=d+1)}else{const a=ja(n,s,r);let l;if(a===null?l=r+1:l=a,l>s&&(this.addMatch(s,l-1,"str"),s=l,s>r))break;const u=n.codePointAt(s);if(u===void 0)throw new Error("Code point at "+s+" is undefined.");if(u===ds||u===cs)u===ds&&n.codePointAt(s+1)===cs&&s+1<=r?(this.addMatch(s,s+1,"soft_break"),s=s+2):(this.addMatch(s,s,"soft_break"),s=s+1);else if(this.verbatim>0)if(u===96){const c=(0,oe.find)(n,Wd,s,r);if(c){const d=c.endpos;if(c.endpos-s+1===this.verbatim){const p=(0,oe.find)(n,Yd,d+1,r);p&&this.verbatimType==="verbatim"?(this.addMatch(s,d,"-"+this.verbatimType),this.addMatch(p.startpos,p.endpos,"raw_format"),s=p.endpos+1):(this.addMatch(s,d,"-"+this.verbatimType),s=d+1),this.verbatim=0,this.verbatimType="verbatim"}else this.addMatch(s,d,"str"),s=d+1}else this.addMatch(s,r,"str"),s=r+1}else this.addMatch(s,s,"str"),s=s+1;else{const c=this.matchers[u];if(c){const d=c(this,s,r);d===null?s=this.singleChar(s):s=d}else s=this.singleChar(s)}}}}xn.InlineParser=Jd;Object.defineProperty(Mr,"__esModule",{value:!0});Mr.parseEvents=void 0;const Fa=_t,eh=Cr,le=Ot,zn=xn,jn=function(e){return e==="+"||e==="-"||e==="*"||e===":"?[e]:/^[+*-] \[[Xx ]\]/.exec(e)?["X"]:/^[(]?[0-9]+[).]/.exec(e)?[e.replace(/[0-9]+/,"1")]:/^[(]?[ivxlcdm][).]/.exec(e)?[e.replace(/[a-z]+/,"i"),e.replace(/[a-z]+/,"a")]:/^[(]?[IVXLCDM][).]/.exec(e)?[e.replace(/[A-Z]+/,"I"),e.replace(/[A-Z]+/,"A")]:/^[(]?[ivxlcdm]+[).]/.exec(e)?[e.replace(/[a-z]+/,"i")]:/^[(]?[IVXLCDM]+[).]/.exec(e)?[e.replace(/[A-Z]+/,"I")]:/^[(]?[a-z][).]/.exec(e)?[e.replace(/[a-z]/,"a")]:/^[(]?[A-Z][).]/.exec(e)?[e.replace(/[A-Z]/,"A")]:[]},th=function(e){return e===32||e===9},rh=function(e){return e===10||e===13},Ga=(0,le.pattern)("[ \\t]*\\r?\\n"),nh=(0,le.pattern)("^\\w+\\s"),Rr=(0,le.pattern)("[ \\t\\r\\n]"),sh=(0,le.pattern)("[^ \\t\\r\\n]+"),Ua=(0,le.pattern)("[>][ \\t\\r\\n]"),Va=(0,le.pattern)("#+"),ah=(0,le.pattern)("(~~~~*|````*)([ \\t]*)([^ \\t\\r\\n`]*)[ \\t]*\\r?\\n"),oh=(0,le.pattern)("(:?)--*(:?)([ \\t]*\\|[ \\t]*)"),ih=(0,le.pattern)("[^`|\\r\\n]*(?:[|]|`+)"),lh=(0,le.pattern)("\\^[ \\t]+"),uh=(0,le.pattern)("\\[\\^([^\\]]+)\\]:[ \\t\\r\\n]"),ch=(0,le.pattern)("[-*][ 	]*[-*][ \\t]*[-*][-* \\t]*\\r?\\n"),dh=(0,le.pattern)("(::::*)[ \\t]*\\r?\\n"),hh=(0,le.pattern)("(::::*)[ \\t]*"),ph=(0,le.pattern)("([\\w_-]*)[ \\t]*\\r?\\n"),fh=(0,le.pattern)("\\[([^\\]\\r\\n]*)\\]:[ \\t]*([^ \\t\\r\\n]*)[\\r\\n]"),Wa=(0,le.pattern)("(\\|[^\\r\\n]*\\|)[ \\t]*\\r?\\n"),Rn=(0,le.pattern)("(:?[-*+:]|\\([0-9]+\\)|[0-9]+[.)]|[ivxlcdmIVXLCDM]+[.)]|\\([ivxlcdmIVXLCDM]+\\)|[a-zA-Z][.)]|\\([a-zA-Z]\\))[ \\t\\r\\n]"),Fn=(0,le.pattern)("[*+-] \\[[Xx ]\\][ \\t\\r\\n]");var X;(function(e){e[e.None=0]="None",e[e.Inline=1]="Inline",e[e.Block=2]="Block",e[e.Text=3]="Text",e[e.Cells=4]="Cells",e[e.Attributes=5]="Attributes",e[e.ListItem=6]="ListItem"})(X||(X={}));class qe{constructor(t,r){this.name=t.name,this.type=t.type,this.content=t.content,this.continue=t.continue,this.close=t.close,this.indent=0,this.inlineParser=null,this.attributeParser=null,this.extra=r}}class mh{constructor(t,r={}){t.charAt(t.length-1)!==`
`&&(t=t+`
`),this.subject=t,this.maxoffset=t.length-1,this.options=r,this.warn=r.warn||(()=>{}),this.indent=0,this.startline=0,this.starteol=0,this.endeol=0,this.matches=[],this.containers=[],this.pos=0,this.lastMatchedContainer=0,this.finishedLine=!1,this.returned=0,this.paraSpec={name:"para",type:X.Block,content:X.Inline,continue:n=>this.find(Rr)===null,open:n=>(this.addContainer(new qe(n,{})),this.addMatch(this.pos,this.pos,"+para"),!0),close:()=>{this.getInlineMatches(),this.containers.pop();const n=this.matches[this.matches.length-1],s=n&&n.endpos+1||this.pos;this.addMatch(s,s,"-para")}},this.specs=[{name:"block_quote",type:X.Block,content:X.Block,continue:n=>this.find(Ua)!==null?(this.pos=this.pos+1,!0):!1,open:n=>this.find(Ua)!==null?(this.addContainer(new qe(n,{})),this.addMatch(this.pos,this.pos,"+block_quote"),this.pos=this.pos+1,!0):!1,close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-block_quote")}},{name:"heading",type:X.Block,content:X.Inline,continue:n=>{const s=this.find(Va);return s&&n.extra.level===s.endpos-s.startpos+1&&(0,le.find)(this.subject,Rr,s.endpos+1)?(this.pos=s.endpos+1,!0):!1},open:n=>{const s=this.find(Va);if(s&&(0,le.find)(this.subject,Rr,s.endpos+1)){const a=s.endpos-s.startpos+1;return this.addContainer(new qe(n,{level:a})),this.addMatch(s.startpos,s.endpos,"+heading"),this.pos=s.endpos+1,!0}else return!1},close:()=>{this.getInlineMatches(),this.containers.pop();const n=this.matches[this.matches.length-1],s=n&&n.endpos+1||this.pos;this.addMatch(s,s,"-heading")}},{name:"caption",type:X.Block,content:X.Inline,continue:n=>(0,le.find)(this.subject,Rr,this.pos)===null,open:n=>{const s=this.find(lh);return s?(this.pos=s.endpos+1,this.addContainer(new qe(n,{})),this.addMatch(this.pos,this.pos,"+caption"),!0):!1},close:()=>{this.getInlineMatches(),this.containers.pop(),this.addMatch(this.pos-1,this.pos-1,"-caption")}},{name:"footnote",type:X.Block,content:X.Block,continue:n=>this.indent>(n.extra.indent||0)||this.pos===this.starteol,open:n=>{const s=this.find(uh);if(s){const a=s.startpos,l=s.endpos,u=s.captures[0];return this.addContainer(new qe(n,{note_label:u,indent:this.indent})),this.addMatch(a,a,"+footnote"),this.addMatch(a+2,l-3,"note_label"),this.pos=l,!0}else return!1},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-footnote")}},{name:"reference_definition",type:X.Block,content:X.None,continue:n=>{if(n.extra.indent>=this.indent)return!1;const s=this.find(sh);return this.pos<this.starteol&&s&&s.endpos===this.starteol-1?(this.addMatch(this.pos,this.starteol-1,"reference_value"),this.pos=this.starteol,!0):!1},open:n=>{const s=this.find(fh);if(s){const a=s.captures[0],l=s.captures[1];return this.addContainer(new qe(n,{key:a,indent:this.indent})),this.addMatch(s.startpos,s.startpos,"+reference_definition"),this.addMatch(s.startpos,s.startpos+a.length+1,"reference_key"),l.length>0&&this.addMatch(this.starteol-l.length,this.starteol-1,"reference_value"),this.pos=this.starteol-1,!0}else return!1},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-reference_definition")}},{name:"thematic_break",type:X.Block,content:X.None,continue:n=>!1,open:n=>{const s=this.find(ch);return s?(this.addContainer(new qe(n,{})),this.addMatch(s.startpos,s.endpos,"thematic_break"),this.pos=s.endpos,!0):!1},close:()=>{this.containers.pop()}},{name:"list",type:X.Block,content:X.ListItem,continue:n=>{if(this.indent>n.extra.indent||this.pos===this.starteol)return!0;{const s=this.find(Rn);if(s===null)return!1;let a=this.subject.substring(s.startpos,s.endpos);const l=this.find(Fn);l!==null&&(a=this.subject.substring(l.startpos,l.startpos+5));const u=jn(a),c=[];for(const d of n.extra.styles)u.includes(d)&&c.push(d);if(c.length>0)return n.extra.styles=c,!0}return!1},open:n=>{const s=this.find(Rn);if(s===null)return!1;const a=s.startpos,l=s.endpos;let u=this.subject.substring(a,l);const c=this.find(Fn);c!==null&&(u=this.subject.substring(c.startpos,c.startpos+5));const d=jn(u);if(d.length===0)return!1;const p={styles:d,indent:this.indent};this.addContainer(new qe(n,p));let x="+list";for(const f of d)x=x+"|"+f;return this.addMatch(a,l-1,x),!0},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-list")}},{name:"list_item",type:X.ListItem,content:X.Block,continue:n=>this.indent>n.extra.indent||this.pos===this.starteol,open:n=>{const s=this.find(Rn);if(s===null)return!1;const a=s.startpos,l=s.endpos;let u=this.subject.substring(a,l),c=null;const d=this.find(Fn);d!==null&&(u=this.subject.substring(d.startpos,d.startpos+5),c=this.subject.substring(d.startpos+3,d.startpos+4));const p=jn(u);if(p.length===0)return!1;const x={styles:p,indent:this.indent};this.addContainer(new qe(n,x));let f="+list_item";for(const v of p)f=f+"|"+v;return this.addMatch(a,l-1,f),this.pos=l,c&&(c===" "?this.addMatch(a+2,a+4,"checkbox_unchecked"):this.addMatch(a+2,a+4,"checkbox_checked"),this.pos=a+5),!0},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-list_item")}},{name:"table",type:X.Block,content:X.Cells,continue:n=>{const s=this.find(Wa);if(s){const a=s.captures[0];return this.parseTableRow(s.startpos,s.startpos+a.length-1)}else return!1},open:n=>{const s=this.find(Wa);if(s){this.addContainer(new qe(n,{columns:0}));const a=s.captures[0];return this.addMatch(s.startpos,s.startpos,"+table"),this.parseTableRow(s.startpos,s.startpos+a.length-1)?!0:(this.matches.pop(),this.containers.pop(),!1)}else return!1},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-table")}},{name:"attributes",type:X.Block,content:X.Attributes,open:n=>{if(this.subject.codePointAt(this.pos)===123){const s=new eh.AttributeParser(this.subject),a=s.feed(this.pos,this.starteol);if(a.status==="fail"||a.status==="done"&&(0,le.find)(this.subject,Ga,a.position+1)===null)return!1;{const l=this.addContainer(new qe(n,{status:a.status,indent:this.indent,startpos:this.pos,slices:[]}));return l.attributeParser=s,l.extra.slices=[{startpos:this.pos,endpos:this.starteol}],this.pos=this.starteol,!0}}else return!1},continue:n=>{if(n.extra.status==="done")return!1;if(n.attributeParser&&this.indent>n.extra.indent){n.extra.slices.push({startpos:this.pos,endpos:this.starteol});const l=n.attributeParser.feed(this.pos,this.endeol);if(n.extra.status=l.status,l.status!=="fail"||!(0,le.find)(this.subject,Ga,l.position+1))return this.pos=this.starteol,!0}this.addMatch(n.extra.startpos,n.extra.startpos,"+para");const s=this.containers.pop(),a=this.addContainer(new qe(this.paraSpec,{}));if(!a.inlineParser||!s)throw new Error("Missing inlineParser or attrContainer");return a.inlineParser.attributeSlices=s.extra.slices,a.inlineParser.reparseAttributes(),this.pos=a.inlineParser.lastpos+1,!0},close:()=>{const n=this.containers.pop();if(n)if(n.extra.status==="continue"){this.addMatch(n.extra.startpos,n.extra.startpos,"+para");const s=this.addContainer(new qe(this.paraSpec,{}),!0);if(!s||!s.inlineParser)throw new Error("Could not add paragraph");s.inlineParser.attributeSlices=n.extra.slices,s.inlineParser.reparseAttributes(),s.close()}else{if(this.addMatch(n.extra.startpos,n.extra.startpos,"+block_attributes"),n.attributeParser){const s=n.attributeParser.matches;for(const a of s)this.matches.push(a)}this.addMatch(this.pos,this.pos,"-block_attributes")}}},{name:"fenced_div",type:X.Block,content:X.Block,continue:n=>{const s=this.tip();if(s&&s.name==="code_block")return!0;const a=this.find(dh);if(a&&n.extra.colons){const l=a.captures[0];if(l.length>=n.extra.colons)return n.extra.endFenceStartpos=a.startpos,n.extra.endFenceEndpos=a.startpos+l.length-1,this.pos=a.endpos,!1}return!0},open:n=>{const s=this.find(hh);if(!s)return!1;const a=s.captures[0],l=(0,le.find)(this.subject,ph,s.endpos+1);if(!l)return!1;const u=l.startpos,c=l.captures[0];return this.addContainer(new qe(n,{colons:a.length})),this.addMatch(s.startpos,s.endpos,"+div"),c.length>0&&this.addMatch(u,u+c.length-1,"class"),this.pos=l.endpos+1,this.finishedLine=!0,!0},close:()=>{const n=this.containers.pop();if(!n)return;const s=n.extra.endFenceStartpos||this.pos,a=n.extra.endFenceEndpos||this.pos;this.addMatch(s,a,"-div"),s===a&&this.warn(new Fa.Warning("Unclosed div",this.pos))}},{name:"code_block",type:X.Block,content:X.Text,continue:n=>{const s=this.find(n.extra.closePattern);return s?(n.extra.endFenceStartpos=s.startpos,n.extra.endFenceEndpos=s.startpos+s.captures[0].length-1,this.pos=s.endpos,this.finishedLine=!0,!1):!0},open:n=>{const s=this.find(ah);if(s){const[a,l,u]=s.captures,c=u.charAt(0)==="="&&!0||!1,d=(0,le.pattern)("("+a+a.substring(0,1)+"*)[ \\t]*[\\r\\n]"),p=this.addContainer(new qe(n,{closePattern:d}));if(p.indent=this.indent,this.addMatch(s.startpos,s.startpos+a.length-1,"+code_block"),u.length>0){const x=s.startpos+a.length+l.length;c?this.addMatch(x,x+u.length-1,"raw_format"):this.addMatch(x,x+u.length-1,"code_language")}return this.pos=s.endpos,this.finishedLine=!0,!0}else return!1},close:()=>{const n=this.containers.pop();if(!n)return;const s=n.extra.endFenceStartpos||this.pos,a=n.extra.endFenceEndpos||this.pos;this.addMatch(s,a,"-code_block"),s===a&&this.warn(new Fa.Warning("Unclosed code block",this.pos))}}]}find(t){return(0,le.find)(this.subject,t,this.pos)}tip(){return this.containers.length>=1?this.containers[this.containers.length-1]:null}addMatch(t,r,n){this.matches.push({startpos:Math.min(t,this.maxoffset),endpos:Math.min(r,this.maxoffset),annot:n})}getInlineMatches(){var t;const r=(t=this.tip())===null||t===void 0?void 0:t.inlineParser;if(r){let n;for(const s of r.getMatches())n&&n.annot==="str"&&s.annot==="str"&&s.startpos===n.endpos+1?this.matches[this.matches.length-1].endpos=s.endpos:this.matches.push(s),n=s}}closeUnmatchedContainers(){const t=this.lastMatchedContainer;let r=this.tip();for(;r&&this.containers.length-1>t;)r.close(),r=this.tip()}addContainer(t,r){r||this.closeUnmatchedContainers();let n=this.tip();for(;n&&n.content!==t.type;)n.close(),n=this.tip();return t.content===X.Inline&&(t.inlineParser=new zn.InlineParser(this.subject,{warn:this.warn})),this.containers.push(t),t}skipSpace(){const t=this.subject;let r=this.pos;for(;th(t.codePointAt(r));)r++;this.indent=r-this.startline,this.pos=r}getEol(){const t=this.subject;let r=this.pos;for(;!rh(t.codePointAt(r));)r++;this.starteol=r,t.codePointAt(r)===13&&t.codePointAt(r+1)===10?this.endeol=r+1:this.endeol=r}parseTableCell(){const t=new zn.InlineParser(this.subject,{warn:this.warn});let r=!1;const n=this.pos-1;let s=n;for(this.skipSpace();!r;){const a=this.find(ih);if(a===null){r=!1;break}else{const l=a.endpos;this.subject.charAt(l)==="`"||t.inVerbatim()?t.feed(this.pos,l):this.subject.charAt(l-1)==="\\"?t.feed(this.pos,l):(t.feed(this.pos,l-1),s=l,r=!0),this.pos=l+1}}if(r){const a=t.getMatches();return{startpos:n,endpos:s,matches:a}}else return null}parseTableRow(t,r){const n=this.matches.length,s=this.pos;this.addMatch(t,t,"+row"),this.pos++;const a=[];let l=this.pos,u=!1;for(;!u;){const c=(0,le.find)(this.subject,oh,l);if(c!==null){const[d,p,x]=c.captures;let f="separator_default";if(d.length>0&&p.length>0?f="separator_center":p.length>0?f="separator_right":d.length>0&&(f="separator_left"),a.push({startpos:c.startpos,endpos:c.endpos-x.length,annot:f}),l=c.endpos+1,l===this.starteol){u=!0;break}}else break}if(u){for(const c of a)this.addMatch(c.startpos,c.endpos,c.annot);return this.addMatch(this.starteol-1,this.starteol-1,"-row"),this.pos=this.starteol,this.finishedLine=!0,!0}for(;this.pos<=r;){const c=this.parseTableCell();if(c!==null){this.addMatch(c.startpos,c.startpos,"+cell");const d=c.matches;d.forEach((p,x)=>{const f=p.startpos;let v=p.endpos;if(x===d.length-1&&p.annot==="str")for(;this.subject.codePointAt(v)===32&&v>=f;)v=v-1;this.addMatch(f,v,p.annot)}),this.addMatch(c.endpos,c.endpos,"-cell")}else{for(this.pos=s;this.matches.length>n;)this.matches.pop();return!1}}return this.addMatch(this.pos,this.pos,"-row"),this.pos=this.starteol,this.finishedLine=!0,!0}[Symbol.iterator](){const t=this.specs,r=this.subject.length;this.returned=0;const n=this;return{next(){for(;n.pos<r;){if(n.matches.length>0&&n.returned<n.matches.length)return n.returned=n.returned+1,{value:n.matches[n.returned-1],done:!1};n.indent=0,n.startline=n.pos,n.finishedLine=!1,n.getEol(),n.lastMatchedContainer=-1;let s=0;for(;s<n.containers.length;){const a=n.containers[s];if(n.skipSpace(),a.continue(a))n.lastMatchedContainer=s;else break;s=s+1}if(n.finishedLine)for(;n.containers.length>0&&n.lastMatchedContainer<n.containers.length-1;){const a=n.tip();a&&a.close()}if(!n.finishedLine){n.skipSpace();let a=n.pos===n.starteol,l=!1,u=n.containers[n.lastMatchedContainer],c=!a&&(!u||u.content===X.Block||u.content===X.ListItem)&&!n.find(nh);for(;c;){c=!1;for(const d of t)if((!u&&d.type===X.Block||u&&u.content===d.type)&&d.open(d)){if(n.tip())n.lastMatchedContainer=n.containers.length-1,u=n.containers[n.lastMatchedContainer],n.finishedLine?c=!1:(n.skipSpace(),l=!0,c=d.content===X.Block||d.content===X.ListItem);else throw new Error("No tip after opening container");break}}if(!n.finishedLine){n.skipSpace(),a=n.pos===n.starteol;let d=n.tip();if(!a&&!l&&n.lastMatchedContainer<n.containers.length-1&&d&&d.content===X.Inline||n.closeUnmatchedContainers(),d=n.tip(),(!d||d.content===X.Block)&&(a?l||n.addMatch(n.pos,n.endeol,"blankline"):(n.paraSpec.open(n.paraSpec),d=n.tip(),d&&(d.inlineParser=new zn.InlineParser(n.subject,n.options)))),d&&d.content===X.Text){let p=n.pos;d.indent!==null&&n.indent>d.indent&&(p=p-(n.indent-d.indent)),n.addMatch(p,n.endeol,"str")}else d&&d.content===X.Inline&&!a&&d.inlineParser&&d.inlineParser.feed(n.pos,n.endeol)}}n.pos=(n.endeol||n.pos)+1}return n.lastMatchedContainer=-1,n.closeUnmatchedContainers(),n.matches.length>0&&n.returned<n.matches.length?(n.returned=n.returned+1,{value:n.matches[n.returned-1],done:!1}):{value:{startpos:n.pos,endpos:n.pos,annot:""},done:!0}}}}}const gh=function(e,t={}){return new mh(e,t)};Mr.parseEvents=gh;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.isCaption=Ue.isRow=Ue.isBlock=Ue.isInline=void 0;const bh={para:!0,heading:!0,block_quote:!0,thematic_break:!0,section:!0,div:!0,code_block:!0,raw_block:!0,bullet_list:!0,ordered_list:!0,task_list:!0,definition_list:!0,table:!0,reference:!0,footnote:!0};function xh(e){return bh[e.tag]||!1}Ue.isBlock=xh;const yh={str:!0,soft_break:!0,hard_break:!0,non_breaking_space:!0,symb:!0,verbatim:!0,raw_inline:!0,inline_math:!0,display_math:!0,url:!0,email:!0,footnote_reference:!0,smart_punctuation:!0,emph:!0,strong:!0,link:!0,image:!0,span:!0,mark:!0,superscript:!0,subscript:!0,insert:!0,delete:!0,double_quoted:!0,single_quoted:!0};function vh(e){return yh[e.tag]||!1}Ue.isInline=vh;function wh(e){return"head"in e}Ue.isRow=wh;function _h(e){return!("head"in e)}Ue.isCaption=_h;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isInline=e.isCaption=e.isRow=e.isBlock=e.getStringContent=e.renderAST=e.parse=void 0;const t=Mr,r=_t,n=Ue;Object.defineProperty(e,"isRow",{enumerable:!0,get:function(){return n.isRow}}),Object.defineProperty(e,"isBlock",{enumerable:!0,get:function(){return n.isBlock}}),Object.defineProperty(e,"isCaption",{enumerable:!0,get:function(){return n.isCaption}}),Object.defineProperty(e,"isInline",{enumerable:!0,get:function(){return n.isInline}});const s=function(w){const k=[];return a(w,k),k.join("")};e.getStringContent=s;const a=function(w,k){if("text"in w)k.push(w.text);else if("tag"in w&&(w.tag==="soft_break"||w.tag==="hard_break"))k.push(`
`);else if("children"in w)for(const P of w.children)a(P,k)},l=function(w){return w.replace(/^ `/,"`").replace(/` $/,"`")},u={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3,I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},c=function(w){let k=0,P=0,j=w.length-1;for(;j>=0;){const F=w.charAt(j),z=u[F];if(!z)throw new Error("Encountered bad character in roman numeral "+w);z<P?k=k-z:k=k+z,P=z,j=j-1}return k},d=function(w,k){const P=k.replace(/[().]/g,""),j=w.replace(/[().]/g,"");switch(P){case"1":return parseInt(j,10);case"A":return(j.codePointAt(0)||65)-65+1;case"a":return(j.codePointAt(0)||97)-97+1;case"I":return c(j);case"i":return c(j)}};var p;(function(w){w[w.Normal=0]="Normal",w[w.Verbatim=1]="Verbatim",w[w.Literal=2]="Literal"})(p||(p={}));const x=function(w){return w.trim().replace(/[ \t\r\n]+/g," ")},f=function(w,k={}){const P=[-1];if(k.sourcePositions)for(let S=0;S<w.length;S++)w[S]===`
`&&P.push(S);const j=function(S){const N=P.length;let q=0,y=N-1,g=0,$=0;for(;!g;){const G=q+~~((y-q)/2);P[G]>S?y=G:P[G]<=S&&(G===y||P[G+1]>S?(g=G+1,$=S-P[G]):q===G&&q<y?q=G+1:q=G)}return{line:g,col:$,offset:S}};let F=p.Normal,z="";const fe={},se={},pe={},Te={},Y={};let de=0;const ke=(0,t.parseEvents)(w,k),Ae=k.warn||(()=>{}),st=function(S){if(Object.keys(Y).length>0){S.attributes=S.attributes||{};for(const N in Y)S.attributes[N]=Y[N],delete Y[N]}},Ir=function(S){const N=S.replace(/[\]\[~!@#$%^&*(){}`,.<>\\|=+/?\s]+/g," ").trim().replace(/ +/g,"-");let q=0,y=N;for(;!y||Te[y];)q=q+1,y=(N||"s")+"-"+q;return y},ne=function(S){const N={children:[],data:{},pos:S,attributes:void 0};st(N),me.push(N)},re=function(S){const N=me.pop();if(!N)throw new Error("Container stack is empty (popContainer)");return S&&N.pos&&(N.pos.end=S.end),N},V=function(){if(me.length>0)return me[me.length-1];throw new Error("Container stack is empty (topContainer)")},Or=function(){const S=V();return S.children.length>0?S.children[S.children.length-1]:S},U=function(S){me.length>0&&me[me.length-1].children.push(S)},gi={str:(S,N,q,y)=>{const g=w.substring(N,q+1);F===p.Normal?U({tag:"str",text:g,pos:y}):z+=g},soft_break:(S,N,q,y)=>{F===p.Normal?U({tag:"soft_break",pos:y}):z+=`
`},escape:(S,N,q,y)=>{F===p.Verbatim&&(z+="\\")},hard_break:(S,N,q,y)=>{F===p.Normal?U({tag:"hard_break",pos:y}):z+=`
`},non_breaking_space:(S,N,q,y)=>{F===p.Verbatim?z+="\\ ":U({tag:"non_breaking_space",pos:y})},symb:(S,N,q,y)=>{if(F===p.Normal){const g=w.substring(N+1,q);U({tag:"symb",alias:g,pos:y})}else{const g=w.substring(N,q+1);z+=g}},footnote_reference:(S,N,q,y)=>{const g=w.substring(N+2,q);U({tag:"footnote_reference",text:x(g),pos:y})},"+reference_definition":(S,N,q,y)=>{ne(y)},"-reference_definition":(S,N,q,y)=>{const g=re(y),$=x(g.data.key),G={tag:"reference",label:$,destination:g.data.value||"",attributes:g.attributes,pos:g.pos};g.data.key&&(fe[$]=G)},reference_key:(S,N,q,y)=>{V().data.key=w.substring(N+1,q),V().data.value=""},reference_value:(S,N,q,y)=>{V().data.value=V().data.value+w.substring(N,q+1)},"+emph":(S,N,q,y)=>{ne(y)},"-emph":(S,N,q,y)=>{const g=re(y);U({tag:"emph",children:g.children,pos:g.pos})},"+strong":(S,N,q,y)=>{ne(y)},"-strong":(S,N,q,y)=>{const g=re(y);U({tag:"strong",children:g.children,pos:g.pos})},"+span":(S,N,q,y)=>{ne(y)},"-span":(S,N,q,y)=>{const g=re(y);U({tag:"span",children:g.children,pos:g.pos})},"+mark":(S,N,q,y)=>{ne(y)},"-mark":(S,N,q,y)=>{const g=re(y);U({tag:"mark",children:g.children,pos:g.pos})},"+superscript":(S,N,q,y)=>{ne(y)},"-superscript":(S,N,q,y)=>{const g=re(y);U({tag:"superscript",children:g.children,pos:g.pos})},"+subscript":(S,N,q,y)=>{ne(y)},"-subscript":(S,N,q,y)=>{const g=re(y);U({tag:"subscript",children:g.children,pos:g.pos})},"+delete":(S,N,q,y)=>{ne(y)},"-delete":(S,N,q,y)=>{const g=re(y);U({tag:"delete",children:g.children,pos:g.pos})},"+insert":(S,N,q,y)=>{ne(y)},"-insert":(S,N,q,y)=>{const g=re(y);U({tag:"insert",children:g.children,pos:g.pos})},"+double_quoted":(S,N,q,y)=>{ne(y)},"-double_quoted":(S,N,q,y)=>{const g=re(y);U({tag:"double_quoted",children:g.children,pos:g.pos})},"+single_quoted":(S,N,q,y)=>{ne(y)},"-single_quoted":(S,N,q,y)=>{const g=re(y);U({tag:"single_quoted",children:g.children,pos:g.pos})},"+attributes":(S,N,q,y)=>{ne(y)},"-attributes":(S,N,q,y)=>{const g=re(y);if(g.attributes&&me.length>0){g.attributes.id&&(Te[g.attributes.id]=!0);let $=Or();if($===V())return;let G=!1;if("tag"in $&&$.tag==="str"){const K=$.text.match(/[^\s]+$/);if(K&&K.index&&K.index>0){let Fe;if($.pos){const Ge=$.pos.end;$.pos.end={line:Ge.line,col:Ge.col-K[0].length,offset:Ge.offset-K[0].length},Fe={start:{line:Ge.line,col:Ge.col-K[0].length+1,offset:Ge.offset-K[0].length+1},end:Ge}}$.text=$.text.substring(0,K.index),U({tag:"str",text:K[0],pos:Fe})}else K||(G=!0)}if($=Or(),G){Ae(new r.Warning("Ignoring unattached attribute",k.sourcePositions?j(N):N));return}$.attributes||($.attributes={});for(const K in g.attributes)K==="class"&&$.attributes[K]?$.attributes[K]=$.attributes[K]+" "+g.attributes[K]:$.attributes[K]=g.attributes[K]}},"+block_attributes":(S,N,q,y)=>{ne(y)},"-block_attributes":(S,N,q,y)=>{const g=re(y);if(g.attributes&&me.length>0){g.attributes.id&&(Te[g.attributes.id]=!0);for(const $ in g.attributes)$==="class"&&Y[$]?Y[$]=Y[$]+" "+g.attributes[$]:Y[$]=g.attributes[$]}},class:(S,N,q,y)=>{const g=V(),$=w.substring(N,q+1);g.attributes||(g.attributes={}),g.attributes.class?g.attributes.class=g.attributes.class+" "+$:g.attributes.class=$},id:(S,N,q,y)=>{const g=V(),$=w.substring(N,q+1);g.attributes?g.attributes.id=$:g.attributes={id:$}},key:(S,N,q,y)=>{const g=V(),$=w.substring(N,q+1);g.data.key=$,g.attributes||(g.attributes={}),g.attributes[g.data.key]=""},value:(S,N,q,y)=>{const g=V(),$=w.substring(N,q+1).replace(/[ \r\n]+/g," ").replace(/\\([.,\\/#!$%^&*;:{}=\-_`~+[\]()'"?|])/g,"$1");if(g.attributes||(g.attributes={}),g.data.key)g.attributes[g.data.key]=g.attributes[g.data.key]+$;else throw new Error("Encountered value without key")},"+linktext":(S,N,q,y)=>{ne(y),V().data.isimage=!1},"-linktext":(S,N,q,y)=>{},"+imagetext":(S,N,q,y)=>{ne(y),V().data.isimage=!0},"-imagetext":(S,N,q,y)=>{},"+destination":(S,N,q,y)=>{F=p.Literal},"-destination":(S,N,q,y)=>{const g=re(y);U({tag:g.data.isimage?"image":"link",destination:z.replace(/[\r\n]/g,""),children:g.children,pos:g.pos}),F=p.Normal,z=""},"+reference":(S,N,q,y)=>{F=p.Literal},"-reference":(S,N,q,y)=>{const g=re(y);let $=z;$.length===0&&($=s(g)),U({tag:g.data.isimage?"image":"link",reference:x($),children:g.children,pos:g.pos}),F=p.Normal,z=""},"+verbatim":(S,N,q,y)=>{F=p.Verbatim,ne(y)},"-verbatim":(S,N,q,y)=>{const g=re(y);U({tag:"verbatim",text:l(z),pos:g.pos}),F=p.Normal,z=""},raw_format:(S,N,q,y)=>{const g=w.substring(N,q+1).replace(/^\{?=/,"").replace(/\}$/,""),$=V();if(F===p.Verbatim)$.data.format=g;else{const G=$.children[$.children.length-1];if(G&&"tag"in G&&G.tag==="verbatim")G.tag="raw_inline",G.format=g;else throw new Error("raw_format is not after verbatim or code_block.")}},"+display_math":(S,N,q,y)=>{F=p.Verbatim,ne(y)},"+inline_math":(S,N,q,y)=>{F=p.Verbatim,ne(y)},"-display_math":(S,N,q,y)=>{const g=re(y);U({tag:"display_math",text:l(z),pos:g.pos}),F=p.Normal,z=""},"-inline_math":(S,N,q,y)=>{const g=re(y);U({tag:"inline_math",text:l(z),pos:g.pos}),F=p.Normal,z=""},"+url":(S,N,q,y)=>{F=p.Literal,ne(y)},"-url":(S,N,q,y)=>{const g=re(y);U({tag:"url",text:z.replace(/[\r\n]/g,""),pos:g.pos}),F=p.Normal,z=""},"+email":(S,N,q,y)=>{F=p.Literal,ne(y)},"-email":(S,N,q,y)=>{const g=re(y);U({tag:"email",text:z.replace(/[\r\n]/g,""),pos:g.pos}),F=p.Normal,z=""},"+para":(S,N,q,y)=>{ne(y)},"-para":(S,N,q,y)=>{const g=re(y);U({tag:"para",children:g.children,attributes:g.attributes,pos:g.pos})},"+heading":(S,N,q,y)=>{ne(y),V().data.level=1+q-N},"-heading":(S,N,q,y)=>{const g=re(y);g.attributes||(g.attributes={}),g.autoAttributes||(g.autoAttributes={});const $=s(g).trim();g.attributes.id||(g.autoAttributes.id=Ir($),Te[g.autoAttributes.id]=!0);const G=x($);!fe[G]&&!se[G]&&(se[G]={tag:"reference",label:G,destination:"#"+(g.attributes.id||g.autoAttributes.id)});let K=V();if(K.data.headinglevel!==void 0){for(;K&&K.data.headinglevel!==void 0&&K.data.headinglevel>=g.data.level;)K=re(y),U({tag:"section",children:K.children,attributes:K.attributes,autoAttributes:K.autoAttributes,pos:K.pos}),K=V();ne(y),V().data.headinglevel=g.data.level,g.autoAttributes&&g.autoAttributes.id&&(V().autoAttributes=g.autoAttributes,delete g.autoAttributes),g.attributes&&g.attributes.id&&(V().attributes=g.attributes,delete g.attributes)}U({tag:"heading",level:g.data.level,children:g.children,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos})},"+list":(S,N,q,y)=>{ne(y),V().data.styles=S,V().data.blanklines=!1,V().data.tight=!0,de++},"-list":(S,N,q,y)=>{const g=re(y),$=g.data.styles[0];if(!$)throw new Error("No style defined for list");const G=d(g.data.firstMarker,$);U($===":"?{tag:"definition_list",children:g.children,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos}:$==="X"?{tag:"task_list",tight:g.data.tight,children:g.children,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos}:$==="+"||$==="*"||$==="-"?{tag:"bullet_list",tight:g.data.tight,style:$,children:g.children,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos}:{tag:"ordered_list",style:$,children:g.children,start:G,tight:g.data.tight,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos}),de--},"+list_item":(S,N,q,y)=>{S.length<V().data.styles.length&&(V().data.styles=S),V().data.firstMarker||(V().data.firstMarker=w.substring(N,q+1)),ne(y),S.length===1&&S[0]===":"&&(V().data.definitionList=!0)},"-list_item":(S,N,q,y)=>{const g=re(y);if(g.data.definitionList)if(g.children[0]&&g.children[0].tag==="para"){const $={tag:"term",children:g.children[0].children};g.children.shift();const G={tag:"definition",children:g.children};U({tag:"definition_list_item",children:[$,G],attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos})}else{const $={tag:"term",children:[]},G={tag:"definition",children:g.children};U({tag:"definition_list_item",children:[$,G],attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos})}else g.data.checkbox?U({tag:"task_list_item",children:g.children,attributes:g.attributes,autoAttributes:g.autoAttributes,checkbox:g.data.checkbox,pos:g.pos}):U({tag:"list_item",children:g.children,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos})},checkbox_checked:(S,N,q,y)=>{V().data.checkbox="checked"},checkbox_unchecked:(S,N,q,y)=>{V().data.checkbox="unchecked"},"+block_quote":(S,N,q,y)=>{ne(y)},"-block_quote":(S,N,q,y)=>{const g=re(y);U({tag:"block_quote",children:g.children,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos})},"+table":(S,N,q,y)=>{ne(y),V().data.aligns=[]},"-table":(S,N,q,y)=>{var g;const $=re(y),G=$.children;let K={tag:"caption",children:[]};((g=G[0])===null||g===void 0?void 0:g.tag)==="caption"&&(K=G.shift()),U({tag:"table",children:[K,...G],attributes:$.attributes,autoAttributes:$.autoAttributes,pos:$.pos})},"+row":(S,N,q,y)=>{ne(y),V().data.aligns=[]},"-row":(S,N,q,y)=>{const g=re(y);if(g.children.length===0){V().data.aligns=g.data.aligns;const $=Or();if($&&"tag"in $&&$.tag==="row"){$.head=!0;for(let G=0;G<$.children.length;G++)$.children[G].head=!0,$.children[G].align=g.data.aligns[G]||"default"}}else{g.data.aligns=[];for(let $=0;$<g.children.length;$++)g.children[$].align=V().data.aligns[$]||"default";U({tag:"row",children:g.children,head:!1,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos})}},separator_default:(S,N,q,y)=>{V().data.aligns.push("default")},separator_left:(S,N,q,y)=>{V().data.aligns.push("left")},separator_right:(S,N,q,y)=>{V().data.aligns.push("right")},separator_center:(S,N,q,y)=>{V().data.aligns.push("center")},"+cell":(S,N,q,y)=>{ne(y)},"-cell":(S,N,q,y)=>{const g=re(y);U({tag:"cell",children:g.children,head:!1,align:"default",attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos})},"+caption":(S,N,q,y)=>{ne(y)},"-caption":(S,N,q,y)=>{var g;const $=re(y),G=Or();if(!G||"tag"in G&&G.tag!=="table")return;const K={tag:"caption",children:$.children,attributes:$.attributes,autoAttributes:$.autoAttributes,pos:$.pos};((g=G.children[0])===null||g===void 0?void 0:g.tag)==="caption"&&(G.children[0]=K)},"+footnote":(S,N,q,y)=>{ne(y)},"-footnote":(S,N,q,y)=>{const g=re(y);if(g.data.label){const $=x(g.data.label);pe[$]={tag:"footnote",label:$||"",children:g.children,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos}}else Ae(new r.Warning("Ignoring footnote without a label.",k.sourcePositions?j(q):q))},note_label:(S,N,q,y)=>{V().data.label=w.substring(N,q+1)},"+code_block":(S,N,q,y)=>{ne(y),F=p.Verbatim},"-code_block":(S,N,q,y)=>{const g=re(y);g.data.format?U({tag:"raw_block",format:g.data.format,text:z,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos}):U({tag:"code_block",text:z,lang:g.data.lang,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos}),F=p.Normal,z=""},code_language:(S,N,q,y)=>{const g=V();g.data.lang=w.substring(N,q+1)},"+div":(S,N,q,y)=>{ne(y)},"-div":(S,N,q,y)=>{const g=re(y);U({tag:"div",children:g.children,attributes:g.attributes,autoAttributes:g.autoAttributes,pos:g.pos})},thematic_break:(S,N,q,y)=>{const g={tag:"thematic_break",pos:y};st(g),U(g)},left_single_quote:(S,N,q,y)=>{U({tag:"smart_punctuation",type:"left_single_quote",text:"'",pos:y})},right_single_quote:(S,N,q,y)=>{U({tag:"smart_punctuation",type:"right_single_quote",text:"'",pos:y})},left_double_quote:(S,N,q,y)=>{U({tag:"smart_punctuation",type:"left_double_quote",text:'"',pos:y})},right_double_quote:(S,N,q,y)=>{U({tag:"smart_punctuation",type:"right_double_quote",text:'"',pos:y})},ellipses:(S,N,q,y)=>{U({tag:"smart_punctuation",type:"ellipses",text:"...",pos:y})},en_dash:(S,N,q,y)=>{U({tag:"smart_punctuation",type:"en_dash",text:"--",pos:y})},em_dash:(S,N,q,y)=>{U({tag:"smart_punctuation",type:"em_dash",text:"---",pos:y})},blankline:(S,N,q,y)=>{let g;"tight"in V().data?g=V():me.length>=2&&"tight"in me[me.length-2].data&&(g=me[me.length-2]),g&&(g.data.blanklines=!0)}},bi=function(S,N){let q,y,g;k.sourcePositions&&(q=j(N.startpos),y=j(N.endpos),g={start:q,end:y});let $=N.annot,G=[];if(N.annot.includes("|")){const Fe=N.annot.split("|");$=Fe[0],G=Fe.slice(1)}if(de>0&&$!=="blankline"){let Fe;const Ge=V();Ge&&(Ge.data&&"tight"in Ge.data?Fe=Ge:S.length>=2&&"tight"in S[S.length-2].data&&(Fe=S[S.length-2])),Fe&&(!/^[+-]list/.test($)&&Fe.data.blanklines&&(Fe.data.tight=!1),/^[-+]list_item$/.test($)||(Fe.data.blanklines=!1))}const K=gi[$];K&&K(G,N.startpos,N.endpos,g)},me=[{children:[],data:{headinglevel:0},pos:{start:{line:0,col:0,offset:0},end:{line:0,col:0,offset:0}}}];let zs=0;for(const S of ke)bi(me,S),zs=S.endpos;let Pr;k.sourcePositions&&(Pr=j(zs));let kt=V();for(;kt&&kt.data.headinglevel>0;)re(Pr&&{start:Pr,end:Pr}),U({tag:"section",children:kt.children,attributes:kt.attributes,autoAttributes:kt.autoAttributes,pos:kt.pos}),kt=V();const _n={tag:"doc",references:fe,autoReferences:se,footnotes:pe,children:me[0].children};return me[0].autoAttributes&&(_n.autoAttributes=me[0].autoAttributes),me[0].attributes&&(_n.attributes=me[0].attributes),_n};e.parse=f;const v={children:!0,tag:!0,pos:!0,attributes:!0,autoAttributes:!0,references:!0,autoReferences:!0,footnotes:!0},M=function(w){return JSON.stringify(w).replace(/\\\n/g,"\\n")},I=function(w,k,P){if(k.push(" ".repeat(P)),P>128){k.push(`(((DEEPLY NESTED CONTENT OMITTED)))
`);return}k.push(w.tag),w.pos&&k.push(` (${w.pos.start.line}:${w.pos.start.col}:${w.pos.start.offset}-${w.pos.end.line}:${w.pos.end.col}:${w.pos.end.offset})`);for(const j in w)if(!v[j]){const F=w[j];F!=null&&k.push(` ${j}=${M(F)}`)}if(w.attributes)for(const j in w.attributes)k.push(` ${j}=${M(w.attributes[j])}`);if(k.push(`
`),w.children)for(const j of w.children)I(j,k,P+2)},L=function(w){const k=[];if(I(w,k,0),Object.keys(w.references).length>0){k.push(`references
`);for(const P in w.references)k.push(`  [${M(P)}] =
`),I(w.references[P],k,4)}if(Object.keys(w.footnotes).length>0){k.push(`footnotes
`);for(const P in w.footnotes)k.push(`  [${M(P)}] =
`),I(w.footnotes[P],k,4)}return k.join("")};e.renderAST=L})(bn);var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.HTMLRenderer=Ht.renderHTML=void 0;const Ha=bn,kh=_t,Ah=/[&<>]/,Sh=/[&<>"]/;class pi{constructor(t){this.smartPunctuationMap={right_single_quote:"’",left_single_quote:"‘",right_double_quote:"”",left_double_quote:"“",ellipses:"…",em_dash:"—",en_dash:"–"},this.warn=t.warn||(()=>{}),this.options=t||{},this.tight=!1,this.footnoteIndex={},this.nextFootnoteIndex=1,this.references={},this.autoReferences={}}escape(t){return Ah.test(t)?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}escapeAttribute(t){return Sh.test(t)?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t}renderAttributes(t,r){let n="";if(r)for(const a in r)if(a==="class"){let l=r[a];t.attributes&&t.attributes.class&&(l=`${l} ${t.attributes.class}`),n+=` ${a}="${this.escapeAttribute(l)}"`}else n+=` ${a}="${this.escapeAttribute(r[a])}"`;const s=Object.assign(Object.assign({},t.autoAttributes),t.attributes);if(s)for(const a in s){const l=s[a];a==="class"&&r&&r.class||(n+=` ${a}="${this.escapeAttribute(l)}"`)}if(t.pos){const a=t.pos.start,l=t.pos.end;n+=` data-startpos="${a.line}:${a.col}:${a.offset}" data-endpos="${l.line}:${l.col}:${l.offset}"`}return n}renderTag(t,r,n){let s="";return(r.attributes||r.autoAttributes||n||r.pos)&&(s=this.renderAttributes(r,n)),`<${t}${s}>`}renderCloseTag(t){return`</${t}>`}inTags(t,r,n,s){const a=n>=2?`
`:"",l=n>=1?`
`:"";return`${this.renderTag(t,r,s)}${a}${this.renderChildren(r)}</${t}>${l}`}addBacklink(t,r){const n=`<a href="#fnref${r}" role="doc-backlink">↩︎</a>`;return/\<\/p\>[\r\n]*$/.test(t)?t.replace(/\<\/p\>([\r\n]*)$/,n+"</p>$1"):t+`<p>${n}</p>
`}renderChildren(t){let r="";const n=this.tight;"tight"in t&&(this.tight=!!t.tight);for(const s of t.children)r+=this.renderAstNode(s);return"tight"in t&&(this.tight=n),r}renderAstNode(t){var r;const n=(r=this.options.overrides)===null||r===void 0?void 0:r[t.tag];return n?n(t,this):this.renderAstNodeDefault(t)}renderNotes(t){let r="";const n=[],s={};for(const a in t)s[a]=this.renderChildren(t[a]);for(const a in this.footnoteIndex){const l=this.footnoteIndex[a];l&&(n[l]=s[a])}r+=`<section role="doc-endnotes">
<hr>
<ol>
`;for(let a=1;a<n.length;a++){const l=n[a]||"";r+=`<li id="fn${a}">
`,r+=this.addBacklink(l,a),r+=`</li>
`}return r+=`</ol>
</section>
`,r}renderAstNodeDefault(t){var r;switch(t.tag){case"doc":{let n="";return n+=this.renderChildren(t),this.nextFootnoteIndex>1&&(n+=this.renderNotes(t.footnotes)),n}case"para":return this.tight?`${this.renderChildren(t)}
`:this.inTags("p",t,1);case"block_quote":return this.inTags("blockquote",t,2);case"div":return this.inTags("div",t,2);case"section":return this.inTags("section",t,2);case"list_item":return this.inTags("li",t,2);case"task_list_item":return this.inTags("li",t,2,{class:t.checkbox==="checked"?"checked":"unchecked"});case"definition_list_item":return this.renderChildren(t);case"definition":return this.inTags("dd",t,2);case"term":return this.inTags("dt",t,1);case"definition_list":return this.inTags("dl",t,2);case"bullet_list":return this.inTags("ul",t,2);case"task_list":return this.inTags("ul",t,2,{class:"task-list"});case"ordered_list":{const n={};return t.start&&t.start!==1&&(n.start=t.start.toString()),t.style&&!/1/.test(t.style)&&(n.type=t.style.replace(/[().]/g,"")),this.inTags("ol",t,2,n)}case"heading":return this.inTags(`h${t.level}`,t,1);case"footnote_reference":{let n="";const s=t.text;let a=this.footnoteIndex[s];return a||(a=this.nextFootnoteIndex,this.footnoteIndex[s]=a,this.nextFootnoteIndex++),n+=this.renderTag("a",t,{id:"fnref"+a,href:"#fn"+a,role:"doc-noteref"}),n+="<sup>",n+=this.escape(a.toString()),n+="</sup></a>",n}case"table":return this.inTags("table",t,2);case"caption":{let n="";return t.children.length>0&&(n+=this.inTags("caption",t,1)),n}case"row":return this.inTags("tr",t,2);case"cell":{const n={};return t.align&&t.align!=="default"&&(n.style=`text-align: ${t.align};`),this.inTags(t.head?"th":"td",t,1,n)}case"thematic_break":{let n="";return n+=this.renderTag("hr",t),n+=`
`,n}case"code_block":{let n="";return n+=this.renderTag("pre",t),n+="<code",t.lang&&(n+=` class="language-${this.escapeAttribute(t.lang)}"`),n+=">",n+=this.escape(t.text),n+=this.renderCloseTag("code"),n+=this.renderCloseTag("pre"),n+=`
`,n}case"raw_block":{let n="";return t.format==="html"&&(n+=t.text),n}case"str":return t.attributes||t.autoAttributes?`${this.renderTag("span",t)}${this.escape(t.text)}</span>`:this.escape(t.text);case"smart_punctuation":return this.smartPunctuationMap[t.type]||t.text;case"double_quoted":{let n="";return n+=this.smartPunctuationMap.left_double_quote||'"',n+=this.renderChildren(t),n+=this.smartPunctuationMap.right_double_quote||'"',n}case"single_quoted":{let n="";return n+=this.smartPunctuationMap.left_single_quote||"'",n+=this.renderChildren(t),n+=this.smartPunctuationMap.right_single_quote||"'",n}case"symb":return this.escape(`:${t.alias}:`);case"inline_math":{let n="";return n+=this.renderTag("span",t,{class:"math inline"}),n+=`\\(${this.escape(t.text)}\\)`,n+=this.renderCloseTag("span"),n}case"display_math":{let n="";return n+=this.renderTag("span",t,{class:"math display"}),n+=`\\[${this.escape(t.text)}\\]`,n+=this.renderCloseTag("span"),n}case"verbatim":{let n="";return n+=this.renderTag("code",t),n+=this.escape(t.text),n+=this.renderCloseTag("code"),n}case"raw_inline":{let n="";return t.format==="html"&&(n+=t.text),n}case"soft_break":return`
`;case"hard_break":return`<br>
`;case"non_breaking_space":return"&nbsp;";case"link":case"image":{const n={};let s=t.destination;if(t.reference){const a=this.references[t.reference]||this.autoReferences[t.reference];if(a){if(s=a.destination,t.tag==="image"?(n.alt=(0,Ha.getStringContent)(t),n.src=s):n.href=s,a.attributes)for(const l in a.attributes)(!t.attributes||!t.attributes[l])&&(n[l]=a.attributes[l]);if(a.autoAttributes)for(const l in a.autoAttributes)(!t.autoAttributes||!t.autoAttributes[l])&&(n[l]=a.autoAttributes[l])}else this.warn(new kh.Warning(`Reference ${JSON.stringify(t.reference)} not found`,(r=t==null?void 0:t.pos)===null||r===void 0?void 0:r.end))}else t.tag==="image"?(n.alt=(0,Ha.getStringContent)(t),s!==void 0&&(n.src=s)):s!==void 0&&(n.href=s);return t.tag==="image"?this.renderTag("img",t,n):this.inTags("a",t,0,n)}case"url":case"email":{let n="";const s={};return t.tag==="email"?s.href="mailto:"+t.text:s.href=t.text,n+=this.renderTag("a",t,s),n+=this.escape(t.text),n+=this.renderCloseTag("a"),n}case"strong":return this.inTags("strong",t,0);case"emph":return this.inTags("em",t,0);case"span":return this.inTags("span",t,0);case"mark":return this.inTags("mark",t,0);case"insert":return this.inTags("ins",t,0);case"delete":return this.inTags("del",t,0);case"superscript":return this.inTags("sup",t,0);case"subscript":return this.inTags("sub",t,0);default:return""}}render(t){return this.references=t.references,this.autoReferences=t.autoReferences,this.renderAstNode(t)}}Ht.HTMLRenderer=pi;const Nh=function(e,t={}){return new pi(t).render(e)};Ht.renderHTML=Nh;var yn={};Object.defineProperty(yn,"__esModule",{value:!0});yn.applyFilter=void 0;class Th{constructor(t){this.finished=!1,this.stack=[],this.enter=!0,this.top=t,this.current=t}walk(t){for(;!this.finished;){t(this);const r=this.stack&&this.stack[this.stack.length-1];if(this.enter)"children"in this.current&&this.current.children.length>0?(this.stack.push({node:this.current,childIndex:0}),this.current=this.current.children[0],this.enter=!0):this.enter=!1;else if(r){r.childIndex++;const n=r.node.children[r.childIndex];n?(this.current=n,this.enter=!0):(this.stack.pop(),this.current=r.node,this.enter=!1)}else this.finished=!0}}}const qh=function(e,t,r){if(!e||!e.tag)throw new Error("Filter called on a non-node.");const n=r[e.tag];if(!n)return!1;let s;if(t?"enter"in n&&n.enter&&(s=n.enter):"exit"in n&&n.exit?s=n.exit:s=n,typeof s=="function")return s(e)},Gn=function(e,t){return new Th(e).walk(r=>{let n=qh(r.current,r.enter,t);const s=r.stack[r.stack.length-1];if(typeof n=="object"&&"stop"in n&&n.stop&&(n=n.stop,r.enter=!1),n){if(Array.isArray(n))if(s)s.node.children.splice(s.childIndex,1,...n),r.current=s.node.children[s.childIndex],n.length>1&&(s.childIndex+=n.length-1);else throw Error("Cannot replace top node with multiple nodes");else if(typeof n=="object"&&"tag"in n&&n.tag)if(s)s.node.children[s.childIndex]=n;else return n}}),e},Mh=function(e,t){const r=t();let n;Array.isArray(r)?n=r:n=[r];for(const s of n){Gn(e,s);for(const a in e.footnotes)Gn(e.footnotes[a],s);for(const a in e.references)Gn(e.references[a],s)}};yn.applyFilter=Mh;var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.fromPandoc=Zt.toPandoc=void 0;const on=_t,Wr={Decimal:{Period:"1.",OneParen:"1)",TwoParens:"(1)"},LowerAlpha:{Period:"a.",OneParen:"a)",TwoParens:"(a)"},UpperAlpha:{Period:"A.",OneParen:"A)",TwoParens:"(A)"},LowerRoman:{Period:"i.",OneParen:"i)",TwoParens:"(i)"},UpperRoman:{Period:"I.",OneParen:"I)",TwoParens:"(I)"}},fi={};for(const e in Wr)for(const t in Wr[e])fi[Wr[e][t]]=[e,t];const Ch=function(e){return e.t==="Para"&&(e.t="Plain"),e},Qe=function(e){const t=Object.assign(Object.assign({},e.autoAttributes),e.attributes);if(t){const r=t.id||"",n=t.class&&t.class.split(" ")||[],s=[];for(const a in t)a!==r&&a!=="class"&&s.push([a,t[a]]);return[r,n,s]}else return["",[],[]]};class Ih{constructor(t={}){this.references={},this.footnotes={},this.options=t,this.smartPunctuationMap=this.options.smartPunctuationMap||{right_single_quote:"’",left_single_quote:"‘",right_double_quote:"”",left_double_quote:"“",ellipses:"…",em_dash:"—",en_dash:"–"},this.warn||(this.warn=()=>{})}toPandocChildren(t){if("children"in t){const r=[];return t.children.forEach(n=>{this.addToPandocElts(r,n)}),r}else return[]}toPandocDefinitionListItem(t){const r=this;return function(n){if(!("children"in n))return[];const[s,a]=n.children;return[r.toPandocChildren(s),[r.toPandocChildren(a)]]}}toPandocListItem(t){const r=this;return function(n){let s=r.toPandocChildren(n);return"checkbox"in n&&n.checkbox&&s[0].t==="Para"&&(n.checkbox==="checked"?s[0].c.unshift({t:"Str",c:"☒"},{t:"Space"}):s[0].c.unshift({t:"Str",c:"☐"},{t:"Space"})),"tight"in t&&t.tight&&(s=s.map(Ch)),s}}addToPandocElts(t,r){switch(r.tag){case"section":case"div":{const n=Qe(r);r.tag==="section"&&n[1].unshift("section"),t.push({t:"Div",c:[n,this.toPandocChildren(r)]});break}case"block_quote":t.push({t:"BlockQuote",c:this.toPandocChildren(r)});break;case"definition_list":{const n=r.children.map(this.toPandocDefinitionListItem(r));t.push({t:"DefinitionList",c:n});break}case"task_list":case"bullet_list":{let n;n=r.children.map(this.toPandocListItem(r)),t.push({t:"BulletList",c:n});break}case"ordered_list":{const n=r.children.map(this.toPandocListItem(r)),[s,a]=fi[r.style],l=r.start||1;t.push({t:"OrderedList",c:[[l,{t:s},{t:a}],n]});break}case"task_list_item":case"list_item":break;case"para":t.push({t:"Para",c:this.toPandocChildren(r)});break;case"heading":t.push({t:"Header",c:[r.level,Qe(r),this.toPandocChildren(r)]});break;case"code_block":{const n=Qe(r);r.lang&&n[1].unshift(r.lang),t.push({t:"CodeBlock",c:[n,r.text]});break}case"raw_block":t.push({t:"RawBlock",c:[r.format,r.text]});break;case"thematic_break":t.push({t:"HorizontalRule"});break;case"table":{const n=Qe(r),s=["",[],[]];let a=[],l=[],u=[];const c=[],d=[s,[]];let p=[],x=[];const f={left:"AlignLeft",right:"AlignRight",center:"AlignCenter",default:"AlignDefault"},v=function(w){return[{t:f[w.align]||"AlignDefault"},{t:"ColWidthDefault"}]},M=this,I=function(w){if("children"in w)return[Qe(w),{t:"align"in w&&f[w.align]||"AlignDefault"},1,1,[{t:"Plain",c:M.toPandocChildren(w)}]]},L=function(w){if("children"in w)return[Qe(w),w.children.map(I)]};for(let w=0;w<r.children.length;w++){const k=r.children[w];if(!("children"in k))break;l.length===0&&(l=k.children.map(v)),k.tag==="caption"?k.children.length&&(a=this.toPandocChildren(k)):k.head?x.length===0?p.push(L(k)):(c.push([s,0,p,x]),x=[],p=[L(k)]):(c.length===0&&x.length===0&&(u=p,p=[]),x.push(L(k)))}(p.length>0||x.length>0)&&c.push([s,0,p,x]),t.push({t:"Table",c:[n,[null,[{t:"Plain",c:a}]],l,[s,u],c,d]});break}case"raw_inline":t.push({t:"RawInline",c:[r.format,r.text]});break;case"soft_break":t.push({t:"SoftBreak"});break;case"hard_break":t.push({t:"LineBreak"});break;case"str":r.text.split(/ +/).forEach((n,s)=>{s>0&&t.push({t:"Space"}),n.length>0&&t.push({t:"Str",c:n})});break;case"verbatim":t.push({t:"Code",c:[Qe(r),r.text]});break;case"inline_math":t.push({t:"Math",c:[{t:"InlineMath"},r.text]});break;case"display_math":t.push({t:"Math",c:[{t:"DisplayMath"},r.text]});break;case"non_breaking_space":t.push({t:"Str",c:" "});break;case"smart_punctuation":t.push({t:"Str",c:this.smartPunctuationMap[r.type]||r.text});break;case"symb":t.push({t:"Span",c:[["",["symbol"],[["alias",r.alias]]],[{t:"Str",c:":"+r.alias+":"}]]});break;case"single_quoted":case"double_quoted":{const n={t:r.tag==="single_quoted"?"SingleQuote":"DoubleQuote"};t.push({t:"Quoted",c:[n,this.toPandocChildren(r)]});break}case"email":case"url":{let n=r.text;r.tag==="email"&&(n="mailto:"+n);const s=Qe(r);s[1].unshift(r.tag==="email"?"email":"uri"),t.push({t:"Link",c:[s,[{t:"Str",c:r.text}],[n,""]]});break}case"image":case"link":{let n=r.destination||"";const s={};if(r.reference){const d=this.references[r.reference];if(d){n=d.destination||"";const p=Object.assign(Object.assign({},d.autoAttributes),d.attributes);if(p)for(const x in p)s[x]=p[x]}else this.warn(new on.Warning("Reference "+r.reference+" not found."))}const a=Object.assign(Object.assign({},r.autoAttributes),r.attributes);if(a)for(const d in a)s[d]&&d==="class"?s[d]+=" "+a[d]:s[d]||(s[d]=a[d]);const l=Qe({tag:"link",attributes:s,children:[]}),u=n||"",c=r.attributes&&r.attributes.title||r.autoAttributes&&r.autoAttributes.title||"";c&&(l[2]=l[2].filter(([d,p])=>d!=="title")),t.push({t:r.tag==="link"?"Link":"Image",c:[l,this.toPandocChildren(r),[u,c]]});break}case"emph":t.push({t:"Emph",c:this.toPandocChildren(r)});break;case"strong":t.push({t:"Strong",c:this.toPandocChildren(r)});break;case"superscript":t.push({t:"Superscript",c:this.toPandocChildren(r)});break;case"subscript":t.push({t:"Subscript",c:this.toPandocChildren(r)});break;case"span":t.push({t:"Span",c:[Qe(r),this.toPandocChildren(r)]});break;case"mark":t.push({t:"Span",c:[["",["mark"],[]],this.toPandocChildren(r)]});break;case"insert":t.push({t:"Underline",c:this.toPandocChildren(r)});break;case"delete":t.push({t:"Strikeout",c:this.toPandocChildren(r)});break;case"footnote_reference":{const n=this.footnotes[r.text];n?t.push({t:"Note",c:this.toPandocChildren(n)}):t.push({t:"Superscript",c:[{t:"Str",c:r.text}]});break}default:this.warn(new on.Warning("Skipping unhandled node "+r.tag))}}toPandoc(t){return this.references=t.references,this.footnotes=t.footnotes,{"pandoc-api-version":[1,23],meta:{},blocks:this.toPandocChildren(t)}}}const Je=function(e){const t={};e[0]&&(t.id=e[0]),e[1].length>0&&(t.class=e[1].join(" "));for(let r=0;r<e[2].length;r++)t[e[2][r][0].toString()]=e[2][r][1];return Object.keys(t).length===0?null:t},hs=function(e){return e.t==="Plain"||e.t==="Para"},Oh=function(e){if(!e[0])return null;const t=e[0];return hs(t)&&t.c.length>=2&&t.c[0].t==="Str"&&t.c[1].t==="Space"?t.c[0].c==="☒"?(t.c.shift(),t.c.shift(),"checked"):t.c[0].c==="☐"?(t.c.shift(),t.c.shift(),"unchecked"):null:null};class Ph{constructor(t={}){this.footnotes={},this.footnoteIndex=0,this.options=t,this.warn=t.warn||(()=>{})}fromPandocInlines(t){let r=[];const n=[];for(let s=0;s<t.length;s++){const a=t[s];if(a.t==="Str")r.push(a.c);else if(a.t==="Space")r.push(" ");else switch(r.length>0&&(n.push({tag:"str",text:r.join("")}),r=[]),a.t){case"SoftBreak":n.push({tag:"soft_break"});break;case"LineBreak":n.push({tag:"hard_break"});break;case"Emph":n.push({tag:"emph",children:this.fromPandocInlines(a.c)});break;case"Strong":n.push({tag:"strong",children:this.fromPandocInlines(a.c)});break;case"Superscript":n.push({tag:"superscript",children:this.fromPandocInlines(a.c)});break;case"Subscript":n.push({tag:"subscript",children:this.fromPandocInlines(a.c)});break;case"Strikeout":n.push({tag:"delete",children:this.fromPandocInlines(a.c)});break;case"Span":{const l={tag:"span",children:this.fromPandocInlines(a.c[1])},u=Je(a.c[0]);u&&(l.attributes=u),n.push(l);break}case"Underline":n.push({tag:"span",attributes:{class:"underline"},children:this.fromPandocInlines(a.c)});break;case"SmallCaps":n.push({tag:"span",attributes:{class:"smallcaps"},children:this.fromPandocInlines(a.c)});break;case"Math":n.push({tag:a.c[0].t==="DisplayMath"?"display_math":"inline_math",text:a.c[1]});break;case"Quoted":a.c[0].t==="SingleQuote"?n.push({tag:"single_quoted",children:this.fromPandocInlines(a.c[1])}):n.push({tag:"double_quoted",children:this.fromPandocInlines(a.c[1])});break;case"RawInline":n.push({tag:"raw_inline",format:a.c[0],text:a.c[1]});break;case"Code":{const l=Je(a.c[0]),u={tag:"verbatim",text:a.c[1]};l&&(u.attributes=l),n.push(u);break}case"Image":case"Link":{let l=Je(a.c[0]);a.c[2][1]&&(l=l||{},l.title=a.c[2][1]);const u=a.c[2][0],c=this.fromPandocInlines(a.c[1]);if(a.t==="Image"){const d={tag:"image",destination:u,children:c};l&&(d.attributes=l),n.push(d)}else{const d={tag:"link",destination:u,children:c};l&&(d.attributes=l),n.push(d)}break}case"Cite":n.push({tag:"span",attributes:{class:"cite"},children:this.fromPandocInlines(a.c[1])});break;case"Note":{this.footnoteIndex++;const l=this.footnoteIndex.toString(),u=a.c.map(c=>this.fromPandocBlock(c));this.footnotes[this.footnoteIndex.toString()]={tag:"footnote",label:l,children:u},n.push({tag:"footnote_reference",text:l});break}}}return r.length>0&&n.push({tag:"str",text:r.join("")}),n}fromPandocBlock(t){switch(t.t){case"Plain":case"Para":return{tag:"para",children:this.fromPandocInlines(t.c)};case"BlockQuote":return{tag:"block_quote",children:t.c.map(r=>this.fromPandocBlock(r))};case"Div":{let r=Je(t.c[0]);const n=/\bsection\b/.test(r&&r.class||"")?"section":"div",s=t.c[1].map(a=>this.fromPandocBlock(a));if(n==="section")return r=r||{},r.class=r.class.replace(/section */,""),r.class||delete r.class,{tag:"section",attributes:r,children:s};{const a={tag:"div",children:s};return r&&(a.attributes=r),a}}case"Header":{const r=Je(t.c[1]),n={tag:"heading",level:t.c[0],children:this.fromPandocInlines(t.c[2])};return r&&(n.attributes=r),n}case"HorizontalRule":return{tag:"thematic_break"};case"RawBlock":return{tag:"raw_block",format:t.c[0],text:t.c[1]};case"CodeBlock":{const r=Je(t.c[0]);let n;if(r&&r.class){const a=r.class.split(/  */);n=a[0],a.shift(),a.length>0?r.class=a.join(" "):delete r.class}const s={tag:"code_block",lang:n,text:t.c[1]};return r&&(s.attributes=r),n||delete s.lang,s}case"DefinitionList":{const r=[];for(let n=0;n<t.c.length;n++){const s=t.c[n][0],a=t.c[n][1],l=this.fromPandocInlines(s),u=[];for(let c=0;c<a.length;c++)a[c].map(d=>{u.push(this.fromPandocBlock(d))});r.push({tag:"definition_list_item",children:[{tag:"term",children:l},{tag:"definition",children:u}]})}return{tag:"definition_list",children:r}}case"OrderedList":case"BulletList":{const r=[],n=[];let s=!1,a;t.t==="BulletList"?a=t.c:a=t.c[1];for(let l=0;l<a.length;l++){const u=Oh(a[l]),c=a[l].map(d=>(d.t==="Plain"?s=!0:d.t==="Para"&&(s=!1),this.fromPandocBlock(d)));u!==null?n.push({tag:"task_list_item",checkbox:u,children:c}):r.push({tag:"list_item",children:c})}if(t.t==="BulletList")return n.length>0?{tag:"task_list",tight:s,children:n}:{tag:"bullet_list",style:"-",tight:s,children:r};if(t.t==="OrderedList"){const l=t.c[0][0];let u=t.c[0][1].t;u==="DefaultStyle"&&(u="Decimal");let c=t.c[0][2].t;return c==="DefaultDelim"&&(c="Period"),{tag:"ordered_list",style:Wr[u][c],start:l,tight:s,children:r}}}case"Table":{const r=Je(t.c[0]),n=t.c[1][1],s={tag:"caption",children:[]};n.length>1||n.length===1&&!hs(n[0])?this.warn(new on.Warning("Skipping block-level content in table caption.")):n[0]&&"c"in n[0]&&(s.children=this.fromPandocInlines(n[0].c));const a=t.c[2],l=[];for(const f in a)l.push(a[f][0].t.slice(5).toLowerCase());const u=[],c=t.c[3][1];for(const f in c)u.push(this.fromPandocRow(c[f],!0,0,l));const d=t.c[4];for(const f in d){const v=d[f][1],M=d[f][2];for(const L in M)u.push(this.fromPandocRow(M[L],!0,v,l));const I=d[f][3];for(const L in I)u.push(this.fromPandocRow(I[L],!1,v,l))}const p=t.c[5][1];for(const f in p)u.push(this.fromPandocRow(p[f],!1,0,l));const x={tag:"table",children:[s,...u]};return r&&(x.attributes=r),x}case"Figure":{const r=Je(t.c[0]);/\bsection\b/.test(r&&r.class||"");const n=t.c[2].map(l=>this.fromPandocBlock(l)),s=t.c[1][1];if(s.length>0){const l=s.map(u=>this.fromPandocBlock(u));n.push(...l)}const a={tag:"div",children:n};return r&&(a.attributes=r),a}case"LineBlock":{const r=[];for(let n=0;n<t.c.length;n++)n>0&&r.push({tag:"hard_break"}),r.push(...this.fromPandocInlines(t.c[n]));return{tag:"para",children:r}}case"Null":return{tag:"raw_block",format:"none",text:""}}return{tag:"raw_block",format:"error",text:"Could not convert "+t.t}}fromPandocRow(t,r,n,s){const a=Je(t[0]),l=t[1],u=[];for(let d=0;d<l.length;d++)u.push(this.fromPandocCell(l[d],r||d<n,s[d]));const c={tag:"row",head:r,children:u};return a&&(c.attributes=a),c}fromPandocCell(t,r,n){let s=[];const a=Je(t[0]);let l=t[1].t.slice(5).toLowerCase();l==="default"&&(l=n);const u=t[4];u.length>1||u.length===1&&!hs(u[0])?(this.warn(new on.Warning("Skipping table cell with block-level content.")),s=[{tag:"str",text:"((content omitted))"}]):u[0]&&(s=this.fromPandocInlines(u[0].c));const c={tag:"cell",head:r,align:l,children:s};return a&&(c.attributes=a),c}fromPandoc(t){if(typeof t!="object")throw Error("Pandoc document must be an object");if(t["pandoc-api-version"])if(t.blocks){if(!t.meta)throw Error("Pandoc document lacks meta")}else throw Error("Pandoc document lacks blocks");else throw Error("Pandoc document lacks pandoc-api-version");return{tag:"doc",children:t.blocks.map(r=>this.fromPandocBlock(r)),footnotes:this.footnotes,references:{},autoReferences:{}}}}const $h=function(e,t){return new Ih(t).toPandoc(e)};Zt.toPandoc=$h;const Eh=function(e,t){return new Ph(t).fromPandoc(e)};Zt.fromPandoc=Eh;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.renderDjot=void 0;const St=Ue,Za=bn,mi=function(e){const t=e.tag;return t==="space"||t==="soft_break"||t==="hard_break"},Lh=function(e){return e.children[0]&&mi(e.children[0])},Bh=function(e){return e.children[0]&&mi(e.children[e.children.length-1])},Un=function(e,t){const r=e.text.match(/(`+)/g),n={};if(r)for(const a in r)n[r[a].length]=!0;let s=t;for(;n[s];)s++;return"`".repeat(s)},Xa=function(e){if(e<0||e>=4e3)return"?";let t="";for(;e>0;)if(e>=1e3)t+="M",e-=1e3;else if(e>=900)t+="CM",e-=900;else if(e>=500)t+="D",e-=500;else if(e>=400)t+="CD",e-=400;else if(e>=100)t+="C",e-=100;else if(e>=90)t+="XC",e-=90;else if(e>=50)t+="L",e-=50;else if(e>=40)t+="XL",e-=40;else if(e>=10)t+="X",e-=10;else if(e==9)t+="IX",e-=9;else if(e>=5)t+="V",e-=5;else if(e==4)t+="IV",e-=4;else if(e>=1)t+="I",e-=1;else throw new Error("toRoman encountered x = "+e);return t},Dh=function(e,t){const r=t.replace(/[a-zA-Z0-9]+/g,"$"),n=t.replace(/[.()]/g,"");let s;switch(n){case"1":s=e.toString();break;case"a":s=String.fromCodePoint(96+e%26);break;case"A":s=String.fromCodePoint(64+e%26);break;case"i":s=Xa(e).toLowerCase();break;case"I":s=Xa(e);break;default:throw new Error("formatNumber encountered unknown style "+t)}return r.replace("$",s)};class zh{constructor(t,r={}){this.prefixes=[],this.buffer=[],this.startOfLine=!0,this.endOfPrefix=0,this.column=0,this.needsBlankLine=!1,this.handlers={doc:n=>{this.renderChildren(n.children),this.prefixes=[],this.cr(),Object.keys(n.references).length>0&&(this.cr(),this.newline());for(const s in n.references)this.renderNode(n.references[s]);Object.keys(n.footnotes).length>0;for(const s in n.footnotes)this.renderNode(n.footnotes[s]);this.prefixes=[],this.cr()},footnote:n=>{this.lit("[^"+n.label+"]:"),this.space(),this.needsBlankLine=!1,this.prefixes.push("  "),this.renderChildren(n.children),this.prefixes.pop(),this.blankline()},reference:n=>{this.lit("["),this.lit(n.label),this.lit("]:"),this.prefixes.push("  "),this.space(),this.lit(n.destination),this.wrap(),this.prefixes.pop(),this.blankline()},para:n=>{this.renderChildren(n.children),this.blankline()},thematic_break:()=>{this.lit("* * * * *"),this.blankline()},div:n=>{this.lit(":::"),this.cr(),this.renderChildren(n.children),this.cr(),this.lit(":::"),this.blankline()},heading:n=>{const s="#".repeat(n.level);this.lit(s+" "),this.prefixes.push(s+" "),this.renderChildren(n.children),this.prefixes.pop(),this.blankline()},block_quote:n=>{this.prefixes.push("> "),this.lit("> "),this.renderChildren(n.children),this.prefixes.pop(),this.blankline()},section:n=>{this.renderChildren(n.children)},code_block:n=>{const s=Un(n,3);this.lit(s),n.lang&&this.lit(" "+n.lang),this.cr(),this.litlines(n.text),this.cr(),this.lit(s),this.blankline()},raw_block:n=>{const s=Un(n,3);this.lit(s),this.lit(" ="+n.format),this.cr(),this.litlines(n.text),this.cr(),this.lit(s),this.blankline()},definition_list:n=>{const s=n.children;for(let a=0;a<s.length;a++){const l=s[a];a>0&&this.newline(),this.lit(":"),this.needsBlankLine=!1,this.space(),this.prefixes.push(" ".repeat(2)),this.renderChildren(l.children),this.prefixes.pop()}},ordered_list:n=>{const s=n.style,a=n.start||1,l=n.children,u=n.tight;for(let c=0;c<l.length;c++){const d=l[c];c>0&&(this.cr(),u||this.newline());const p=Dh(a+c,s);this.lit(p),this.needsBlankLine=!1,this.space(),this.prefixes.push(" ".repeat(p.length+1)),this.renderChildren(d.children),this.prefixes.pop()}u&&this.blankline()},bullet_list:n=>{const s=n.children,a=n.tight;for(let l=0;l<s.length;l++){const u=s[l];l>0&&(this.cr(),a||this.newline());const c=n.style;this.lit(c),this.needsBlankLine=!1,this.space(),this.prefixes.push(" ".repeat(c.length+1)),this.renderChildren(u.children),this.prefixes.pop()}a&&this.blankline()},task_list:n=>{const s=n.children,a=n.tight;for(let l=0;l<s.length;l++){const u=s[l];l>0&&(this.cr(),a||this.newline()),this.needsBlankLine=!1,this.lit(`- [${u.checkbox==="checked"?"X":" "}]`),this.space(),this.prefixes.push(" ".repeat(6)),this.renderChildren(u.children),this.prefixes.pop()}a&&this.blankline()},term:n=>{this.renderChildren(n.children),this.blankline()},definition:n=>{this.renderChildren(n.children)},table:n=>{const s=n.children.filter(St.isCaption),a=n.children.filter(St.isRow);for(let l=0;l<a.length;l++){const u=a[l];if("head"in u&&!u.head&&l>0&&a[l-1].head){const c=a[l-1];for(let d=0;d<c.children.length;d++){switch(d===0&&this.lit("|"),c&&c.children[d].align){case"left":this.lit(":--");break;case"right":this.lit("--:");break;case"center":this.lit(":-:");break;default:this.lit("---")}this.lit("|")}this.cr()}for(let c=0;c<u.children.length;c++){const d=u.children[c];c===0&&this.lit("|"),this.noWrap(()=>{d.tag==="cell"&&this.renderChildren(d.children)}),this.lit("|")}this.cr()}s.length>0&&s[0].children.length>0&&(this.newline(),this.lit("^ "),this.needsBlankLine=!1,this.prefixes.push("  "),this.renderChildren(s[0].children),this.prefixes.pop(),this.blankline()),this.blankline()},str:n=>{n.text.split(/  */).forEach((s,a)=>{a>0&&this.space(),this.out(s)})},space:()=>{this.space()},soft_break:()=>{this.soft_break()},smart_punctuation:n=>{this.lit(n.text)},non_breaking_space:()=>{this.lit("\\ ")},single_quoted:this.inlineContainer("'"),double_quoted:this.inlineContainer('"'),emph:this.inlineContainer("_"),strong:this.inlineContainer("*"),superscript:this.inlineContainer("^"),subscript:this.inlineContainer("~"),mark:this.inlineContainer("=",!0),delete:this.inlineContainer("-",!0),insert:this.inlineContainer("+",!0),footnote_reference:n=>{this.lit("[^"+n.text+"]")},symb:n=>{this.lit(":"+n.alias+":")},email:n=>{this.lit("<"+n.text+">")},url:n=>{this.lit("<"+n.text+">")},span:n=>{this.lit("["),this.renderChildren(n.children),this.lit("]")},link:n=>{this.lit("["),this.renderChildren(n.children),this.lit("]"),n.reference?(this.lit("["),n.reference!==(0,Za.getStringContent)(n)&&this.lit(n.reference),this.lit("]")):n.destination?(this.lit("("),this.lit(n.destination),this.lit(")")):this.lit("()")},image:n=>{this.lit("!["),this.renderChildren(n.children),this.lit("]"),n.reference?(this.lit("["),n.reference!==(0,Za.getStringContent)(n)&&this.lit(n.reference),this.lit("]")):n.destination?(this.lit("("),this.lit(n.destination),this.lit(")")):this.lit("()")},raw_inline:n=>{this.verbatimNode(n),this.lit("{="+n.format+"}")},verbatim:n=>{this.verbatimNode(n)},inline_math:n=>{this.lit("$"),this.verbatimNode(n)},display_math:n=>{this.lit("$$"),this.verbatimNode(n)}},this.doc=t,this.wrapWidth=(r==null?void 0:r.wrapWidth)||0}escape(t){return t=t.replace(/([~`'"${}[\]^<>\\*_]|-(?=-)|!(=\[)|\.(?=\.))/g,"\\$1"),(this.column===0||this.column===this.endOfPrefix)&&(t=t.replace(/^#/,"\\#")),t}out(t){this.lit(this.escape(t))}doBlankLines(){this.needsBlankLine&&(this.cr(),this.newline(),this.needsBlankLine=!1)}lit(t){this.buffer.push(t),this.column+=t.length,this.startOfLine=!1}blankline(){this.needsBlankLine=!0}newline(){if(this.endOfPrefix===this.column)for(;/  *$|^$/.test(this.buffer[this.buffer.length-1]);)this.buffer[this.buffer.length-1]=this.buffer[this.buffer.length-1].replace(/  *$/,""),this.buffer[this.buffer.length-1]===""&&this.buffer.pop();if(this.endOfPrefix=0,this.column=0,this.buffer.push(`
`),this.prefixes.length>0){for(let t=0,r=this.prefixes.length;t<r;t++)this.buffer.push(this.prefixes[t]),this.column+=this.prefixes[t].length;this.endOfPrefix=this.column}this.startOfLine=!0}cr(){this.startOfLine||this.newline()}wrap(){if(this.wrapWidth<=0)return;let t=this.buffer.length-1;if(!this.startOfLine&&this.buffer.length>0&&this.column>this.wrapWidth){let r;for(;t>=0&&(r=this.buffer[t],r!==" ");){if(/^[ \r\n]+$/.test(r))return;t--}}if(t<this.buffer.length-1){const r=this.buffer.splice(t+1);this.buffer[this.buffer.length-1]===" "&&this.buffer.pop(),this.newline(),this.startOfLine=!0;for(let n=0;n<r.length;n++)this.buffer.push(r[n]),this.column+=r[n].length,this.startOfLine=!1}}space(){this.wrap(),this.lit(" ")}soft_break(){this.wrapWidth===0?this.newline():this.space()}needsBraces(t){return Lh(t)||Bh(t)||this.buffer.length>0&&/\w$/.test(this.buffer[this.buffer.length-1])}noWrap(t){const r=this.wrapWidth;this.wrapWidth=-1,t(),this.wrapWidth=r}inlineContainer(t,r){const n=this;return function(s){r=r||n.needsBraces(s),r&&n.lit("{"),n.lit(t),n.renderChildren(s.children),n.lit(t),r&&n.lit("}")}}litlines(t){const r=t.split(/\r?\n/);r[r.length-1]===""&&r.pop();for(const n of r)this.lit(n),this.cr()}verbatimNode(t){const r=Un(t,1);this.lit(r),/^`/.test(t.text)&&this.lit(" "),this.lit(t.text),/`$/.test(t.text)&&this.lit(" "),this.lit(r)}renderChildren(t){for(let r=0,n=t.length;r<n;r++)this.renderNode(t[r]);t[0]&&!(0,St.isBlock)(t[0])&&this.wrap()}renderNode(t){this.doBlankLines();const r=this.handlers[t.tag];if(r)t.attributes&&(0,St.isBlock)(t)&&(this.renderAttributes(t),this.cr()),r(t),t.attributes&&(0,St.isInline)(t)&&this.renderAttributes(t);else throw new Error("No renderer defined for node type "+t.tag)}renderAttributes(t){if(!t.attributes||Object.keys(t.attributes).length===0)return;const r=t.attributes;this.lit("{");let n=!0;(0,St.isBlock)(t)&&this.prefixes.push(" ");for(const s in r){if(n||this.space(),s==="id")this.lit("#"),this.lit(r[s]);else if(s==="class"){const a=r[s].split(/  */);for(let l=0;l<a.length;l++)l>0&&this.space(),this.lit("."),this.lit(a[l])}else this.lit(s),this.lit('="'),this.out(r[s]),this.lit('"');n=!1}(0,St.isBlock)(t)&&this.prefixes.pop(),this.lit("}")}render(){return this.renderNode(this.doc),this.buffer.join("")}}const jh=function(e,t={}){return new zh(e,t).render()};vn.renderDjot=jh;var wn={};Object.defineProperty(wn,"__esModule",{value:!0});wn.version=void 0;wn.version="0.3.1";(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isInline=e.isBlock=e.version=e.renderDjot=e.toPandoc=e.fromPandoc=e.applyFilter=e.HTMLRenderer=e.renderHTML=e.parseEvents=e.renderAST=e.parse=void 0;var t=bn;Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}}),Object.defineProperty(e,"renderAST",{enumerable:!0,get:function(){return t.renderAST}});var r=Mr;Object.defineProperty(e,"parseEvents",{enumerable:!0,get:function(){return r.parseEvents}});var n=Ht;Object.defineProperty(e,"renderHTML",{enumerable:!0,get:function(){return n.renderHTML}}),Object.defineProperty(e,"HTMLRenderer",{enumerable:!0,get:function(){return n.HTMLRenderer}});var s=yn;Object.defineProperty(e,"applyFilter",{enumerable:!0,get:function(){return s.applyFilter}});var a=Zt;Object.defineProperty(e,"fromPandoc",{enumerable:!0,get:function(){return a.fromPandoc}}),Object.defineProperty(e,"toPandoc",{enumerable:!0,get:function(){return a.toPandoc}});var l=vn;Object.defineProperty(e,"renderDjot",{enumerable:!0,get:function(){return l.renderDjot}});var u=wn;Object.defineProperty(e,"version",{enumerable:!0,get:function(){return u.version}});var c=Ue;Object.defineProperty(e,"isBlock",{enumerable:!0,get:function(){return c.isBlock}}),Object.defineProperty(e,"isInline",{enumerable:!0,get:function(){return c.isInline}})})(xd);function Rh(e,t){return bd.renderToString(e,t)}function Vn(e,t){vt(t,!1);let r=Ce(t,"exp",24,()=>"");$t();var n=ot(),s=$e(n);Il(s,()=>Rh(r())),J(e,n),wt()}var Fh=Ie(`Image compression is a common technique to reduce the inherently large
        size of color images since they typically require <!> floating point values to store, where N is the number of channels (usually
        3 or 4 for RGB and RGBA respectively), and W and H are the image's width
        and height. Many common algorithms are used to perform such compression,
        both lossless—where the original data is preserved—and lossy—where the image
        is reduced in quality. The simplest example of algorithmic lossless compression
        is Run-Length Encoding which solely handles repeated pixels. A series of
        five red pixels, [1,0,0], [1,0,0], [1,0,0], [1,0,0], [1,0,0], might be represented
        as 5[1,0,0]. It would be significantly more efficient, however, if an image
        could be represented as a collection of “objects”, or more realistically,
        patterns, rather than a naive array of pixels. “A yellow flower in a grassy
        field with a blue sky,” if interpreted correctly, has a similar amount of
        information as a 1024x1024 color image of the same thing, but does not require
        three million numbers to represent. That is the main principle of autoencoder-based
        image compression.`,1),Gh=Ie(`The data used was a subset of the <code>jamescalam/unsplash-25k-photos</code> HuggingFace repository. Only 3000 of the 25,000 examples were used in order
        to expedite the training process. The data consists of nature-themed photos,
        as well as some keywords and search terms for each image, which were discarded.
        Since an autoencoder is self-supervising, it does not require labels.`,1),Uh=Ie(`Mean-Squared Error (MSE) loss was used in the training
        process—applicable since the model is not performing classification,
        rather, outputting values in a continuous range. The model was trained
        for 60 epochs, over which the loss decreased from ~0.08 to ~0.003 and
        the curve appeared to have mostly flattened. In each training step, a
        batch of 20 images (size chosen to fit in 24GB of VRAM) are run through
        the model's forward pass which passes the input through the encoder,
        then the encoder's output through the decoder. The Adam optimizer is
        then called with default settings and a learning rate of <!> to adjust the weights based on the computed loss.
        It is generally difficult to evaluate image quality/similarity since the
        eye can perceive patterns in form and/or color that are not reflected proportionately
        in a per-pixel comparison. However, some metrics do exist.`,1),Vh=Ie(`To evaluate the outputs on the testing subset of the data (N=440), RMSE
        was used alongside SSIM and FSIM scores. SSIM, the Structural Similarity
        Index Measure, is a reference-based prediction method for the perceived
        quality of images. It is calculated in windows and then averaged to get
        the overall score, which incorporates the luminance, contrast, and
        structure of the pixel values to highlight contrast areas within the
        image that the eye might deem more important than, for example, exactly
        matching the color of a pixel. FSIM, the Features Similarity Index
        Matrix, uses Phase Congruency to determine the importance of structures
        within the image. However, since Phase Congruency is contrast invariant
        and contrast is important to perceived image quality, it uses Gradient
        Magnitude to characterize the image's luminance. An RMSE score closer to
        zero signifies an improvement, while for SSIM and FSIM, a score closer
        to 1 is the equivalent. On average, the model scored an RMSE of <!>, an SSIM of 0.999999, and an FSIM of
        0.871. After a visual inspection of the reconstructed images, we see
        that the metrics mostly align with the outputs:`,1),Wh=Ie(`<article><h1>Image Compression With Autoencoders</h1> <p><em>January 12, 2025<br> First Written April 9, 2024</em></p> <h2>1. Introduction</h2> <!> <h3>1.1 Purpose</h3> <!> <h3>1.2 Data</h3> <!> <p>The images used were resized to 512x512 RGB, which performed no
        cropping, only an aspect-ratio stretch transformation followed by
        resampling to the final resolution. No manual culling was performed, and
        images were selected from the dataset in the pre-randomized order
        presented by the dataset creators.</p> <h2>2. Model</h2> <p>The autoencoder architecture is designed with the goal of copying the
        input to the output.</p> <figure><img src="/post1/autoencoder.png" alt="Autoencoder Architecture"> <figcaption>Example autoencoder architecture. <a href="http://dx.doi.org/10.1002/cso2.1050" target="_blank">Source</a></figcaption></figure> <!> <h3>2.1 Training and Evaluation</h3> <!> <!> <div class="sidebyside"><figure><img src="/post1/original1.jpg" alt="Original"> <figcaption>Original</figcaption></figure> <figure><img src="/post1/reconstructed1.png" alt="Reconstructed"> <figcaption>Reconstructed</figcaption></figure></div> <p>There are differences in color, especially an issue with
        over-saturation, and there is noticeable banding across the entire
        image. There are also some fine details missing. However, as
        demonstrated by the near-perfect SSIM score, all of the larger key
        elements are present and the contrast is mostly correct. It seems like
        FSIM is more sensitive to incorrect fine details, as its score is
        comparably lower.</p> <h2>3. Results and Ethics</h2> <!> <!> <div class="sidebyside"><figure><img src="/post1/original2.png" alt="Original"> <figcaption>Original</figcaption></figure> <figure><img src="/post1/reconstructed2.png" alt="Reconstructed"> <figcaption>Reconstructed</figcaption></figure></div> <p>While the original image has a distinctly yellow hue, and was likely
        taken in fall, the reconstructed image does not have the yellow-orange
        tint, and the leaves are greener and water bluer than intended. This
        demonstrates that the model has some meta-association between the
        structure of the image and its color, and this is entirely due to the
        data used. Thus, if a photographer's work is in the dataset, their style
        is appropriated by the model. Additionally, it shows that the contents
        of the dataset is extremely important to the output—a dataset with
        images taken in cities may not cause the same green hallucination for
        leaves, but a different one will be present. A diverse, or at least
        intentional, selection of images is important to the model's integrity.</p> <hr> <p class="centeralign"><em>This post contains my favorite of the project reports I wrote for my
            Advanced ML class in Spring 2024. It's also the first post I am
            adding to this blog.</em></p></article>`);function Hh(e){var t=Wh(),r=ie(ve(t),6);et(r,{children:(p,x)=>{var f=We(`This assignment was part of my Advanced Machine Learning class. Its goal
        was to utilize a more complex structure, the autoencoder, alongside a
        Convolutional Neural Network (CNN) to train a model that can reduce an
        image to and reconstruct it from a smaller amount of data as a form of
        lossy compression.`);J(p,f)},$$slots:{default:!0}});var n=ie(r,4);et(n,{children:(p,x)=>{var f=Fh(),v=ie($e(f));Vn(v,{exp:"N\\cdot{}W\\cdot{}H"}),J(p,f)},$$slots:{default:!0}});var s=ie(n,4);et(s,{children:(p,x)=>{var f=Gh();J(p,f)},$$slots:{default:!0}});var a=ie(s,10);et(a,{children:(p,x)=>{var f=We(`In passing the input data to the output layer, the model must learn to
        encode the input into a dimensionally reduced space before expanding it
        back to its original dimensions, encoding close to the original amount
        of information in significantly fewer values. Since the intended data
        type for this model is images, convolutional layers that decrease in
        size were used on the encoder side, with 2d transposed convolutions in
        the decoder. In this particular model, the image is reduced from
        3x512x512 to 8x64x64, which is about 4% of the input size. Early in the
        training process, it was noticed that the reconstructed image from the
        ConvTranspose2D layer had grid-like artifacts due to the convolution
        window. Thus, two linear layers were added to the end of the decoder to
        smooth the output. Additionally, while all of the hidden layers utilize
        the ReLU activation function for speed and to preserve larger values,
        the last layer in the decoder has the Sigmoid function to clamp the
        output to the [0,1] space so it can be easily mapped to [0,255] pixel
        space.`);J(p,f)},$$slots:{default:!0}});var l=ie(a,4);et(l,{children:(p,x)=>{var f=Uh(),v=ie($e(f));Vn(v,{exp:"10^{-3}"}),J(p,f)},$$slots:{default:!0}});var u=ie(l,2);et(u,{children:(p,x)=>{var f=Vh(),v=ie($e(f));Vn(v,{exp:"1.3\\cdot{}10^{-5}"}),J(p,f)},$$slots:{default:!0}});var c=ie(u,8);et(c,{children:(p,x)=>{var f=We(`While the compression method produced by this model is fairly lossy
        compared to JPEG and PNG compression, and is generally outperformed in
        file size as well, this model provides an important proof of concept for
        encoding large amounts of structured data by representing it in terms of
        its abstract properties rather than exact values. A larger model trained
        on more data could likely produce a much more competitive result. This
        model specifically is not suitable for compressing and reconstructing
        images of importance due to its lack of quality.`);J(p,f)},$$slots:{default:!0}});var d=ie(c,2);et(d,{children:(p,x)=>{var f=We(`Since the model was trained specifically on nature images provided by
        Unsplash, there are some ethical considerations. It is unknown whether
        the photographers who submitted images to Unsplash were aware that their
        work would end up in the dataset. While it is likely that Unsplash’s
        privacy policy allows them to use images in this way, many users are
        probably unaware of this. This is only an issue because the model is
        shown to hallucinate details:`);J(p,f)},$$slots:{default:!0}}),J(e,t)}var Zh=Ie('<nav><!> <!> <!> <a class="text" href="https://github.com/bleemesser" target="_blank">@bleemesser</a></nav> <div><!> <!> <!> <!> <!></div>',1),Xh=Ie("<main><!></main>");function Yh(e,t){let r=Ce(t,"url",8,"");var n=Xh(),s=ve(n);pu(s,{get url(){return r()},children:(a,l)=>{var u=Zh(),c=$e(u),d=ve(c);Ut(d,{to:"/",children:(k,P)=>{var j=We("Home");J(k,j)},$$slots:{default:!0}});var p=ie(d,2);Ut(p,{to:"/about",children:(k,P)=>{var j=We("About");J(k,j)},$$slots:{default:!0}});var x=ie(p,2);Ut(x,{to:"/blog",children:(k,P)=>{var j=We("Blog");J(k,j)},$$slots:{default:!0}});var f=ie(c,2),v=ve(f);er(v,{path:"/",component:mu});var M=ie(v,2);er(M,{path:"/about",component:xu});var I=ie(M,2);er(I,{path:"/blog",component:_u});var L=ie(I,2);er(L,{path:"/blog/example",component:Au});var w=ie(L,2);er(w,{path:"/blog/1",component:Hh}),J(a,u)},$$slots:{default:!0}}),J(e,n)}Nl(Yh,{target:document.getElementById("app")});
